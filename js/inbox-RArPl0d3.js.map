{"version":3,"file":"inbox-RArPl0d3.js","sources":["../../src/main-inbox.js"],"sourcesContent":["// Inbox.html specific JavaScript with Bootstrap WYSIWYG editor\n\n// Import jQuery setup first\nimport $ from './jquery-setup.js';\nwindow.jQuery = window.$ = $;\nglobalThis.jQuery = globalThis.$ = $;\n\n// Import security utilities\nimport { sanitizeHtml } from './utils/security.js';\n\n// Bootstrap 5\nimport * as bootstrap from 'bootstrap';\nwindow.bootstrap = bootstrap;\nglobalThis.bootstrap = bootstrap;\n\n// Global styles\nimport './main.scss';\n\n// Essential scripts for layout\nimport './js/helpers/smartresize-modern.js';\nimport './js/sidebar-modern.js';\nimport './js/init-modern.js';\n\n// Bootstrap WYSIWYG Editor\n// bootstrap-wysiwyg removed - was unused dependency\n\n// Initialize WYSIWYG editor when DOM is ready\ndocument.addEventListener('DOMContentLoaded', function () {\n  // Check if we have the required elements\n  const editorEl = document.getElementById('editor');\n  const toolbarEl = document.querySelector('[data-role=\"editor-toolbar\"]');\n\n  if (editorEl && toolbarEl && window.jQuery) {\n    try {\n      // Initialize the WYSIWYG editor\n      $(editorEl).wysiwyg({\n        toolbarSelector: '[data-role=\"editor-toolbar\"]',\n        activeToolbarClass: 'btn-info',\n        hotKeys: {\n          'ctrl+b meta+b': 'bold',\n          'ctrl+i meta+i': 'italic',\n          'ctrl+u meta+u': 'underline',\n          'ctrl+z meta+z': 'undo',\n          'ctrl+y meta+y meta+shift+z': 'redo'\n        }\n      });\n\n      // Style the editor\n      $(editorEl).css({\n        'min-height': '200px',\n        padding: '10px',\n        border: '1px solid #E6E9ED',\n        'border-radius': '4px',\n        'background-color': '#fff'\n      });\n\n      // Add some default content\n      $(editorEl).html(sanitizeHtml('<p>Start typing your message here...</p>'));\n\n      // Handle toolbar button states\n      $(editorEl).on('keyup mouseup', function () {\n        // Update toolbar button states based on current selection\n        $('[data-role=\"editor-toolbar\"] [data-edit]').each(function () {\n          const command = $(this).data('edit');\n          if (document.queryCommandState(command)) {\n            $(this).addClass('active btn-info');\n          } else {\n            $(this).removeClass('active btn-info');\n          }\n        });\n      });\n\n      // Handle file upload for images\n      $('#file-upload').on('change', function (e) {\n        const file = e.target.files[0];\n        if (file && file.type.match('image.*')) {\n          const reader = new FileReader();\n          reader.onload = function (event) {\n            const img =\n              '<img src=\"' +\n              event.target.result +\n              '\" class=\"img-responsive\" style=\"max-width: 100%; height: auto;\">';\n            $(editorEl).append(img);\n          };\n          reader.readAsDataURL(file);\n        }\n      });\n    } catch (error) {\n    }\n  } else {\n  }\n});\n\n// Handle send button\ndocument.addEventListener('click', function (e) {\n  if (e.target.matches('[data-action=\"send\"]')) {\n    e.preventDefault();\n    const content = document.getElementById('editor').innerHTML;\n\n    // Show success message\n    if (window.bootstrap && window.bootstrap.Toast) {\n      const toastHtml = `\n                <div class=\"toast align-items-center text-white bg-success border-0\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\">\n                    <div class=\"d-flex\">\n                        <div class=\"toast-body\">\n                            Message sent successfully!\n                        </div>\n                        <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\"></button>\n                    </div>\n                </div>\n            `;\n\n      const toastContainer = document.createElement('div');\n      toastContainer.innerHTML = sanitizeHtml(toastHtml);\n      document.body.appendChild(toastContainer);\n\n      const toast = new bootstrap.Toast(toastContainer.querySelector('.toast'));\n      toast.show();\n    } else {\n      alert('Message sent successfully!');\n    }\n  }\n});\n"],"names":["window","jQuery","$","globalThis","bootstrap","document","addEventListener","editorEl","getElementById","toolbarEl","querySelector","wysiwyg","toolbarSelector","activeToolbarClass","hotKeys","css","padding","border","html","sanitizeHtml","on","each","command","this","data","queryCommandState","addClass","removeClass","e","file","target","files","type","match","reader","FileReader","onload","event","img","result","append","readAsDataURL","error","matches","preventDefault","innerHTML","Toast","toastHtml","toastContainer","createElement","body","appendChild","bootstrap.Toast","show","alert"],"mappings":"uRAIAA,OAAOC,OAASD,OAAOE,EAAIA,EAC3BC,WAAWF,OAASE,WAAWD,EAAIA,EAOnCF,OAAOI,UAAYA,EACnBD,WAAWC,UAAYA,EAcvBC,SAASC,iBAAiB,mBAAoB,WAE5C,MAAMC,EAAWF,SAASG,eAAe,UACnCC,EAAYJ,SAASK,cAAc,gCAEzC,GAAIH,GAAYE,GAAaT,OAAOC,OAClC,IAEEC,EAAEK,GAAUI,QAAQ,CAClBC,gBAAiB,+BACjBC,mBAAoB,WACpBC,QAAS,CACP,gBAAiB,OACjB,gBAAiB,SACjB,gBAAiB,YACjB,gBAAiB,OACjB,6BAA8B,UAKlCZ,EAAEK,GAAUQ,IAAI,CACd,aAAc,QACdC,QAAS,OACTC,OAAQ,oBACR,gBAAiB,MACjB,mBAAoB,SAItBf,EAAEK,GAAUW,KAAKC,EAAa,6CAG9BjB,EAAEK,GAAUa,GAAG,gBAAiB,WAE9BlB,EAAE,4CAA4CmB,KAAK,WACjD,MAAMC,EAAUpB,EAAEqB,MAAMC,KAAK,QACzBnB,SAASoB,kBAAkBH,GAC7BpB,EAAEqB,MAAMG,SAAS,mBAEjBxB,EAAEqB,MAAMI,YAAY,kBAExB,EACF,GAGAzB,EAAE,gBAAgBkB,GAAG,SAAU,SAAUQ,GACvC,MAAMC,EAAOD,EAAEE,OAAOC,MAAM,GAC5B,GAAIF,GAAQA,EAAKG,KAAKC,MAAM,WAAY,CACtC,MAAMC,EAAS,IAAIC,WACnBD,EAAOE,OAAS,SAAUC,GACxB,MAAMC,EACJ,aACAD,EAAMP,OAAOS,OACb,mEACFrC,EAAEK,GAAUiC,OAAOF,EACrB,EACAJ,EAAOO,cAAcZ,EACvB,CACF,EACF,OAASa,GACT,CAGJ,GAGArC,SAASC,iBAAiB,QAAS,SAAUsB,GAC3C,GAAIA,EAAEE,OAAOa,QAAQ,wBAKnB,GAJAf,EAAEgB,iBACcvC,SAASG,eAAe,UAAUqC,UAG9C7C,OAAOI,WAAaJ,OAAOI,UAAU0C,MAAO,CAC9C,MAAMC,EAAY,qgBAWZC,EAAiB3C,SAAS4C,cAAc,OAC9CD,EAAeH,UAAY1B,EAAa4B,GACxC1C,SAAS6C,KAAKC,YAAYH,GAEZ,IAAII,EAAgBJ,EAAetC,cAAc,WACzD2C,MACR,MACEC,MAAM,6BAGZ"}