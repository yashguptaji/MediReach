{"version":3,"file":"dataTables.keyTable-Bc4AAbrm.js","sources":["../../node_modules/datatables.net-responsive/js/dataTables.responsive.mjs","../../node_modules/datatables.net-responsive-bs5/js/responsive.bootstrap5.mjs","../../node_modules/datatables.net-buttons/js/dataTables.buttons.mjs","../../node_modules/datatables.net-buttons-bs5/js/buttons.bootstrap5.mjs","../../node_modules/datatables.net-fixedheader/js/dataTables.fixedHeader.mjs","../../node_modules/datatables.net-keytable/js/dataTables.keyTable.mjs"],"sourcesContent":["/*! Responsive 3.0.6\n * Â© SpryMedia Ltd - datatables.net/license\n */\n\nimport jQuery from 'jquery';\nimport DataTable from 'datatables.net';\n\n// Allow reassignment of the $ variable\nlet $ = jQuery;\n\n\n/**\n * @summary     Responsive\n * @description Responsive tables plug-in for DataTables\n * @version     3.0.6\n * @author      SpryMedia Ltd\n * @copyright   SpryMedia Ltd.\n *\n * This source file is free software, available under the following license:\n *   MIT license - http://datatables.net/license/mit\n *\n * This source file is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n * or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.\n *\n * For details please refer to: http://www.datatables.net\n */\n\n/**\n * Responsive is a plug-in for the DataTables library that makes use of\n * DataTables' ability to change the visibility of columns, changing the\n * visibility of columns so the displayed columns fit into the table container.\n * The end result is that complex tables will be dynamically adjusted to fit\n * into the viewport, be it on a desktop, tablet or mobile browser.\n *\n * Responsive for DataTables has two modes of operation, which can used\n * individually or combined:\n *\n * * Class name based control - columns assigned class names that match the\n *   breakpoint logic can be shown / hidden as required for each breakpoint.\n * * Automatic control - columns are automatically hidden when there is no\n *   room left to display them. Columns removed from the right.\n *\n * In additional to column visibility control, Responsive also has built into\n * options to use DataTables' child row display to show / hide the information\n * from the table that has been hidden. There are also two modes of operation\n * for this child row display:\n *\n * * Inline - when the control element that the user can use to show / hide\n *   child rows is displayed inside the first column of the table.\n * * Column - where a whole column is dedicated to be the show / hide control.\n *\n * Initialisation of Responsive is performed by:\n *\n * * Adding the class `responsive` or `dt-responsive` to the table. In this case\n *   Responsive will automatically be initialised with the default configuration\n *   options when the DataTable is created.\n * * Using the `responsive` option in the DataTables configuration options. This\n *   can also be used to specify the configuration options, or simply set to\n *   `true` to use the defaults.\n *\n *  @class\n *  @param {object} settings DataTables settings object for the host table\n *  @param {object} [opts] Configuration options\n *  @requires jQuery 1.7+\n *  @requires DataTables 2.0.0+\n *\n *  @example\n *      $('#example').DataTable( {\n *        responsive: true\n *      } );\n *    } );\n */\nvar Responsive = function (settings, opts) {\n\t// Sanity check that we are using DataTables 2.0.0 or newer\n\tif (!DataTable.versionCheck || !DataTable.versionCheck('2')) {\n\t\tthrow 'DataTables Responsive requires DataTables 2 or newer';\n\t}\n\n\tthis.s = {\n\t\tchildNodeStore: {},\n\t\tcolumns: [],\n\t\tcurrent: [],\n\t\tdt: new DataTable.Api(settings)\n\t};\n\n\t// Check if responsive has already been initialised on this table\n\tif (this.s.dt.settings()[0].responsive) {\n\t\treturn;\n\t}\n\n\t// details is an object, but for simplicity the user can give it as a string\n\t// or a boolean\n\tif (opts && typeof opts.details === 'string') {\n\t\topts.details = { type: opts.details };\n\t}\n\telse if (opts && opts.details === false) {\n\t\topts.details = { type: false };\n\t}\n\telse if (opts && opts.details === true) {\n\t\topts.details = { type: 'inline' };\n\t}\n\n\tthis.c = $.extend(\n\t\ttrue,\n\t\t{},\n\t\tResponsive.defaults,\n\t\tDataTable.defaults.responsive,\n\t\topts\n\t);\n\tsettings.responsive = this;\n\tthis._constructor();\n};\n\n$.extend(Responsive.prototype, {\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t * Constructor\n\t */\n\n\t/**\n\t * Initialise the Responsive instance\n\t *\n\t * @private\n\t */\n\t_constructor: function () {\n\t\tvar that = this;\n\t\tvar dt = this.s.dt;\n\t\tvar oldWindowWidth = $(window).innerWidth();\n\n\t\tdt.settings()[0]._responsive = this;\n\n\t\t// Use DataTables' throttle function to avoid processor thrashing\n\t\t$(window).on(\n\t\t\t'orientationchange.dtr',\n\t\t\tDataTable.util.throttle(function () {\n\t\t\t\t// iOS has a bug whereby resize can fire when only scrolling\n\t\t\t\t// See: http://stackoverflow.com/questions/8898412\n\t\t\t\tvar width = $(window).innerWidth();\n\n\t\t\t\tif (width !== oldWindowWidth) {\n\t\t\t\t\tthat._resize();\n\t\t\t\t\toldWindowWidth = width;\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\n\t\t// Handle new rows being dynamically added - needed as responsive\n\t\t// updates all rows (shown or not) a responsive change, rather than\n\t\t// per draw.\n\t\tdt.on('row-created.dtr', function (e, tr, data, idx) {\n\t\t\tif ($.inArray(false, that.s.current) !== -1) {\n\t\t\t\t$('>td, >th', tr).each(function (i) {\n\t\t\t\t\tvar idx = dt.column.index('toData', i);\n\n\t\t\t\t\tif (that.s.current[idx] === false) {\n\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t.css('display', 'none')\n\t\t\t\t\t\t\t.addClass('dtr-hidden');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t// Destroy event handler\n\t\tdt.on('destroy.dtr', function () {\n\t\t\tdt.off('.dtr');\n\t\t\t$(dt.table().body()).off('.dtr');\n\t\t\t$(window).off('resize.dtr orientationchange.dtr');\n\t\t\tdt.cells('.dtr-control').nodes().to$().removeClass('dtr-control');\n\t\t\t$(dt.table().node()).removeClass('dtr-inline collapsed');\n\n\t\t\t// Restore the columns that we've hidden\n\t\t\t$.each(that.s.current, function (i, val) {\n\t\t\t\tif (val === false) {\n\t\t\t\t\tthat._setColumnVis(i, true);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// Reorder the breakpoints array here in case they have been added out\n\t\t// of order\n\t\tthis.c.breakpoints.sort(function (a, b) {\n\t\t\treturn a.width < b.width ? 1 : a.width > b.width ? -1 : 0;\n\t\t});\n\n\t\tthis._classLogic();\n\n\t\t// Details handler\n\t\tvar details = this.c.details;\n\n\t\tif (details.type !== false) {\n\t\t\tthat._detailsInit();\n\n\t\t\t// DataTables will trigger this event on every column it shows and\n\t\t\t// hides individually\n\t\t\tdt.on('column-visibility.dtr', function () {\n\t\t\t\t// Use a small debounce to allow multiple columns to be set together\n\t\t\t\tif (that._timer) {\n\t\t\t\t\tclearTimeout(that._timer);\n\t\t\t\t}\n\n\t\t\t\tthat._timer = setTimeout(function () {\n\t\t\t\t\tthat._timer = null;\n\n\t\t\t\t\tthat._classLogic();\n\t\t\t\t\tthat._resizeAuto();\n\t\t\t\t\tthat._resize(true);\n\n\t\t\t\t\tthat._redrawChildren();\n\t\t\t\t}, 100);\n\t\t\t});\n\n\t\t\t// Redraw the details box on each draw which will happen if the data\n\t\t\t// has changed. This is used until DataTables implements a native\n\t\t\t// `updated` event for rows\n\t\t\tdt.on('draw.dtr', function () {\n\t\t\t\tthat._redrawChildren();\n\t\t\t});\n\n\t\t\t$(dt.table().node()).addClass('dtr-' + details.type);\n\t\t}\n\n\t\t// DT2 let's us tell it if we are hiding columns\n\t\tdt.on('column-calc.dt', function (e, d) {\n\t\t\tvar curr = that.s.current;\n\n\t\t\tfor (var i = 0; i < curr.length; i++) {\n\t\t\t\tvar idx = d.visible.indexOf(i);\n\n\t\t\t\tif (curr[i] === false && idx >= 0) {\n\t\t\t\t\td.visible.splice(idx, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// On Ajax reload we want to reopen any child rows which are displayed\n\t\t// by responsive\n\t\tdt.on('preXhr.dtr', function () {\n\t\t\tvar rowIds = [];\n\t\t\tdt.rows().every(function () {\n\t\t\t\tif (this.child.isShown()) {\n\t\t\t\t\trowIds.push(this.id(true));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tdt.one('draw.dtr', function () {\n\t\t\t\tthat._resizeAuto();\n\t\t\t\tthat._resize();\n\n\t\t\t\tdt.rows(rowIds).every(function () {\n\t\t\t\t\tthat._detailsDisplay(this, false);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\t// First pass when the table is ready\n\t\tdt\n\t\t\t.on('draw.dtr', function () {\n\t\t\t\t// For server-side tables, each draw needs the child node\n\t\t\t\t// cache to be cleared since it is no longer relevant. We can\n\t\t\t\t// create a new object for speed in this case - no mutation.\n\t\t\t\tif (dt.page.info().serverSide) {\n\t\t\t\t\tthat.s.childNodeStore = {};\n\t\t\t\t}\n\n\t\t\t\tthat._controlClass();\n\t\t\t})\n\t\t\t.ready(function () {\n\t\t\t\tthat._resizeAuto();\n\t\t\t\tthat._resize();\n\n\t\t\t\t// Change in column sizes means we need to calc\n\t\t\t\tdt.on('column-sizing.dtr', function () {\n\t\t\t\t\tthat._resizeAuto();\n\t\t\t\t\tthat._resize();\n\t\t\t\t});\n\t\t\t});\n\n\t\t// Attach listeners after first pass\n\t\tdt.on('column-reorder.dtr', function (e, settings, details) {\n\t\t\tthat._classLogic();\n\t\t\tthat._resizeAuto();\n\t\t\tthat._resize(true);\n\t\t});\n\t},\n\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t * Private methods\n\t */\n\n\t/**\n\t * Insert a `col` tag into the correct location in a `colgroup`.\n\t *\n\t * @param {jQuery} colGroup The `colgroup` tag\n\t * @param {jQuery} colEl The `col` tag\n\t */\n\t_colGroupAttach: function (colGroup, colEls, idx) {\n\t\tvar found = null;\n\n\t\t// No need to do anything if already attached\n\t\tif (colEls[idx].get(0).parentNode === colGroup[0]) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Find the first `col` after our own which is already attached\n\t\tfor (var i = idx+1; i < colEls.length; i++) {\n\t\t\tif (colGroup[0] === colEls[i].get(0).parentNode) {\n\t\t\t\tfound = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (found !== null) {\n\t\t\t// Insert before\n\t\t\tcolEls[idx].insertBefore(colEls[found][0]);\n\t\t}\n\t\telse {\n\t\t\t// If wasn't found, insert at the end\n\t\t\tcolGroup.append(colEls[idx]);\n\t\t}\n\t},\n\n\t/**\n\t * Get and store nodes from a cell - use for node moving renderers\n\t *\n\t * @param {*} dt DT instance\n\t * @param {*} row Row index\n\t * @param {*} col Column index\n\t */\n\t_childNodes: function (dt, row, col) {\n\t\tvar name = row + '-' + col;\n\n\t\tif (this.s.childNodeStore[name]) {\n\t\t\treturn this.s.childNodeStore[name];\n\t\t}\n\n\t\t// https://jsperf.com/childnodes-array-slice-vs-loop\n\t\tvar nodes = [];\n\t\tvar children = dt.cell(row, col).node().childNodes;\n\t\tfor (var i = 0, iLen = children.length; i < iLen; i++) {\n\t\t\tnodes.push(children[i]);\n\t\t}\n\n\t\tthis.s.childNodeStore[name] = nodes;\n\n\t\treturn nodes;\n\t},\n\n\t/**\n\t * Restore nodes from the cache to a table cell\n\t *\n\t * @param {*} dt DT instance\n\t * @param {*} row Row index\n\t * @param {*} col Column index\n\t */\n\t_childNodesRestore: function (dt, row, col) {\n\t\tvar name = row + '-' + col;\n\n\t\tif (!this.s.childNodeStore[name]) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar node = dt.cell(row, col).node();\n\t\tvar store = this.s.childNodeStore[name];\n\t\tif (store.length > 0) {\n\t\t\tvar parent = store[0].parentNode;\n\t\t\tvar parentChildren = parent.childNodes;\n\t\t\tvar a = [];\n\n\t\t\tfor (var i = 0, iLen = parentChildren.length; i < iLen; i++) {\n\t\t\t\ta.push(parentChildren[i]);\n\t\t\t}\n\n\t\t\tfor (var j = 0, jen = a.length; j < jen; j++) {\n\t\t\t\tnode.appendChild(a[j]);\n\t\t\t\tconsole.log('restore', name, node, a[j]);\n\t\t\t}\n\t\t}\n\n\t\tthis.s.childNodeStore[name] = undefined;\n\t},\n\n\t/**\n\t * Calculate the visibility for the columns in a table for a given\n\t * breakpoint. The result is pre-determined based on the class logic if\n\t * class names are used to control all columns, but the width of the table\n\t * is also used if there are columns which are to be automatically shown\n\t * and hidden.\n\t *\n\t * @param  {string} breakpoint Breakpoint name to use for the calculation\n\t * @return {array} Array of boolean values initiating the visibility of each\n\t *   column.\n\t *  @private\n\t */\n\t_columnsVisibility: function (breakpoint) {\n\t\tvar dt = this.s.dt;\n\t\tvar columns = this.s.columns;\n\t\tvar i, iLen;\n\n\t\t// Create an array that defines the column ordering based first on the\n\t\t// column's priority, and secondly the column index. This allows the\n\t\t// columns to be removed from the right if the priority matches\n\t\tvar order = columns\n\t\t\t.map(function (col, idx) {\n\t\t\t\treturn {\n\t\t\t\t\tcolumnIdx: idx,\n\t\t\t\t\tpriority: col.priority\n\t\t\t\t};\n\t\t\t})\n\t\t\t.sort(function (a, b) {\n\t\t\t\tif (a.priority !== b.priority) {\n\t\t\t\t\treturn a.priority - b.priority;\n\t\t\t\t}\n\t\t\t\treturn a.columnIdx - b.columnIdx;\n\t\t\t});\n\n\t\t// Class logic - determine which columns are in this breakpoint based\n\t\t// on the classes. If no class control (i.e. `auto`) then `-` is used\n\t\t// to indicate this to the rest of the function\n\t\tvar display = $.map(columns, function (col, i) {\n\t\t\tif (dt.column(i).visible() === false) {\n\t\t\t\treturn 'not-visible';\n\t\t\t}\n\t\t\treturn col.auto && col.minWidth === null\n\t\t\t\t? false\n\t\t\t\t: col.auto === true\n\t\t\t\t? '-'\n\t\t\t\t: $.inArray(breakpoint, col.includeIn) !== -1;\n\t\t});\n\n\t\t// Auto column control - first pass: how much width is taken by the\n\t\t// ones that must be included from the non-auto columns\n\t\tvar requiredWidth = 0;\n\t\tfor (i = 0, iLen = display.length; i < iLen; i++) {\n\t\t\tif (display[i] === true) {\n\t\t\t\trequiredWidth += columns[i].minWidth;\n\t\t\t}\n\t\t}\n\n\t\t// Second pass, use up any remaining width for other columns. For\n\t\t// scrolling tables we need to subtract the width of the scrollbar. It\n\t\t// may not be requires which makes this sub-optimal, but it would\n\t\t// require another full redraw to make complete use of those extra few\n\t\t// pixels\n\t\tvar scrolling = dt.settings()[0].oScroll;\n\t\tvar bar = scrolling.sY || scrolling.sX ? scrolling.iBarWidth : 0;\n\t\tvar widthAvailable = dt.table().container().offsetWidth - bar;\n\t\tvar usedWidth = widthAvailable - requiredWidth;\n\n\t\t// Control column needs to always be included. This makes it sub-\n\t\t// optimal in terms of using the available with, but to stop layout\n\t\t// thrashing or overflow. Also we need to account for the control column\n\t\t// width first so we know how much width is available for the other\n\t\t// columns, since the control column might not be the first one shown\n\t\tfor (i = 0, iLen = display.length; i < iLen; i++) {\n\t\t\tif (columns[i].control) {\n\t\t\t\tusedWidth -= columns[i].minWidth;\n\t\t\t}\n\t\t}\n\n\t\t// Allow columns to be shown (counting by priority and then right to\n\t\t// left) until we run out of room\n\t\tvar empty = false;\n\t\tfor (i = 0, iLen = order.length; i < iLen; i++) {\n\t\t\tvar colIdx = order[i].columnIdx;\n\n\t\t\tif (\n\t\t\t\tdisplay[colIdx] === '-' &&\n\t\t\t\t!columns[colIdx].control &&\n\t\t\t\tcolumns[colIdx].minWidth\n\t\t\t) {\n\t\t\t\t// Once we've found a column that won't fit we don't let any\n\t\t\t\t// others display either, or columns might disappear in the\n\t\t\t\t// middle of the table\n\t\t\t\tif (empty || usedWidth - columns[colIdx].minWidth < 0) {\n\t\t\t\t\tempty = true;\n\t\t\t\t\tdisplay[colIdx] = false;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdisplay[colIdx] = true;\n\t\t\t\t}\n\n\t\t\t\tusedWidth -= columns[colIdx].minWidth;\n\t\t\t}\n\t\t}\n\n\t\t// Determine if the 'control' column should be shown (if there is one).\n\t\t// This is the case when there is a hidden column (that is not the\n\t\t// control column). The two loops look inefficient here, but they are\n\t\t// trivial and will fly through. We need to know the outcome from the\n\t\t// first , before the action in the second can be taken\n\t\tvar showControl = false;\n\n\t\tfor (i = 0, iLen = columns.length; i < iLen; i++) {\n\t\t\tif (\n\t\t\t\t!columns[i].control &&\n\t\t\t\t!columns[i].never &&\n\t\t\t\tdisplay[i] === false\n\t\t\t) {\n\t\t\t\tshowControl = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, iLen = columns.length; i < iLen; i++) {\n\t\t\tif (columns[i].control) {\n\t\t\t\tdisplay[i] = showControl;\n\t\t\t}\n\n\t\t\t// Replace not visible string with false from the control column detection above\n\t\t\tif (display[i] === 'not-visible') {\n\t\t\t\tdisplay[i] = false;\n\t\t\t}\n\t\t}\n\n\t\t// Finally we need to make sure that there is at least one column that\n\t\t// is visible\n\t\tif ($.inArray(true, display) === -1) {\n\t\t\tdisplay[0] = true;\n\t\t}\n\n\t\treturn display;\n\t},\n\n\t/**\n\t * Create the internal `columns` array with information about the columns\n\t * for the table. This includes determining which breakpoints the column\n\t * will appear in, based upon class names in the column, which makes up the\n\t * vast majority of this method.\n\t *\n\t * @private\n\t */\n\t_classLogic: function () {\n\t\tvar that = this;\n\t\tvar breakpoints = this.c.breakpoints;\n\t\tvar dt = this.s.dt;\n\t\tvar columns = dt\n\t\t\t.columns()\n\t\t\t.eq(0)\n\t\t\t.map(function (i) {\n\t\t\t\tvar column = this.column(i);\n\t\t\t\tvar className = column.header().className;\n\t\t\t\tvar priority = column.init().responsivePriority;\n\t\t\t\tvar dataPriority = column\n\t\t\t\t\t.header()\n\t\t\t\t\t.getAttribute('data-priority');\n\n\t\t\t\tif (priority === undefined) {\n\t\t\t\t\tpriority =\n\t\t\t\t\t\tdataPriority === undefined || dataPriority === null\n\t\t\t\t\t\t\t? 10000\n\t\t\t\t\t\t\t: dataPriority * 1;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tclassName: className,\n\t\t\t\t\tincludeIn: [],\n\t\t\t\t\tauto: false,\n\t\t\t\t\tcontrol: false,\n\t\t\t\t\tnever: className.match(/\\b(dtr\\-)?never\\b/) ? true : false,\n\t\t\t\t\tpriority: priority\n\t\t\t\t};\n\t\t\t});\n\n\t\t// Simply add a breakpoint to `includeIn` array, ensuring that there are\n\t\t// no duplicates\n\t\tvar add = function (colIdx, name) {\n\t\t\tvar includeIn = columns[colIdx].includeIn;\n\n\t\t\tif ($.inArray(name, includeIn) === -1) {\n\t\t\t\tincludeIn.push(name);\n\t\t\t}\n\t\t};\n\n\t\tvar column = function (colIdx, name, operator, matched) {\n\t\t\tvar size, i, iLen;\n\n\t\t\tif (!operator) {\n\t\t\t\tcolumns[colIdx].includeIn.push(name);\n\t\t\t}\n\t\t\telse if (operator === 'max-') {\n\t\t\t\t// Add this breakpoint and all smaller\n\t\t\t\tsize = that._find(name).width;\n\n\t\t\t\tfor (i = 0, iLen = breakpoints.length; i < iLen; i++) {\n\t\t\t\t\tif (breakpoints[i].width <= size) {\n\t\t\t\t\t\tadd(colIdx, breakpoints[i].name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (operator === 'min-') {\n\t\t\t\t// Add this breakpoint and all larger\n\t\t\t\tsize = that._find(name).width;\n\n\t\t\t\tfor (i = 0, iLen = breakpoints.length; i < iLen; i++) {\n\t\t\t\t\tif (breakpoints[i].width >= size) {\n\t\t\t\t\t\tadd(colIdx, breakpoints[i].name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (operator === 'not-') {\n\t\t\t\t// Add all but this breakpoint\n\t\t\t\tfor (i = 0, iLen = breakpoints.length; i < iLen; i++) {\n\t\t\t\t\tif (breakpoints[i].name.indexOf(matched) === -1) {\n\t\t\t\t\t\tadd(colIdx, breakpoints[i].name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// Loop over each column and determine if it has a responsive control\n\t\t// class\n\t\tcolumns.each(function (col, i) {\n\t\t\tvar classNames = col.className.split(' ');\n\t\t\tvar hasClass = false;\n\n\t\t\t// Split the class name up so multiple rules can be applied if needed\n\t\t\tfor (var k = 0, ken = classNames.length; k < ken; k++) {\n\t\t\t\tvar className = classNames[k].trim();\n\n\t\t\t\tif (className === 'all' || className === 'dtr-all') {\n\t\t\t\t\t// Include in all\n\t\t\t\t\thasClass = true;\n\t\t\t\t\tcol.includeIn = $.map(breakpoints, function (a) {\n\t\t\t\t\t\treturn a.name;\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\telse if (\n\t\t\t\t\tclassName === 'none' ||\n\t\t\t\t\tclassName === 'dtr-none' ||\n\t\t\t\t\tcol.never\n\t\t\t\t) {\n\t\t\t\t\t// Include in none (default) and no auto\n\t\t\t\t\thasClass = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\telse if (\n\t\t\t\t\tclassName === 'control' ||\n\t\t\t\t\tclassName === 'dtr-control'\n\t\t\t\t) {\n\t\t\t\t\t// Special column that is only visible, when one of the other\n\t\t\t\t\t// columns is hidden. This is used for the details control\n\t\t\t\t\thasClass = true;\n\t\t\t\t\tcol.control = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t$.each(breakpoints, function (j, breakpoint) {\n\t\t\t\t\t// Does this column have a class that matches this breakpoint?\n\t\t\t\t\tvar brokenPoint = breakpoint.name.split('-');\n\t\t\t\t\tvar re = new RegExp(\n\t\t\t\t\t\t'(min\\\\-|max\\\\-|not\\\\-)?(' +\n\t\t\t\t\t\t\tbrokenPoint[0] +\n\t\t\t\t\t\t\t')(\\\\-[_a-zA-Z0-9])?'\n\t\t\t\t\t);\n\t\t\t\t\tvar match = className.match(re);\n\n\t\t\t\t\tif (match) {\n\t\t\t\t\t\thasClass = true;\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tmatch[2] === brokenPoint[0] &&\n\t\t\t\t\t\t\tmatch[3] === '-' + brokenPoint[1]\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t// Class name matches breakpoint name fully\n\t\t\t\t\t\t\tcolumn(\n\t\t\t\t\t\t\t\ti,\n\t\t\t\t\t\t\t\tbreakpoint.name,\n\t\t\t\t\t\t\t\tmatch[1],\n\t\t\t\t\t\t\t\tmatch[2] + match[3]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (match[2] === brokenPoint[0] && !match[3]) {\n\t\t\t\t\t\t\t// Class name matched primary breakpoint name with no qualifier\n\t\t\t\t\t\t\tcolumn(i, breakpoint.name, match[1], match[2]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// If there was no control class, then automatic sizing is used\n\t\t\tif (!hasClass) {\n\t\t\t\tcol.auto = true;\n\t\t\t}\n\t\t});\n\n\t\tthis.s.columns = columns;\n\t},\n\n\t/**\n\t * Update the cells to show the correct control class / button\n\t * @private\n\t */\n\t_controlClass: function () {\n\t\tif (this.c.details.type === 'inline') {\n\t\t\tvar dt = this.s.dt;\n\t\t\tvar columnsVis = this.s.current;\n\t\t\tvar firstVisible = $.inArray(true, columnsVis);\n\n\t\t\t// Remove from any cells which shouldn't have it\n\t\t\tdt.cells(\n\t\t\t\tnull,\n\t\t\t\tfunction (idx) {\n\t\t\t\t\treturn idx !== firstVisible;\n\t\t\t\t},\n\t\t\t\t{ page: 'current' }\n\t\t\t)\n\t\t\t\t.nodes()\n\t\t\t\t.to$()\n\t\t\t\t.filter('.dtr-control')\n\t\t\t\t.removeClass('dtr-control');\n\n\t\t\tif (firstVisible >= 0) {\n\t\t\t\tdt.cells(null, firstVisible, { page: 'current' })\n\t\t\t\t\t.nodes()\n\t\t\t\t\t.to$()\n\t\t\t\t\t.addClass('dtr-control');\n\t\t\t}\n\t\t}\n\n\t\tthis._tabIndexes();\n\t},\n\n\t/**\n\t * Show the details for the child row\n\t *\n\t * @param  {DataTables.Api} row    API instance for the row\n\t * @param  {boolean}        update Update flag\n\t * @private\n\t */\n\t_detailsDisplay: function (row, update) {\n\t\tvar that = this;\n\t\tvar dt = this.s.dt;\n\t\tvar details = this.c.details;\n\t\tvar event = function (res) {\n\t\t\t$(row.node()).toggleClass('dtr-expanded', res !== false);\n\t\t\t$(dt.table().node()).triggerHandler('responsive-display.dt', [\n\t\t\t\tdt,\n\t\t\t\trow,\n\t\t\t\tres,\n\t\t\t\tupdate\n\t\t\t]);\n\t\t};\n\n\t\tif (details && details.type !== false) {\n\t\t\tvar renderer =\n\t\t\t\ttypeof details.renderer === 'string'\n\t\t\t\t\t? Responsive.renderer[details.renderer]()\n\t\t\t\t\t: details.renderer;\n\n\t\t\tvar res = details.display(\n\t\t\t\trow,\n\t\t\t\tupdate,\n\t\t\t\tfunction () {\n\t\t\t\t\treturn renderer.call(\n\t\t\t\t\t\tthat,\n\t\t\t\t\t\tdt,\n\t\t\t\t\t\trow[0][0],\n\t\t\t\t\t\tthat._detailsObj(row[0])\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tfunction () {\n\t\t\t\t\tevent(false);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tif (typeof res === 'boolean') {\n\t\t\t\tevent(res);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Initialisation for the details handler\n\t *\n\t * @private\n\t */\n\t_detailsInit: function () {\n\t\tvar that = this;\n\t\tvar dt = this.s.dt;\n\t\tvar details = this.c.details;\n\n\t\t// The inline type always uses the first child as the target\n\t\tif (details.type === 'inline') {\n\t\t\tdetails.target = 'td.dtr-control, th.dtr-control';\n\t\t}\n\n\t\t$(dt.table().body()).on('keyup.dtr', 'td, th', function (e) {\n\t\t\tif (e.keyCode === 13 && $(this).data('dtr-keyboard')) {\n\t\t\t\t$(this).click();\n\t\t\t}\n\t\t});\n\n\t\t// type.target can be a string jQuery selector or a column index\n\t\tvar target = details.target;\n\t\tvar selector = typeof target === 'string' ? target : 'td, th';\n\n\t\tif (target !== undefined || target !== null) {\n\t\t\t// Click handler to show / hide the details rows when they are available\n\t\t\t$(dt.table().body()).on(\n\t\t\t\t'click.dtr mousedown.dtr mouseup.dtr',\n\t\t\t\tselector,\n\t\t\t\tfunction (e) {\n\t\t\t\t\t// If the table is not collapsed (i.e. there is no hidden columns)\n\t\t\t\t\t// then take no action\n\t\t\t\t\tif (!$(dt.table().node()).hasClass('collapsed')) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Check that the row is actually a DataTable's controlled node\n\t\t\t\t\tif (\n\t\t\t\t\t\t$.inArray(\n\t\t\t\t\t\t\t$(this).closest('tr').get(0),\n\t\t\t\t\t\t\tdt.rows().nodes().toArray()\n\t\t\t\t\t\t) === -1\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// For column index, we determine if we should act or not in the\n\t\t\t\t\t// handler - otherwise it is already okay\n\t\t\t\t\tif (typeof target === 'number') {\n\t\t\t\t\t\tvar targetIdx =\n\t\t\t\t\t\t\ttarget < 0\n\t\t\t\t\t\t\t\t? dt.columns().eq(0).length + target\n\t\t\t\t\t\t\t\t: target;\n\n\t\t\t\t\t\tif (dt.cell(this).index().column !== targetIdx) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// $().closest() includes itself in its check\n\t\t\t\t\tvar row = dt.row($(this).closest('tr'));\n\n\t\t\t\t\t// Check event type to do an action\n\t\t\t\t\tif (e.type === 'click') {\n\t\t\t\t\t\t// The renderer is given as a function so the caller can execute it\n\t\t\t\t\t\t// only when they need (i.e. if hiding there is no point is running\n\t\t\t\t\t\t// the renderer)\n\t\t\t\t\t\tthat._detailsDisplay(row, false);\n\t\t\t\t\t}\n\t\t\t\t\telse if (e.type === 'mousedown') {\n\t\t\t\t\t\t// For mouse users, prevent the focus ring from showing\n\t\t\t\t\t\t$(this).css('outline', 'none');\n\t\t\t\t\t}\n\t\t\t\t\telse if (e.type === 'mouseup') {\n\t\t\t\t\t\t// And then re-allow at the end of the click\n\t\t\t\t\t\t$(this).trigger('blur').css('outline', '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t},\n\n\t/**\n\t * Get the details to pass to a renderer for a row\n\t * @param  {int} rowIdx Row index\n\t * @private\n\t */\n\t_detailsObj: function (rowIdx) {\n\t\tvar that = this;\n\t\tvar dt = this.s.dt;\n\t\tvar columnApis = [];\n\t\tlet settings = dt.settings()[0];\n\n\t\treturn $.map(this.s.columns, function (col, i) {\n\t\t\t// Never and control columns should not be passed to the renderer\n\t\t\tif (col.never || col.control) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar dtCol = settings.aoColumns[i];\n\n\t\t\tif (!columnApis[i]) {\n\t\t\t\tcolumnApis[i] = dt.column(i);\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tclassName: dtCol.sClass,\n\t\t\t\tcolumnIndex: i,\n\t\t\t\tdata: settings.fastData(rowIdx, i, that.c.orthogonal),\n\t\t\t\thidden: columnApis[i].visible() && !that.s.current[i],\n\t\t\t\trowIndex: rowIdx,\n\t\t\t\ttitle: columnApis[i].title()\n\t\t\t};\n\t\t});\n\t},\n\n\t/**\n\t * Find a breakpoint object from a name\n\t *\n\t * @param  {string} name Breakpoint name to find\n\t * @return {object}      Breakpoint description object\n\t * @private\n\t */\n\t_find: function (name) {\n\t\tvar breakpoints = this.c.breakpoints;\n\n\t\tfor (var i = 0, iLen = breakpoints.length; i < iLen; i++) {\n\t\t\tif (breakpoints[i].name === name) {\n\t\t\t\treturn breakpoints[i];\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Re-create the contents of the child rows as the display has changed in\n\t * some way.\n\t *\n\t * @private\n\t */\n\t_redrawChildren: function () {\n\t\tvar that = this;\n\t\tvar dt = this.s.dt;\n\n\t\tdt.rows({ page: 'current' }).iterator('row', function (settings, idx) {\n\t\t\tthat._detailsDisplay(dt.row(idx), true);\n\t\t});\n\t},\n\n\t/**\n\t * Alter the table display for a resized viewport. This involves first\n\t * determining what breakpoint the window currently is in, getting the\n\t * column visibilities to apply and then setting them.\n\t *\n\t * @param  {boolean} forceRedraw Force a redraw\n\t * @private\n\t */\n\t_resize: function (forceRedraw) {\n\t\tvar that = this;\n\t\tvar dt = this.s.dt;\n\t\tvar width = $(window).innerWidth();\n\t\tvar breakpoints = this.c.breakpoints;\n\t\tvar breakpoint = breakpoints[0].name;\n\t\tvar columns = this.s.columns;\n\t\tvar i, iLen;\n\t\tvar oldVis = this.s.current.slice();\n\n\t\t// Determine what breakpoint we are currently at\n\t\tfor (i = breakpoints.length - 1; i >= 0; i--) {\n\t\t\tif (width <= breakpoints[i].width) {\n\t\t\t\tbreakpoint = breakpoints[i].name;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// Show the columns for that break point\n\t\tvar columnsVis = this._columnsVisibility(breakpoint);\n\t\tthis.s.current = columnsVis;\n\n\t\t// Set the class before the column visibility is changed so event\n\t\t// listeners know what the state is. Need to determine if there are\n\t\t// any columns that are not visible but can be shown\n\t\tvar collapsedClass = false;\n\n\t\tfor (i = 0, iLen = columns.length; i < iLen; i++) {\n\t\t\tif (\n\t\t\t\tcolumnsVis[i] === false &&\n\t\t\t\t!columns[i].never &&\n\t\t\t\t!columns[i].control &&\n\t\t\t\t!dt.column(i).visible() === false\n\t\t\t) {\n\t\t\t\tcollapsedClass = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t$(dt.table().node()).toggleClass('collapsed', collapsedClass);\n\n\t\tvar changed = false;\n\t\tvar visible = 0;\n\t\tvar dtSettings = dt.settings()[0];\n\t\tvar colGroup = $(dt.table().node()).children('colgroup');\n\t\tvar colEls = dtSettings.aoColumns.map(function (col) {\n\t\t\treturn col.colEl;\n\t\t});\n\n\t\tdt.columns()\n\t\t\t.eq(0)\n\t\t\t.each(function (colIdx, i) {\n\t\t\t\t// Do nothing on DataTables' hidden column - DT removes it from the table\n\t\t\t\t// so we need to slide back\n\t\t\t\tif (! dt.column(colIdx).visible()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (columnsVis[i] === true) {\n\t\t\t\t\tvisible++;\n\t\t\t\t}\n\n\t\t\t\tif (forceRedraw || columnsVis[i] !== oldVis[i]) {\n\t\t\t\t\tchanged = true;\n\t\t\t\t\tthat._setColumnVis(colIdx, columnsVis[i]);\n\t\t\t\t}\n\n\t\t\t\t// DataTables 2 uses `col` to define the width for a column\n\t\t\t\t// and this needs to run each time, as DataTables will change\n\t\t\t\t// the column width. We may need to reattach if we've removed\n\t\t\t\t// an element previously.\n\t\t\t\tif (! columnsVis[i]) {\n\t\t\t\t\tcolEls[i].detach();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthat._colGroupAttach(colGroup, colEls, i);\n\t\t\t\t}\n\t\t\t});\n\n\t\tif (changed) {\n\t\t\tdt.columns.adjust();\n\n\t\t\tthis._redrawChildren();\n\n\t\t\t// Inform listeners of the change\n\t\t\t$(dt.table().node()).trigger('responsive-resize.dt', [\n\t\t\t\tdt,\n\t\t\t\tthis._responsiveOnlyHidden()\n\t\t\t]);\n\n\t\t\t// If no records, update the \"No records\" display element\n\t\t\tif (dt.page.info().recordsDisplay === 0) {\n\t\t\t\t$('td', dt.table().body()).eq(0).attr('colspan', visible);\n\t\t\t}\n\t\t}\n\n\t\tthat._controlClass();\n\t},\n\n\t/**\n\t * Determine the width of each column in the table so the auto column hiding\n\t * has that information to work with. This method is never going to be 100%\n\t * perfect since column widths can change slightly per page, but without\n\t * seriously compromising performance this is quite effective.\n\t *\n\t * @private\n\t */\n\t_resizeAuto: function () {\n\t\tvar dt = this.s.dt;\n\t\tvar columns = this.s.columns;\n\t\tvar that = this;\n\t\tvar visibleColumns = dt\n\t\t\t.columns()\n\t\t\t.indexes()\n\t\t\t.filter(function (idx) {\n\t\t\t\treturn dt.column(idx).visible();\n\t\t\t});\n\n\t\t// Are we allowed to do auto sizing?\n\t\tif (!this.c.auto) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Are there any columns that actually need auto-sizing, or do they all\n\t\t// have classes defined\n\t\tif (\n\t\t\t$.inArray(\n\t\t\t\ttrue,\n\t\t\t\t$.map(columns, function (c) {\n\t\t\t\t\treturn c.auto;\n\t\t\t\t})\n\t\t\t) === -1\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Clone the table with the current data in it\n\t\tvar clonedTable = dt.table().node().cloneNode(false);\n\t\tvar clonedHeader = $(dt.table().header().cloneNode(false)).appendTo(\n\t\t\tclonedTable\n\t\t);\n\t\tvar clonedFooter = $(dt.table().footer().cloneNode(false)).appendTo(\n\t\t\tclonedTable\n\t\t);\n\t\tvar clonedBody = $(dt.table().body())\n\t\t\t.clone(false, false)\n\t\t\t.empty()\n\t\t\t.appendTo(clonedTable); // use jQuery because of IE8\n\n\t\tclonedTable.style.width = 'auto';\n\n\t\t// Header\n\t\tdt.table()\n\t\t\t.header.structure(visibleColumns)\n\t\t\t.forEach((row) => {\n\t\t\t\tvar cells = row\n\t\t\t\t\t.filter(function (el) {\n\t\t\t\t\t\treturn el ? true : false;\n\t\t\t\t\t})\n\t\t\t\t\t.map(function (el) {\n\t\t\t\t\t\treturn $(el.cell)\n\t\t\t\t\t\t\t.clone(false)\n\t\t\t\t\t\t\t.css('display', 'table-cell')\n\t\t\t\t\t\t\t.css('width', 'auto')\n\t\t\t\t\t\t\t.css('min-width', 0);\n\t\t\t\t\t});\n\n\t\t\t\t$('<tr/>').append(cells).appendTo(clonedHeader);\n\t\t\t});\n\n\t\t// Always need an empty row that we can read widths from\n\t\tvar emptyRow = $('<tr/>').appendTo(clonedBody);\n\n\t\tfor (var i = 0; i < visibleColumns.count(); i++) {\n\t\t\temptyRow.append('<td/>');\n\t\t}\n\n\t\t// Body rows\n\t\tif (this.c.details.renderer._responsiveMovesNodes) {\n\t\t\t// Slow but it allows for moving elements around the document\n\t\t\tdt.rows({ page: 'current' }).every(function (rowIdx) {\n\t\t\t\tvar node = this.node();\n\n\t\t\t\tif (! node) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// We clone the table's rows and cells to create the sizing table\n\t\t\t\tvar tr = node.cloneNode(false);\n\n\t\t\t\tdt.cells(rowIdx, visibleColumns).every(function (rowIdx2, colIdx) {\n\t\t\t\t\t// If nodes have been moved out (listHiddenNodes), we need to\n\t\t\t\t\t// clone from the store\n\t\t\t\t\tvar store = that.s.childNodeStore[rowIdx + '-' + colIdx];\n\n\t\t\t\t\tif (store) {\n\t\t\t\t\t\t$(this.node().cloneNode(false))\n\t\t\t\t\t\t\t.append($(store).clone())\n\t\t\t\t\t\t\t.appendTo(tr);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t$(this.node()).clone(false).appendTo(tr);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tclonedBody.append(tr);\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\t// This is much faster, but it doesn't account for moving nodes around\n\t\t\t$(clonedBody)\n\t\t\t\t.append( $(dt.rows( { page: 'current' } ).nodes()).clone( false ) )\n\t\t\t\t.find( 'th, td' ).css( 'display', '' );\n\t\t}\n\n\t\t// Any cells which were hidden by Responsive in the host table, need to\n\t\t// be visible here for the calculations\n\t\tclonedBody.find('th, td').css('display', '');\n\n\t\t// Footer\n\t\tdt.table()\n\t\t\t.footer.structure(visibleColumns)\n\t\t\t.forEach((row) => {\n\t\t\t\tvar cells = row\n\t\t\t\t\t.filter(function (el) {\n\t\t\t\t\t\treturn el ? true : false;\n\t\t\t\t\t})\n\t\t\t\t\t.map(function (el) {\n\t\t\t\t\t\treturn $(el.cell)\n\t\t\t\t\t\t\t.clone(false)\n\t\t\t\t\t\t\t.css('display', 'table-cell')\n\t\t\t\t\t\t\t.css('width', 'auto')\n\t\t\t\t\t\t\t.css('min-width', 0);\n\t\t\t\t\t});\n\n\t\t\t\t$('<tr/>').append(cells).appendTo(clonedFooter);\n\t\t\t});\n\n\t\t// In the inline case extra padding is applied to the first column to\n\t\t// give space for the show / hide icon. We need to use this in the\n\t\t// calculation\n\t\tif (this.c.details.type === 'inline') {\n\t\t\t$(clonedTable).addClass('dtr-inline collapsed');\n\t\t}\n\n\t\t// It is unsafe to insert elements with the same name into the DOM\n\t\t// multiple times. For example, cloning and inserting a checked radio\n\t\t// clears the checked state of the original radio.\n\t\t$(clonedTable).find('[name]').removeAttr('name');\n\n\t\t// A position absolute table would take the table out of the flow of\n\t\t// our container element, bypassing the height and width (Scroller)\n\t\t$(clonedTable).css('position', 'relative');\n\n\t\tvar inserted = $('<div/>')\n\t\t\t.css({\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1,\n\t\t\t\toverflow: 'hidden',\n\t\t\t\tclear: 'both'\n\t\t\t})\n\t\t\t.append(clonedTable);\n\n\t\tinserted.insertBefore(dt.table().node());\n\n\t\t// The cloned table now contains the smallest that each column can be\n\t\temptyRow.children().each(function (i) {\n\t\t\tvar idx = dt.column.index('fromVisible', i);\n\t\t\tcolumns[idx].minWidth = this.offsetWidth || 0;\n\t\t});\n\n\t\tinserted.remove();\n\t},\n\n\t/**\n\t * Get the state of the current hidden columns - controlled by Responsive only\n\t */\n\t_responsiveOnlyHidden: function () {\n\t\tvar dt = this.s.dt;\n\n\t\treturn $.map(this.s.current, function (v, i) {\n\t\t\t// If the column is hidden by DataTables then it can't be hidden by\n\t\t\t// Responsive!\n\t\t\tif (dt.column(i).visible() === false) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn v;\n\t\t});\n\t},\n\n\t/**\n\t * Set a column's visibility.\n\t *\n\t * We don't use DataTables' column visibility controls in order to ensure\n\t * that column visibility can Responsive can no-exist. Since only IE8+ is\n\t * supported (and all evergreen browsers of course) the control of the\n\t * display attribute works well.\n\t *\n\t * @param {integer} col      Column index\n\t * @param {boolean} showHide Show or hide (true or false)\n\t * @private\n\t */\n\t_setColumnVis: function (col, showHide) {\n\t\tvar that = this;\n\t\tvar dt = this.s.dt;\n\t\tvar display = showHide ? '' : 'none'; // empty string will remove the attr\n\n\t\tthis._setHeaderVis(col, showHide, dt.table().header.structure());\n\t\tthis._setHeaderVis(col, showHide, dt.table().footer.structure());\n\n\t\tdt.column(col)\n\t\t\t.nodes()\n\t\t\t.to$()\n\t\t\t.css('display', display)\n\t\t\t.toggleClass('dtr-hidden', !showHide);\n\n\t\t// If the are child nodes stored, we might need to reinsert them\n\t\tif (!$.isEmptyObject(this.s.childNodeStore)) {\n\t\t\tdt.cells(null, col)\n\t\t\t\t.indexes()\n\t\t\t\t.each(function (idx) {\n\t\t\t\t\tthat._childNodesRestore(dt, idx.row, idx.column);\n\t\t\t\t});\n\t\t}\n\t},\n\n\t/**\n\t * Set a column's visibility, taking into account multiple rows\n\t * in a header / footer and colspan attributes\n\t * @param {*} col\n\t * @param {*} showHide\n\t * @param {*} structure\n\t */\n\t_setHeaderVis: function (col, showHide, structure) {\n\t\tvar that = this;\n\t\tvar display = showHide ? '' : 'none';\n\n\t\t// We use the `null`s in the structure array to indicate that a cell\n\t\t// should expand over that one if there is a colspan, but it might\n\t\t// also have been filled by a rowspan, so we need to expand the\n\t\t// rowspan cells down through the structure\n\t\tstructure.forEach(function (row, rowIdx) {\n\t\t\tfor (var col = 0; col < row.length; col++) {\n\t\t\t\tif (row[col] && row[col].rowspan > 1) {\n\t\t\t\t\tvar span = row[col].rowspan;\n\n\t\t\t\t\tfor (var i=1 ; i<span ; i++) {\n\t\t\t\t\t\tstructure[rowIdx + i][col] = {};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tstructure.forEach(function (row) {\n\t\t\tif (row[col] && row[col].cell) {\n\t\t\t\t$(row[col].cell)\n\t\t\t\t\t.css('display', display)\n\t\t\t\t\t.toggleClass('dtr-hidden', !showHide);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// In a colspan - need to rewind calc the new span since\n\t\t\t\t// display:none elements do not count as being spanned over\n\t\t\t\tvar search = col;\n\n\t\t\t\twhile (search >= 0) {\n\t\t\t\t\tif (row[search] && row[search].cell) {\n\t\t\t\t\t\trow[search].cell.colSpan = that._colspan(row, search);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tsearch--;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * How many columns should this cell span\n\t *\n\t * @param {*} row Header structure row\n\t * @param {*} idx The column index of the cell to span\n\t */\n\t_colspan: function (row, idx) {\n\t\tvar colspan = 1;\n\n\t\tfor (var col = idx + 1; col < row.length; col++) {\n\t\t\tif (row[col] === null && this.s.current[col]) {\n\t\t\t\t// colspan and not hidden by Responsive\n\t\t\t\tcolspan++;\n\t\t\t}\n\t\t\telse if (row[col]) {\n\t\t\t\t// Got the next cell, jump out\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn colspan;\n\t},\n\n\t/**\n\t * Update the cell tab indexes for keyboard accessibility. This is called on\n\t * every table draw - that is potentially inefficient, but also the least\n\t * complex option given that column visibility can change on the fly. Its a\n\t * shame user-focus was removed from CSS 3 UI, as it would have solved this\n\t * issue with a single CSS statement.\n\t *\n\t * @private\n\t */\n\t_tabIndexes: function () {\n\t\tvar dt = this.s.dt;\n\t\tvar cells = dt.cells({ page: 'current' }).nodes().to$();\n\t\tvar ctx = dt.settings()[0];\n\t\tvar target = this.c.details.target;\n\n\t\tcells.filter('[data-dtr-keyboard]').removeData('[data-dtr-keyboard]');\n\n\t\tif (typeof target === 'number') {\n\t\t\tdt.cells(null, target, { page: 'current' })\n\t\t\t\t.nodes()\n\t\t\t\t.to$()\n\t\t\t\t.attr('tabIndex', ctx.iTabIndex)\n\t\t\t\t.data('dtr-keyboard', 1);\n\t\t}\n\t\telse {\n\t\t\t// This is a bit of a hack - we need to limit the selected nodes to just\n\t\t\t// those of this table\n\t\t\tif (target === 'td:first-child, th:first-child') {\n\t\t\t\ttarget = '>td:first-child, >th:first-child';\n\t\t\t}\n\n\t\t\tvar rows = dt.rows({ page: 'current' }).nodes();\n\t\t\tvar nodes = target === 'tr'\n\t\t\t\t? $(rows)\n\t\t\t\t: $(target, rows);\n\n\t\t\tnodes\n\t\t\t\t.attr('tabIndex', ctx.iTabIndex)\n\t\t\t\t.data('dtr-keyboard', 1);\n\t\t}\n\t}\n});\n\n/**\n * List of default breakpoints. Each item in the array is an object with two\n * properties:\n *\n * * `name` - the breakpoint name.\n * * `width` - the breakpoint width\n *\n * @name Responsive.breakpoints\n * @static\n */\nResponsive.breakpoints = [\n\t{ name: 'desktop', width: Infinity },\n\t{ name: 'tablet-l', width: 1024 },\n\t{ name: 'tablet-p', width: 768 },\n\t{ name: 'mobile-l', width: 480 },\n\t{ name: 'mobile-p', width: 320 }\n];\n\n/**\n * Display methods - functions which define how the hidden data should be shown\n * in the table.\n *\n * @namespace\n * @name Responsive.defaults\n * @static\n */\nResponsive.display = {\n\tchildRow: function (row, update, render) {\n\t\tvar rowNode = $(row.node());\n\n\t\tif (update) {\n\t\t\tif (rowNode.hasClass('dtr-expanded')) {\n\t\t\t\trow.child(render(), 'child').show();\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (!rowNode.hasClass('dtr-expanded')) {\n\t\t\t\tvar rendered = render();\n\n\t\t\t\tif (rendered === false) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\trow.child(rendered, 'child').show();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\telse {\n\t\t\t\trow.child(false);\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\tchildRowImmediate: function (row, update, render) {\n\t\tvar rowNode = $(row.node());\n\n\t\tif (\n\t\t\t(!update && rowNode.hasClass('dtr-expanded')) ||\n\t\t\t!row.responsive.hasHidden()\n\t\t) {\n\t\t\t// User interaction and the row is show, or nothing to show\n\t\t\trow.child(false);\n\n\t\t\treturn false;\n\t\t}\n\t\telse {\n\t\t\t// Display\n\t\t\tvar rendered = render();\n\n\t\t\tif (rendered === false) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\trow.child(rendered, 'child').show();\n\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t// This is a wrapper so the modal options for Bootstrap and jQuery UI can\n\t// have options passed into them. This specific one doesn't need to be a\n\t// function but it is for consistency in the `modal` name\n\tmodal: function (options) {\n\t\treturn function (row, update, render, closeCallback) {\n\t\t\tvar modal;\n\t\t\tvar rendered = render();\n\n\t\t\tif (rendered === false) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!update) {\n\t\t\t\t// Show a modal\n\t\t\t\tvar close = function () {\n\t\t\t\t\tmodal.remove(); // will tidy events for us\n\t\t\t\t\t$(document).off('keypress.dtr');\n\t\t\t\t\t$(row.node()).removeClass('dtr-expanded');\n\n\t\t\t\t\tcloseCallback();\n\t\t\t\t};\n\n\t\t\t\tmodal = $('<div class=\"dtr-modal\"/>')\n\t\t\t\t\t.append(\n\t\t\t\t\t\t$('<div class=\"dtr-modal-display\"/>')\n\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t$('<div class=\"dtr-modal-content\"/>')\n\t\t\t\t\t\t\t\t\t.data('dtr-row-idx', row.index())\n\t\t\t\t\t\t\t\t\t.append(rendered)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t$(\n\t\t\t\t\t\t\t\t\t'<div class=\"dtr-modal-close\">&times;</div>'\n\t\t\t\t\t\t\t\t).click(function () {\n\t\t\t\t\t\t\t\t\tclose();\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t\t.append(\n\t\t\t\t\t\t$('<div class=\"dtr-modal-background\"/>').click(\n\t\t\t\t\t\t\tfunction () {\n\t\t\t\t\t\t\t\tclose();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t\t.appendTo('body');\n\n\t\t\t\t$(row.node()).addClass('dtr-expanded');\n\n\t\t\t\t$(document).on('keyup.dtr', function (e) {\n\t\t\t\t\tif (e.keyCode === 27) {\n\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\tclose();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmodal = $('div.dtr-modal-content');\n\n\t\t\t\tif (modal.length && row.index() === modal.data('dtr-row-idx')) {\n\t\t\t\t\tmodal.empty().append(rendered);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Modal not shown, nothing to update\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (options && options.header) {\n\t\t\t\t$('div.dtr-modal-content').prepend(\n\t\t\t\t\t'<h2>' + options.header(row) + '</h2>'\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t};\n\t}\n};\n\n/**\n * Display methods - functions which define how the hidden data should be shown\n * in the table.\n *\n * @namespace\n * @name Responsive.defaults\n * @static\n */\nResponsive.renderer = {\n\tlistHiddenNodes: function () {\n\t\tvar fn = function (api, rowIdx, columns) {\n\t\t\tvar that = this;\n\t\t\tvar ul = $(\n\t\t\t\t'<ul data-dtr-index=\"' + rowIdx + '\" class=\"dtr-details\"/>'\n\t\t\t);\n\t\t\tvar found = false;\n\n\t\t\t$.each(columns, function (i, col) {\n\t\t\t\tif (col.hidden) {\n\t\t\t\t\tvar klass = col.className\n\t\t\t\t\t\t? 'class=\"' + col.className + '\"'\n\t\t\t\t\t\t: '';\n\n\t\t\t\t\t$(\n\t\t\t\t\t\t'<li ' +\n\t\t\t\t\t\t\tklass +\n\t\t\t\t\t\t\t' data-dtr-index=\"' +\n\t\t\t\t\t\t\tcol.columnIndex +\n\t\t\t\t\t\t\t'\" data-dt-row=\"' +\n\t\t\t\t\t\t\tcol.rowIndex +\n\t\t\t\t\t\t\t'\" data-dt-column=\"' +\n\t\t\t\t\t\t\tcol.columnIndex +\n\t\t\t\t\t\t\t'\">' +\n\t\t\t\t\t\t\t'<span class=\"dtr-title\">' +\n\t\t\t\t\t\t\tcol.title +\n\t\t\t\t\t\t\t'</span> ' +\n\t\t\t\t\t\t\t'</li>'\n\t\t\t\t\t)\n\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t$('<span class=\"dtr-data\"/>').append(\n\t\t\t\t\t\t\t\tthat._childNodes(\n\t\t\t\t\t\t\t\t\tapi,\n\t\t\t\t\t\t\t\t\tcol.rowIndex,\n\t\t\t\t\t\t\t\t\tcol.columnIndex\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) // api.cell( col.rowIndex, col.columnIndex ).node().childNodes ) )\n\t\t\t\t\t\t.appendTo(ul);\n\n\t\t\t\t\tfound = true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn found ? ul : false;\n\t\t};\n\n\t\tfn._responsiveMovesNodes = true;\n\n\t\treturn fn;\n\t},\n\n\tlistHidden: function () {\n\t\treturn function (api, rowIdx, columns) {\n\t\t\tvar data = $.map(columns, function (col) {\n\t\t\t\tvar klass = col.className\n\t\t\t\t\t? 'class=\"' + col.className + '\"'\n\t\t\t\t\t: '';\n\n\t\t\t\treturn col.hidden\n\t\t\t\t\t? '<li ' +\n\t\t\t\t\t\t\tklass +\n\t\t\t\t\t\t\t' data-dtr-index=\"' +\n\t\t\t\t\t\t\tcol.columnIndex +\n\t\t\t\t\t\t\t'\" data-dt-row=\"' +\n\t\t\t\t\t\t\tcol.rowIndex +\n\t\t\t\t\t\t\t'\" data-dt-column=\"' +\n\t\t\t\t\t\t\tcol.columnIndex +\n\t\t\t\t\t\t\t'\">' +\n\t\t\t\t\t\t\t'<span class=\"dtr-title\">' +\n\t\t\t\t\t\t\tcol.title +\n\t\t\t\t\t\t\t'</span> ' +\n\t\t\t\t\t\t\t'<span class=\"dtr-data\">' +\n\t\t\t\t\t\t\tcol.data +\n\t\t\t\t\t\t\t'</span>' +\n\t\t\t\t\t\t\t'</li>'\n\t\t\t\t\t: '';\n\t\t\t}).join('');\n\n\t\t\treturn data\n\t\t\t\t? $(\n\t\t\t\t\t\t'<ul data-dtr-index=\"' +\n\t\t\t\t\t\t\trowIdx +\n\t\t\t\t\t\t\t'\" class=\"dtr-details\"/>'\n\t\t\t\t).append(data)\n\t\t\t\t: false;\n\t\t};\n\t},\n\n\ttableAll: function (options) {\n\t\toptions = $.extend(\n\t\t\t{\n\t\t\t\ttableClass: ''\n\t\t\t},\n\t\t\toptions\n\t\t);\n\n\t\treturn function (api, rowIdx, columns) {\n\t\t\tvar data = $.map(columns, function (col) {\n\t\t\t\tvar klass = col.className\n\t\t\t\t\t? 'class=\"' + col.className + '\"'\n\t\t\t\t\t: '';\n\n\t\t\t\treturn (\n\t\t\t\t\t'<tr ' +\n\t\t\t\t\tklass +\n\t\t\t\t\t' data-dt-row=\"' +\n\t\t\t\t\tcol.rowIndex +\n\t\t\t\t\t'\" data-dt-column=\"' +\n\t\t\t\t\tcol.columnIndex +\n\t\t\t\t\t'\">' +\n\t\t\t\t\t'<td>' +\n\t\t\t\t\t( '' !== col.title\n\t\t\t\t\t\t? col.title + ':'\n\t\t\t\t\t\t: ''\n\t\t\t\t\t) +\n\t\t\t\t\t'</td> ' +\n\t\t\t\t\t'<td>' +\n\t\t\t\t\tcol.data +\n\t\t\t\t\t'</td>' +\n\t\t\t\t\t'</tr>'\n\t\t\t\t);\n\t\t\t}).join('');\n\n\t\t\treturn $(\n\t\t\t\t'<table class=\"' +\n\t\t\t\t\toptions.tableClass +\n\t\t\t\t\t' dtr-details\" width=\"100%\"/>'\n\t\t\t).append(data);\n\t\t};\n\t}\n};\n\n/**\n * Responsive default settings for initialisation\n *\n * @namespace\n * @name Responsive.defaults\n * @static\n */\nResponsive.defaults = {\n\t/**\n\t * List of breakpoints for the instance. Note that this means that each\n\t * instance can have its own breakpoints. Additionally, the breakpoints\n\t * cannot be changed once an instance has been creased.\n\t *\n\t * @type {Array}\n\t * @default Takes the value of `Responsive.breakpoints`\n\t */\n\tbreakpoints: Responsive.breakpoints,\n\n\t/**\n\t * Enable / disable auto hiding calculations. It can help to increase\n\t * performance slightly if you disable this option, but all columns would\n\t * need to have breakpoint classes assigned to them\n\t *\n\t * @type {Boolean}\n\t * @default  `true`\n\t */\n\tauto: true,\n\n\t/**\n\t * Details control. If given as a string value, the `type` property of the\n\t * default object is set to that value, and the defaults used for the rest\n\t * of the object - this is for ease of implementation.\n\t *\n\t * The object consists of the following properties:\n\t *\n\t * * `display` - A function that is used to show and hide the hidden details\n\t * * `renderer` - function that is called for display of the child row data.\n\t *   The default function will show the data from the hidden columns\n\t * * `target` - Used as the selector for what objects to attach the child\n\t *   open / close to\n\t * * `type` - `false` to disable the details display, `inline` or `column`\n\t *   for the two control types\n\t *\n\t * @type {Object|string}\n\t */\n\tdetails: {\n\t\tdisplay: Responsive.display.childRow,\n\n\t\trenderer: Responsive.renderer.listHidden(),\n\n\t\ttarget: 0,\n\n\t\ttype: 'inline'\n\t},\n\n\t/**\n\t * Orthogonal data request option. This is used to define the data type\n\t * requested when Responsive gets the data to show in the child row.\n\t *\n\t * @type {String}\n\t */\n\torthogonal: 'display'\n};\n\n/*\n * API\n */\nvar Api = $.fn.dataTable.Api;\n\n// Doesn't do anything - workaround for a bug in DT... Not documented\nApi.register('responsive()', function () {\n\treturn this;\n});\n\nApi.register('responsive.index()', function (li) {\n\tli = $(li);\n\n\treturn {\n\t\tcolumn: li.data('dtr-index'),\n\t\trow: li.parent().data('dtr-index')\n\t};\n});\n\nApi.register('responsive.rebuild()', function () {\n\treturn this.iterator('table', function (ctx) {\n\t\tif (ctx._responsive) {\n\t\t\tctx._responsive._classLogic();\n\t\t}\n\t});\n});\n\nApi.register('responsive.recalc()', function () {\n\treturn this.iterator('table', function (ctx) {\n\t\tif (ctx._responsive) {\n\t\t\tctx._responsive._resizeAuto();\n\t\t\tctx._responsive._resize();\n\t\t}\n\t});\n});\n\nApi.register('responsive.hasHidden()', function () {\n\tvar ctx = this.context[0];\n\n\treturn ctx._responsive\n\t\t? $.inArray(false, ctx._responsive._responsiveOnlyHidden()) !== -1\n\t\t: false;\n});\n\nApi.registerPlural(\n\t'columns().responsiveHidden()',\n\t'column().responsiveHidden()',\n\tfunction () {\n\t\treturn this.iterator(\n\t\t\t'column',\n\t\t\tfunction (settings, column) {\n\t\t\t\treturn settings._responsive\n\t\t\t\t\t? settings._responsive._responsiveOnlyHidden()[column]\n\t\t\t\t\t: false;\n\t\t\t},\n\t\t\t1\n\t\t);\n\t}\n);\n\n/**\n * Version information\n *\n * @name Responsive.version\n * @static\n */\nResponsive.version = '3.0.6';\n\n$.fn.dataTable.Responsive = Responsive;\n$.fn.DataTable.Responsive = Responsive;\n\n// Attach a listener to the document which listens for DataTables initialisation\n// events so we can automatically initialise\n$(document).on('preInit.dt.dtr', function (e, settings, json) {\n\tif (e.namespace !== 'dt') {\n\t\treturn;\n\t}\n\n\tif (\n\t\t$(settings.nTable).hasClass('responsive') ||\n\t\t$(settings.nTable).hasClass('dt-responsive') ||\n\t\tsettings.oInit.responsive ||\n\t\tDataTable.defaults.responsive\n\t) {\n\t\tvar init = settings.oInit.responsive;\n\n\t\tif (init !== false) {\n\t\t\tnew Responsive(settings, $.isPlainObject(init) ? init : {});\n\t\t}\n\t}\n});\n\n\nexport default DataTable;\n","/*! Bootstrap 5 integration for DataTables' Responsive\n * Â© SpryMedia Ltd - datatables.net/license\n */\n\nimport jQuery from 'jquery';\nimport DataTable from 'datatables.net-bs5';\nimport Responsive from 'datatables.net-responsive';\n\n// Allow reassignment of the $ variable\nlet $ = jQuery;\n\n\nvar _display = DataTable.Responsive.display;\nvar _original = _display.modal;\nvar _modal = $(\n\t'<div class=\"modal fade dtr-bs-modal\" role=\"dialog\">' +\n\t\t'<div class=\"modal-dialog\" role=\"document\">' +\n\t\t'<div class=\"modal-content\">' +\n\t\t'<div class=\"modal-header\">' +\n\t\t'<button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>' +\n\t\t'</div>' +\n\t\t'<div class=\"modal-body\"/>' +\n\t\t'</div>' +\n\t\t'</div>' +\n\t\t'</div>'\n);\nvar modal;\n\n// Note this could be undefined at the time of initialisation - the\n// DataTable.Responsive.bootstrap function can be used to set a different\n// bootstrap object\nvar _bs = window.bootstrap;\n\nDataTable.Responsive.bootstrap = function (bs) {\n\t_bs = bs;\n};\n\n// Get the Bootstrap library from locally set (legacy) or from DT.\nfunction getBs() {\n\tlet dtBs = DataTable.use('bootstrap');\n\n\tif (dtBs) {\n\t\treturn dtBs;\n\t}\n\n\tif (_bs) {\n\t\treturn _bs;\n\t}\n\n\tthrow new Error('No Bootstrap library. Set it with `DataTable.use(bootstrap);`');\n}\n\n_display.modal = function (options) {\n\tif (!modal && _bs.Modal) {\n\t\tlet localBs = getBs();\n\t\tmodal = new localBs.Modal(_modal[0]);\n\t}\n\n\treturn function (row, update, render, closeCallback) {\n\t\tif (! modal) {\n\t\t\treturn _original(row, update, render, closeCallback);\n\t\t}\n\t\telse {\n\t\t\tvar rendered = render();\n\n\t\t\tif (rendered === false) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!update) {\n\t\t\t\tif (options && options.header) {\n\t\t\t\t\tvar header = _modal.find('div.modal-header');\n\t\t\t\t\tvar button = header.find('button').detach();\n\n\t\t\t\t\theader\n\t\t\t\t\t\t.empty()\n\t\t\t\t\t\t.append('<h4 class=\"modal-title\">' + options.header(row) + '</h4>')\n\t\t\t\t\t\t.append(button);\n\t\t\t\t}\n\n\t\t\t\t_modal.find('div.modal-body').empty().append(rendered);\n\n\t\t\t\t_modal\n\t\t\t\t\t.data('dtr-row-idx', row.index())\n\t\t\t\t\t.one('hidden.bs.modal', closeCallback)\n\t\t\t\t\t.appendTo('body');\n\n\t\t\t\tmodal.show();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif ($.contains(document, _modal[0]) && row.index() === _modal.data('dtr-row-idx')) {\n\t\t\t\t\t_modal.find('div.modal-body').empty().append(rendered);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Modal not shown for this row - do nothing\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\t};\n};\n\n\nexport default DataTable;\n","/*! Buttons for DataTables 3.2.5\n * Â© SpryMedia Ltd - datatables.net/license\n */\n\nimport jQuery from 'jquery';\nimport DataTable from 'datatables.net';\n\n// Allow reassignment of the $ variable\nlet $ = jQuery;\n\n\n// Used for namespacing events added to the document by each instance, so they\n// can be removed on destroy\nvar _instCounter = 0;\n\n// Button namespacing counter for namespacing events on individual buttons\nvar _buttonCounter = 0;\n\nvar _dtButtons = DataTable.ext.buttons;\n\n// Custom entity decoder for data export\nvar _entityDecoder = null;\n\n// Allow for jQuery slim\nfunction _fadeIn(el, duration, fn) {\n\tif ($.fn.animate) {\n\t\tel.stop().fadeIn(duration, fn);\n\t}\n\telse {\n\t\tel.css('display', 'block');\n\n\t\tif (fn) {\n\t\t\tfn.call(el);\n\t\t}\n\t}\n}\n\nfunction _fadeOut(el, duration, fn) {\n\tif ($.fn.animate) {\n\t\tel.stop().fadeOut(duration, fn);\n\t}\n\telse {\n\t\tel.css('display', 'none');\n\n\t\tif (fn) {\n\t\t\tfn.call(el);\n\t\t}\n\t}\n}\n\n/**\n * [Buttons description]\n * @param {[type]}\n * @param {[type]}\n */\nvar Buttons = function (dt, config) {\n\tif (!DataTable.versionCheck('2')) {\n\t\tthrow 'Warning: Buttons requires DataTables 2 or newer';\n\t}\n\n\t// If not created with a `new` keyword then we return a wrapper function that\n\t// will take the settings object for a DT. This allows easy use of new instances\n\t// with the `layout` option - e.g. `topLeft: $.fn.dataTable.Buttons( ... )`.\n\tif (!(this instanceof Buttons)) {\n\t\treturn function (settings) {\n\t\t\treturn new Buttons(settings, dt).container();\n\t\t};\n\t}\n\n\t// If there is no config set it to an empty object\n\tif (typeof config === 'undefined') {\n\t\tconfig = {};\n\t}\n\n\t// Allow a boolean true for defaults\n\tif (config === true) {\n\t\tconfig = {};\n\t}\n\n\t// For easy configuration of buttons an array can be given\n\tif (Array.isArray(config)) {\n\t\tconfig = { buttons: config };\n\t}\n\n\tthis.c = $.extend(true, {}, Buttons.defaults, config);\n\n\t// Don't want a deep copy for the buttons\n\tif (config.buttons) {\n\t\tthis.c.buttons = config.buttons;\n\t}\n\n\tthis.s = {\n\t\tdt: new DataTable.Api(dt),\n\t\tbuttons: [],\n\t\tlistenKeys: '',\n\t\tnamespace: 'dtb' + _instCounter++\n\t};\n\n\tthis.dom = {\n\t\tcontainer: $('<' + this.c.dom.container.tag + '/>').addClass(\n\t\t\tthis.c.dom.container.className\n\t\t)\n\t};\n\n\tthis._constructor();\n};\n\n$.extend(Buttons.prototype, {\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t * Public methods\n\t */\n\n\t/**\n\t * Get the action of a button\n\t * @param  {int|string} Button index\n\t * @return {function}\n\t */ /**\n\t * Set the action of a button\n\t * @param  {node} node Button element\n\t * @param  {function} action Function to set\n\t * @return {Buttons} Self for chaining\n\t */\n\taction: function (node, action) {\n\t\tvar button = this._nodeToButton(node);\n\n\t\tif (action === undefined) {\n\t\t\treturn button.conf.action;\n\t\t}\n\n\t\tbutton.conf.action = action;\n\n\t\treturn this;\n\t},\n\n\t/**\n\t * Add an active class to the button to make to look active or get current\n\t * active state.\n\t * @param  {node} node Button element\n\t * @param  {boolean} [flag] Enable / disable flag\n\t * @return {Buttons} Self for chaining or boolean for getter\n\t */\n\tactive: function (node, flag) {\n\t\tvar button = this._nodeToButton(node);\n\t\tvar klass = this.c.dom.button.active;\n\t\tvar jqNode = $(button.node);\n\n\t\tif (\n\t\t\tbutton.inCollection &&\n\t\t\tthis.c.dom.collection.button &&\n\t\t\tthis.c.dom.collection.button.active !== undefined\n\t\t) {\n\t\t\tklass = this.c.dom.collection.button.active;\n\t\t}\n\n\t\tif (flag === undefined) {\n\t\t\treturn jqNode.hasClass(klass);\n\t\t}\n\n\t\tjqNode.toggleClass(klass, flag === undefined ? true : flag);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t * Add a new button\n\t * @param {object} config Button configuration object, base string name or function\n\t * @param {int|string} [idx] Button index for where to insert the button\n\t * @param {boolean} [draw=true] Trigger a draw. Set a false when adding\n\t *   lots of buttons, until the last button.\n\t * @return {Buttons} Self for chaining\n\t */\n\tadd: function (config, idx, draw) {\n\t\tvar buttons = this.s.buttons;\n\n\t\tif (typeof idx === 'string') {\n\t\t\tvar split = idx.split('-');\n\t\t\tvar base = this.s;\n\n\t\t\tfor (var i = 0, ien = split.length - 1; i < ien; i++) {\n\t\t\t\tbase = base.buttons[split[i] * 1];\n\t\t\t}\n\n\t\t\tbuttons = base.buttons;\n\t\t\tidx = split[split.length - 1] * 1;\n\t\t}\n\n\t\tlet node = this._expandButton(\n\t\t\tbuttons,\n\t\t\tconfig,\n\t\t\tconfig !== undefined ? config.split : undefined,\n\t\t\t(config === undefined ||\n\t\t\t\tconfig.split === undefined ||\n\t\t\t\tconfig.split.length === 0) &&\n\t\t\t\tbase !== undefined,\n\t\t\tfalse,\n\t\t\tidx\n\t\t);\n\n\t\tif (draw === undefined || draw === true) {\n\t\t\tthis._draw();\n\t\t}\n\n\t\treturn node;\n\t},\n\n\t/**\n\t * Clear buttons from a collection and then insert new buttons\n\t */\n\tcollectionRebuild: function (node, newButtons) {\n\t\tvar button = this._nodeToButton(node);\n\n\t\tif (newButtons !== undefined) {\n\t\t\tvar i;\n\t\t\t// Need to reverse the array\n\t\t\tfor (i = button.buttons.length - 1; i >= 0; i--) {\n\t\t\t\tthis.remove(button.buttons[i].node);\n\t\t\t}\n\n\t\t\t// If the collection has prefix and / or postfix buttons we need to add them in\n\t\t\tif (button.conf.prefixButtons) {\n\t\t\t\tnewButtons.unshift.apply(newButtons, button.conf.prefixButtons);\n\t\t\t}\n\n\t\t\tif (button.conf.postfixButtons) {\n\t\t\t\tnewButtons.push.apply(newButtons, button.conf.postfixButtons);\n\t\t\t}\n\n\t\t\tfor (i = 0; i < newButtons.length; i++) {\n\t\t\t\tvar newBtn = newButtons[i];\n\n\t\t\t\tthis._expandButton(\n\t\t\t\t\tbutton.buttons,\n\t\t\t\t\tnewBtn,\n\t\t\t\t\tnewBtn !== undefined &&\n\t\t\t\t\t\tnewBtn.config !== undefined &&\n\t\t\t\t\t\tnewBtn.config.split !== undefined,\n\t\t\t\t\ttrue,\n\t\t\t\t\tnewBtn.parentConf !== undefined &&\n\t\t\t\t\t\tnewBtn.parentConf.split !== undefined,\n\t\t\t\t\tnull,\n\t\t\t\t\tnewBtn.parentConf\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis._draw(button.collection, button.buttons);\n\t},\n\n\t/**\n\t * Get the container node for the buttons\n\t * @return {jQuery} Buttons node\n\t */\n\tcontainer: function () {\n\t\treturn this.dom.container;\n\t},\n\n\t/**\n\t * Disable a button\n\t * @param  {node} node Button node\n\t * @return {Buttons} Self for chaining\n\t */\n\tdisable: function (node) {\n\t\tvar button = this._nodeToButton(node);\n\n\t\tif (button.isSplit) {\n\t\t\t$(button.node.childNodes[0])\n\t\t\t\t.addClass(this.c.dom.button.disabled)\n\t\t\t\t.prop('disabled', true);\n\t\t}\n\t\telse {\n\t\t\t$(button.node)\n\t\t\t\t.addClass(this.c.dom.button.disabled)\n\t\t\t\t.prop('disabled', true);\n\t\t}\n\n\t\tbutton.disabled = true;\n\n\t\tthis._checkSplitEnable();\n\n\t\treturn this;\n\t},\n\n\t/**\n\t * Destroy the instance, cleaning up event handlers and removing DOM\n\t * elements\n\t * @return {Buttons} Self for chaining\n\t */\n\tdestroy: function () {\n\t\t// Key event listener\n\t\t$('body').off('keyup.' + this.s.namespace);\n\n\t\t// Individual button destroy (so they can remove their own events if\n\t\t// needed). Take a copy as the array is modified by `remove`\n\t\tvar buttons = this.s.buttons.slice();\n\t\tvar i, ien;\n\n\t\tfor (i = 0, ien = buttons.length; i < ien; i++) {\n\t\t\tthis.remove(buttons[i].node);\n\t\t}\n\n\t\t// Container\n\t\tthis.dom.container.remove();\n\n\t\t// Remove from the settings object collection\n\t\tvar buttonInsts = this.s.dt.settings()[0];\n\n\t\tfor (i = 0, ien = buttonInsts.length; i < ien; i++) {\n\t\t\tif (buttonInsts.inst === this) {\n\t\t\t\tbuttonInsts.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/**\n\t * Enable / disable a button\n\t * @param  {node} node Button node\n\t * @param  {boolean} [flag=true] Enable / disable flag\n\t * @return {Buttons} Self for chaining\n\t */\n\tenable: function (node, flag) {\n\t\tif (flag === false) {\n\t\t\treturn this.disable(node);\n\t\t}\n\n\t\tvar button = this._nodeToButton(node);\n\n\t\tif (button.isSplit) {\n\t\t\t$(button.node.childNodes[0])\n\t\t\t\t.removeClass(this.c.dom.button.disabled)\n\t\t\t\t.prop('disabled', false);\n\t\t}\n\t\telse {\n\t\t\t$(button.node)\n\t\t\t\t.removeClass(this.c.dom.button.disabled)\n\t\t\t\t.prop('disabled', false);\n\t\t}\n\n\t\tbutton.disabled = false;\n\n\t\tthis._checkSplitEnable();\n\n\t\treturn this;\n\t},\n\n\t/**\n\t * Get a button's index\n\t *\n\t * This is internally recursive\n\t * @param {element} node Button to get the index of\n\t * @return {string} Button index\n\t */\n\tindex: function (node, nested, buttons) {\n\t\tif (!nested) {\n\t\t\tnested = '';\n\t\t\tbuttons = this.s.buttons;\n\t\t}\n\n\t\tfor (var i = 0, ien = buttons.length; i < ien; i++) {\n\t\t\tvar inner = buttons[i].buttons;\n\n\t\t\tif (buttons[i].node === node) {\n\t\t\t\treturn nested + i;\n\t\t\t}\n\n\t\t\tif (inner && inner.length) {\n\t\t\t\tvar match = this.index(node, i + '-', inner);\n\n\t\t\t\tif (match !== null) {\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\n\t/**\n\t * Get the instance name for the button set selector\n\t * @return {string} Instance name\n\t */\n\tname: function () {\n\t\treturn this.c.name;\n\t},\n\n\t/**\n\t * Get a button's node of the buttons container if no button is given\n\t * @param  {node} [node] Button node\n\t * @return {jQuery} Button element, or container\n\t */\n\tnode: function (node) {\n\t\tif (!node) {\n\t\t\treturn this.dom.container;\n\t\t}\n\n\t\tvar button = this._nodeToButton(node);\n\t\treturn $(button.node);\n\t},\n\n\t/**\n\t * Set / get a processing class on the selected button\n\t * @param {element} node Triggering button node\n\t * @param  {boolean} flag true to add, false to remove, undefined to get\n\t * @return {boolean|Buttons} Getter value or this if a setter.\n\t */\n\tprocessing: function (node, flag) {\n\t\tvar dt = this.s.dt;\n\t\tvar button = this._nodeToButton(node);\n\n\t\tif (flag === undefined) {\n\t\t\treturn $(button.node).hasClass('processing');\n\t\t}\n\n\t\t$(button.node).toggleClass('processing', flag);\n\n\t\t$(dt.table().node()).triggerHandler('buttons-processing.dt', [\n\t\t\tflag,\n\t\t\tdt.button(node),\n\t\t\tdt,\n\t\t\t$(node),\n\t\t\tbutton.conf\n\t\t]);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t * Remove a button.\n\t * @param  {node} node Button node\n\t * @return {Buttons} Self for chaining\n\t */\n\tremove: function (node) {\n\t\tvar button = this._nodeToButton(node);\n\t\tvar host = this._nodeToHost(node);\n\t\tvar dt = this.s.dt;\n\n\t\t// Remove any child buttons first\n\t\tif (button.buttons.length) {\n\t\t\tfor (var i = button.buttons.length - 1; i >= 0; i--) {\n\t\t\t\tthis.remove(button.buttons[i].node);\n\t\t\t}\n\t\t}\n\n\t\tbutton.conf.destroying = true;\n\n\t\t// Allow the button to remove event handlers, etc\n\t\tif (button.conf.destroy) {\n\t\t\tbutton.conf.destroy.call(dt.button(node), dt, $(node), button.conf);\n\t\t}\n\n\t\tthis._removeKey(button.conf);\n\n\t\t$(button.node).remove();\n\n\t\tif (button.inserter) {\n\t\t\t$(button.inserter).remove();\n\t\t}\n\n\t\tvar idx = $.inArray(button, host);\n\t\thost.splice(idx, 1);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t * Get the text for a button\n\t * @param  {int|string} node Button index\n\t * @return {string} Button text\n\t */ /**\n\t * Set the text for a button\n\t * @param  {int|string|function} node Button index\n\t * @param  {string} label Text\n\t * @return {Buttons} Self for chaining\n\t */\n\ttext: function (node, label) {\n\t\tvar button = this._nodeToButton(node);\n\t\tvar textNode = button.textNode;\n\t\tvar dt = this.s.dt;\n\t\tvar jqNode = $(button.node);\n\t\tvar text = function (opt) {\n\t\t\treturn typeof opt === 'function'\n\t\t\t\t? opt(dt, jqNode, button.conf)\n\t\t\t\t: opt;\n\t\t};\n\n\t\tif (label === undefined) {\n\t\t\treturn text(button.conf.text);\n\t\t}\n\n\t\tbutton.conf.text = label;\n\t\ttextNode.html(text(label));\n\n\t\treturn this;\n\t},\n\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t * Constructor\n\t */\n\n\t/**\n\t * Buttons constructor\n\t * @private\n\t */\n\t_constructor: function () {\n\t\tvar that = this;\n\t\tvar dt = this.s.dt;\n\t\tvar dtSettings = dt.settings()[0];\n\t\tvar buttons = this.c.buttons;\n\n\t\tif (!dtSettings._buttons) {\n\t\t\tdtSettings._buttons = [];\n\t\t}\n\n\t\tdtSettings._buttons.push({\n\t\t\tinst: this,\n\t\t\tname: this.c.name\n\t\t});\n\n\t\tfor (var i = 0, ien = buttons.length; i < ien; i++) {\n\t\t\tthis.add(buttons[i]);\n\t\t}\n\n\t\tdt.on('destroy', function (e, settings) {\n\t\t\tif (settings === dtSettings) {\n\t\t\t\tthat.destroy();\n\t\t\t}\n\t\t});\n\n\t\t// Global key event binding to listen for button keys\n\t\t$('body').on('keyup.' + this.s.namespace, function (e) {\n\t\t\tif (\n\t\t\t\t!document.activeElement ||\n\t\t\t\tdocument.activeElement === document.body\n\t\t\t) {\n\t\t\t\t// SUse a string of characters for fast lookup of if we need to\n\t\t\t\t// handle this\n\t\t\t\tvar character = String.fromCharCode(e.keyCode).toLowerCase();\n\n\t\t\t\tif (that.s.listenKeys.toLowerCase().indexOf(character) !== -1) {\n\t\t\t\t\tthat._keypress(character, e);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t * Private methods\n\t */\n\n\t/**\n\t * Add a new button to the key press listener\n\t * @param {object} conf Resolved button configuration object\n\t * @private\n\t */\n\t_addKey: function (conf) {\n\t\tif (conf.key) {\n\t\t\tthis.s.listenKeys += $.isPlainObject(conf.key)\n\t\t\t\t? conf.key.key\n\t\t\t\t: conf.key;\n\t\t}\n\t},\n\n\t/**\n\t * Insert the buttons into the container. Call without parameters!\n\t * @param  {node} [container] Recursive only - Insert point\n\t * @param  {array} [buttons] Recursive only - Buttons array\n\t * @private\n\t */\n\t_draw: function (container, buttons) {\n\t\tif (!container) {\n\t\t\tcontainer = this.dom.container;\n\t\t\tbuttons = this.s.buttons;\n\t\t}\n\n\t\tcontainer.children().detach();\n\n\t\tfor (var i = 0, ien = buttons.length; i < ien; i++) {\n\t\t\tcontainer.append(buttons[i].inserter);\n\t\t\tcontainer.append(' ');\n\n\t\t\tif (buttons[i].buttons && buttons[i].buttons.length) {\n\t\t\t\tthis._draw(buttons[i].collection, buttons[i].buttons);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Create buttons from an array of buttons\n\t * @param  {array} attachTo Buttons array to attach to\n\t * @param  {object} button Button definition\n\t * @param  {boolean} inCollection true if the button is in a collection\n\t * @private\n\t */\n\t_expandButton: function (\n\t\tattachTo,\n\t\tbutton,\n\t\tsplit,\n\t\tinCollection,\n\t\tinSplit,\n\t\tattachPoint,\n\t\tparentConf\n\t) {\n\t\tvar dt = this.s.dt;\n\t\tvar isSplit = false;\n\t\tvar domCollection = this.c.dom.collection;\n\t\tvar buttons = !Array.isArray(button) ? [button] : button;\n\t\tvar lastButton;\n\n\t\tif (button === undefined) {\n\t\t\tbuttons = !Array.isArray(split) ? [split] : split;\n\t\t}\n\n\t\tfor (var i = 0, ien = buttons.length; i < ien; i++) {\n\t\t\tvar conf = this._resolveExtends(buttons[i]);\n\n\t\t\tif (!conf) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tisSplit = conf.config && conf.config.split ? true : false;\n\n\t\t\t// If the configuration is an array, then expand the buttons at this\n\t\t\t// point\n\t\t\tif (Array.isArray(conf)) {\n\t\t\t\tthis._expandButton(\n\t\t\t\t\tattachTo,\n\t\t\t\t\tconf,\n\t\t\t\t\tbuilt !== undefined && built.conf !== undefined\n\t\t\t\t\t\t? built.conf.split\n\t\t\t\t\t\t: undefined,\n\t\t\t\t\tinCollection,\n\t\t\t\t\tparentConf !== undefined && parentConf.split !== undefined,\n\t\t\t\t\tattachPoint,\n\t\t\t\t\tparentConf\n\t\t\t\t);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar built = this._buildButton(\n\t\t\t\tconf,\n\t\t\t\tinCollection,\n\t\t\t\tconf.split !== undefined ||\n\t\t\t\t\t(conf.config !== undefined &&\n\t\t\t\t\t\tconf.config.split !== undefined),\n\t\t\t\tinSplit\n\t\t\t);\n\t\t\tif (!built) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (attachPoint !== undefined && attachPoint !== null) {\n\t\t\t\tattachTo.splice(attachPoint, 0, built);\n\t\t\t\tattachPoint++;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tattachTo.push(built);\n\t\t\t}\n\n\t\t\t// Any button type can have a drop icon set\n\t\t\tif (built.conf.dropIcon && ! built.conf.split) {\n\t\t\t\t$(built.node)\n\t\t\t\t\t.addClass(this.c.dom.button.dropClass)\n\t\t\t\t\t.append(this.c.dom.button.dropHtml);\n\t\t\t}\n\n\t\t\t// Create the dropdown for a collection\n\t\t\tif (built.conf.buttons) {\n\t\t\t\tbuilt.collection = $(\n\t\t\t\t\t'<' + domCollection.container.content.tag + '/>'\n\t\t\t\t);\n\t\t\t\tbuilt.conf._collection = built.collection;\n\n\t\t\t\tthis._expandButton(\n\t\t\t\t\tbuilt.buttons,\n\t\t\t\t\tbuilt.conf.buttons,\n\t\t\t\t\tbuilt.conf.split,\n\t\t\t\t\t!isSplit,\n\t\t\t\t\tisSplit,\n\t\t\t\t\tattachPoint,\n\t\t\t\t\tbuilt.conf\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// And the split collection\n\t\t\tif (built.conf.split) {\n\t\t\t\tbuilt.collection = $('<' + domCollection.container.tag + '/>');\n\t\t\t\tbuilt.conf._collection = built.collection;\n\n\t\t\t\tfor (var j = 0; j < built.conf.split.length; j++) {\n\t\t\t\t\tvar item = built.conf.split[j];\n\n\t\t\t\t\tif (typeof item === 'object') {\n\t\t\t\t\t\titem.parent = parentConf;\n\n\t\t\t\t\t\tif (item.collectionLayout === undefined) {\n\t\t\t\t\t\t\titem.collectionLayout = built.conf.collectionLayout;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (item.dropup === undefined) {\n\t\t\t\t\t\t\titem.dropup = built.conf.dropup;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (item.fade === undefined) {\n\t\t\t\t\t\t\titem.fade = built.conf.fade;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis._expandButton(\n\t\t\t\t\tbuilt.buttons,\n\t\t\t\t\tbuilt.conf.buttons,\n\t\t\t\t\tbuilt.conf.split,\n\t\t\t\t\t!isSplit,\n\t\t\t\t\tisSplit,\n\t\t\t\t\tattachPoint,\n\t\t\t\t\tbuilt.conf\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tbuilt.conf.parent = parentConf;\n\n\t\t\t// init call is made here, rather than buildButton as it needs to\n\t\t\t// be selectable, and for that it needs to be in the buttons array\n\t\t\tif (conf.init) {\n\t\t\t\tconf.init.call(dt.button(built.node), dt, $(built.node), conf);\n\t\t\t}\n\n\t\t\tlastButton = built.node;\n\t\t}\n\n\t\treturn lastButton;\n\t},\n\n\t/**\n\t * Create an individual button\n\t * @param  {object} config            Resolved button configuration\n\t * @param  {boolean} inCollection `true` if a collection button\n\t * @return {object} Completed button description object\n\t * @private\n\t */\n\t_buildButton: function (config, inCollection, isSplit, inSplit) {\n\t\tvar that = this;\n\t\tvar configDom = this.c.dom;\n\t\tvar textNode;\n\t\tvar dt = this.s.dt;\n\t\tvar setLinerTab = false;\n\t\tvar text = function (opt) {\n\t\t\treturn typeof opt === 'function' ? opt(dt, button, config) : opt;\n\t\t};\n\n\t\t// Create an object that describes the button which can be in `dom.button`, or\n\t\t// `dom.collection.button` or `dom.split.button` or `dom.collection.split.button`!\n\t\t// Each should extend from `dom.button`.\n\t\tvar dom = $.extend(true, {}, configDom.button);\n\n\t\tif (inCollection && isSplit && configDom.collection.split) {\n\t\t\t$.extend(true, dom, configDom.collection.split.action);\n\t\t}\n\t\telse if (inSplit || inCollection) {\n\t\t\t$.extend(true, dom, configDom.collection.button);\n\t\t}\n\t\telse if (isSplit) {\n\t\t\t$.extend(true, dom, configDom.split.button);\n\t\t}\n\n\t\t// Spacers don't do much other than insert an element into the DOM\n\t\tif (config.spacer) {\n\t\t\tvar spacer = $('<' + dom.spacer.tag + '/>')\n\t\t\t\t.addClass(\n\t\t\t\t\t'dt-button-spacer ' +\n\t\t\t\t\t\tconfig.style +\n\t\t\t\t\t\t' ' +\n\t\t\t\t\t\tdom.spacer.className\n\t\t\t\t)\n\t\t\t\t.html(text(config.text));\n\n\t\t\treturn {\n\t\t\t\tconf: config,\n\t\t\t\tnode: spacer,\n\t\t\t\tnodeChild: null,\n\t\t\t\tinserter: spacer,\n\t\t\t\tbuttons: [],\n\t\t\t\tinCollection: inCollection,\n\t\t\t\tisSplit: isSplit,\n\t\t\t\tcollection: null,\n\t\t\t\ttextNode: spacer\n\t\t\t};\n\t\t}\n\n\t\t// Make sure that the button is available based on whatever requirements\n\t\t// it has. For example, PDF button require pdfmake\n\t\tif (\n\t\t\tconfig.available &&\n\t\t\t!config.available(dt, config) &&\n\t\t\t!config.html\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar button;\n\n\t\tif (!config.html) {\n\t\t\tvar run = function (e, dt, button, config, done) {\n\t\t\t\tconfig.action.call(dt.button(button), e, dt, button, config, done);\n\n\t\t\t\t$(dt.table().node()).triggerHandler('buttons-action.dt', [\n\t\t\t\t\tdt.button(button),\n\t\t\t\t\tdt,\n\t\t\t\t\tbutton,\n\t\t\t\t\tconfig\n\t\t\t\t]);\n\t\t\t};\n\n\t\t\tvar action = function(e, dt, button, config) {\n\t\t\t\tif (config.async) {\n\t\t\t\t\tthat.processing(button[0], true);\n\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\trun(e, dt, button, config, function () {\n\t\t\t\t\t\t\tthat.processing(button[0], false);\n\t\t\t\t\t\t});\n\t\t\t\t\t}, config.async);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\trun(e, dt, button, config, function () {});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar tag = config.tag || dom.tag;\n\t\t\tvar clickBlurs =\n\t\t\t\tconfig.clickBlurs === undefined ? true : config.clickBlurs;\n\n\t\t\tbutton = $('<' + tag + '/>')\n\t\t\t\t.addClass(dom.className)\n\t\t\t\t.attr('aria-controls', this.s.dt.table().node().id)\n\t\t\t\t.on('click.dtb', function (e) {\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tif (!button.hasClass(dom.disabled) && config.action) {\n\t\t\t\t\t\taction(e, dt, button, config);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (clickBlurs) {\n\t\t\t\t\t\tbutton.trigger('blur');\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on('keypress.dtb', function (e) {\n\t\t\t\t\tif (e.keyCode === 13) {\n\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\tif (!button.hasClass(dom.disabled) && config.action) {\n\t\t\t\t\t\t\taction(e, dt, button, config);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t// Make `a` tags act like a link\n\t\t\tif (tag.toLowerCase() === 'a') {\n\t\t\t\tbutton.attr('href', '#');\n\t\t\t}\n\n\t\t\t// Button tags should have `type=button` so they don't have any default behaviour\n\t\t\tif (tag.toLowerCase() === 'button') {\n\t\t\t\tbutton.attr('type', 'button');\n\t\t\t}\n\n\t\t\tif (dom.liner.tag) {\n\t\t\t\tvar lc = dom.liner.tag.toLowerCase();\n\t\t\t\tvar liner = $('<' + lc + '/>')\n\t\t\t\t\t.html(text(config.text))\n\t\t\t\t\t.addClass(dom.liner.className);\n\n\t\t\t\tif (lc === 'a') {\n\t\t\t\t\tliner.attr('href', '#');\n\t\t\t\t}\n\n\t\t\t\tif (lc === 'a' || lc === 'button') {\n\t\t\t\t\tliner.attr('tabindex', this.s.dt.settings()[0].iTabIndex);\n\t\t\t\t\tsetLinerTab = true;\n\t\t\t\t}\n\n\t\t\t\tbutton.append(liner);\n\t\t\t\ttextNode = liner;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tbutton.html(text(config.text));\n\t\t\t\ttextNode = button;\n\t\t\t}\n\n\t\t\tif (! setLinerTab) {\n\t\t\t\tbutton.attr('tabindex', this.s.dt.settings()[0].iTabIndex)\n\t\t\t}\n\n\t\t\tif (config.enabled === false) {\n\t\t\t\tbutton.addClass(dom.disabled);\n\t\t\t}\n\n\t\t\tif (config.className) {\n\t\t\t\tbutton.addClass(config.className);\n\t\t\t}\n\n\t\t\tif (config.titleAttr) {\n\t\t\t\tbutton.attr('title', text(config.titleAttr));\n\t\t\t}\n\n\t\t\tif (config.attr) {\n\t\t\t\tbutton.attr(config.attr);\n\t\t\t}\n\n\t\t\tif (!config.namespace) {\n\t\t\t\tconfig.namespace = '.dt-button-' + _buttonCounter++;\n\t\t\t}\n\n\t\t\tif (config.config !== undefined && config.config.split) {\n\t\t\t\tconfig.split = config.config.split;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tbutton = $(config.html);\n\t\t}\n\n\t\tvar buttonContainer = this.c.dom.buttonContainer;\n\t\tvar inserter;\n\t\tif (buttonContainer && buttonContainer.tag) {\n\t\t\tinserter = $('<' + buttonContainer.tag + '/>')\n\t\t\t\t.addClass(buttonContainer.className)\n\t\t\t\t.append(button);\n\t\t}\n\t\telse {\n\t\t\tinserter = button;\n\t\t}\n\n\t\tthis._addKey(config);\n\n\t\t// Style integration callback for DOM manipulation\n\t\t// Note that this is _not_ documented. It is currently\n\t\t// for style integration only\n\t\tif (this.c.buttonCreated) {\n\t\t\tinserter = this.c.buttonCreated(config, inserter);\n\t\t}\n\n\t\tvar splitDiv;\n\n\t\tif (isSplit) {\n\t\t\tvar dropdownConf = inCollection\n\t\t\t\t? $.extend(true, this.c.dom.split, this.c.dom.collection.split)\n\t\t\t\t: this.c.dom.split;\n\t\t\tvar wrapperConf = dropdownConf.wrapper;\n\n\t\t\tsplitDiv = $('<' + wrapperConf.tag + '/>')\n\t\t\t\t.addClass(wrapperConf.className)\n\t\t\t\t.append(button);\n\n\t\t\tvar dropButtonConfig = $.extend(config, {\n\t\t\t\tautoClose: true,\n\t\t\t\talign: dropdownConf.dropdown.align,\n\t\t\t\tattr: {\n\t\t\t\t\t'aria-haspopup': 'dialog',\n\t\t\t\t\t'aria-expanded': false\n\t\t\t\t},\n\t\t\t\tclassName: dropdownConf.dropdown.className,\n\t\t\t\tcloseButton: false,\n\t\t\t\tsplitAlignClass: dropdownConf.dropdown.splitAlignClass,\n\t\t\t\ttext: dropdownConf.dropdown.text\n\t\t\t});\n\n\t\t\tthis._addKey(dropButtonConfig);\n\n\t\t\tvar splitAction = function (e, dt, button, config) {\n\t\t\t\t_dtButtons.split.action.call(\n\t\t\t\t\tdt.button(splitDiv),\n\t\t\t\t\te,\n\t\t\t\t\tdt,\n\t\t\t\t\tbutton,\n\t\t\t\t\tconfig\n\t\t\t\t);\n\n\t\t\t\t$(dt.table().node()).triggerHandler('buttons-action.dt', [\n\t\t\t\t\tdt.button(button),\n\t\t\t\t\tdt,\n\t\t\t\t\tbutton,\n\t\t\t\t\tconfig\n\t\t\t\t]);\n\t\t\t\tbutton.attr('aria-expanded', true);\n\t\t\t};\n\n\t\t\tvar dropButton = $(\n\t\t\t\t'<button class=\"' +\n\t\t\t\t\tdropdownConf.dropdown.className +\n\t\t\t\t\t' dt-button\"></button>'\n\t\t\t)\n\t\t\t\t.html(this.c.dom.button.dropHtml)\n\t\t\t\t.addClass(this.c.dom.button.dropClass)\n\t\t\t\t.on('click.dtb', function (e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\tif (!dropButton.hasClass(dom.disabled)) {\n\t\t\t\t\t\tsplitAction(e, dt, dropButton, dropButtonConfig);\n\t\t\t\t\t}\n\t\t\t\t\tif (clickBlurs) {\n\t\t\t\t\t\tdropButton.trigger('blur');\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on('keypress.dtb', function (e) {\n\t\t\t\t\tif (e.keyCode === 13) {\n\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\tif (!dropButton.hasClass(dom.disabled)) {\n\t\t\t\t\t\t\tsplitAction(e, dt, dropButton, dropButtonConfig);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\tif (config.split.length === 0) {\n\t\t\t\tdropButton.addClass('dtb-hide-drop');\n\t\t\t}\n\n\t\t\tsplitDiv.append(dropButton).attr(dropButtonConfig.attr);\n\t\t}\n\n\t\tvar node = isSplit ? splitDiv.get(0) : button.get(0);\n\n\t\treturn {\n\t\t\tconf: config,\n\t\t\tnode: node,\n\t\t\tnodeChild: node && node.children && node.children.length ? node.children[0] : null,\n\t\t\tinserter: isSplit ? splitDiv : inserter,\n\t\t\tbuttons: [],\n\t\t\tinCollection: inCollection,\n\t\t\tisSplit: isSplit,\n\t\t\tinSplit: inSplit,\n\t\t\tcollection: null,\n\t\t\ttextNode: textNode\n\t\t};\n\t},\n\n\t/**\n\t * Spin over buttons checking if splits should be enabled or not.\n\t * @param {*} buttons Array of buttons to check\n\t */\n\t_checkSplitEnable: function (buttons) {\n\t\tif (! buttons) {\n\t\t\tbuttons = this.s.buttons;\n\t\t}\n\n\t\tfor (var i=0 ; i<buttons.length ; i++) {\n\t\t\tvar button = buttons[i];\n\n\t\t\t// Check if the button is a split one and if so, determine\n\t\t\t// its state\n\t\t\tif (button.isSplit) {\n\t\t\t\tvar splitBtn = button.node.childNodes[1];\n\n\t\t\t\tif (this._checkAnyEnabled(button.buttons)) {\n\t\t\t\t\t// Enable the split\n\t\t\t\t\t$(splitBtn)\n\t\t\t\t\t\t.removeClass(this.c.dom.button.disabled)\n\t\t\t\t\t\t.prop('disabled', false);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t$(splitBtn)\n\t\t\t\t\t\t.addClass(this.c.dom.button.disabled)\n\t\t\t\t\t\t.prop('disabled', false);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (button.isCollection) {\n\t\t\t\t// Nest down into collections\n\t\t\t\tthis._checkSplitEnable(button.buttons);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Check an array of buttons and see if any are enabled in it\n\t * @param {*} buttons Button array\n\t * @returns true if a button is enabled, false otherwise\n\t */\n\t_checkAnyEnabled: function (buttons) {\n\t\tfor (var i=0 ; i<buttons.length ; i++) {\n\t\t\tif (! buttons[i].disabled) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t/**\n\t * Get the button object from a node (recursive)\n\t * @param  {node} node Button node\n\t * @param  {array} [buttons] Button array, uses base if not defined\n\t * @return {object} Button object\n\t * @private\n\t */\n\t_nodeToButton: function (node, buttons) {\n\t\tif (!buttons) {\n\t\t\tbuttons = this.s.buttons;\n\t\t}\n\n\t\tfor (var i = 0, ien = buttons.length; i < ien; i++) {\n\t\t\tif (buttons[i].node === node || buttons[i].nodeChild === node) {\n\t\t\t\treturn buttons[i];\n\t\t\t}\n\n\t\t\tif (buttons[i].buttons.length) {\n\t\t\t\tvar ret = this._nodeToButton(node, buttons[i].buttons);\n\n\t\t\t\tif (ret) {\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Get container array for a button from a button node (recursive)\n\t * @param  {node} node Button node\n\t * @param  {array} [buttons] Button array, uses base if not defined\n\t * @return {array} Button's host array\n\t * @private\n\t */\n\t_nodeToHost: function (node, buttons) {\n\t\tif (!buttons) {\n\t\t\tbuttons = this.s.buttons;\n\t\t}\n\n\t\tfor (var i = 0, ien = buttons.length; i < ien; i++) {\n\t\t\tif (buttons[i].node === node) {\n\t\t\t\treturn buttons;\n\t\t\t}\n\n\t\t\tif (buttons[i].buttons.length) {\n\t\t\t\tvar ret = this._nodeToHost(node, buttons[i].buttons);\n\n\t\t\t\tif (ret) {\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Handle a key press - determine if any button's key configured matches\n\t * what was typed and trigger the action if so.\n\t * @param  {string} character The character pressed\n\t * @param  {object} e Key event that triggered this call\n\t * @private\n\t */\n\t_keypress: function (character, e) {\n\t\t// Check if this button press already activated on another instance of Buttons\n\t\tif (e._buttonsHandled) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar run = function (conf, node) {\n\t\t\tif (!conf.key) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (conf.key === character) {\n\t\t\t\te._buttonsHandled = true;\n\t\t\t\t$(node).click();\n\t\t\t}\n\t\t\telse if ($.isPlainObject(conf.key)) {\n\t\t\t\tif (conf.key.key !== character) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (conf.key.shiftKey && !e.shiftKey) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (conf.key.altKey && !e.altKey) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (conf.key.ctrlKey && !e.ctrlKey) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (conf.key.metaKey && !e.metaKey) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Made it this far - it is good\n\t\t\t\te._buttonsHandled = true;\n\t\t\t\t$(node).click();\n\t\t\t}\n\t\t};\n\n\t\tvar recurse = function (a) {\n\t\t\tfor (var i = 0, ien = a.length; i < ien; i++) {\n\t\t\t\trun(a[i].conf, a[i].node);\n\n\t\t\t\tif (a[i].buttons.length) {\n\t\t\t\t\trecurse(a[i].buttons);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\trecurse(this.s.buttons);\n\t},\n\n\t/**\n\t * Remove a key from the key listener for this instance (to be used when a\n\t * button is removed)\n\t * @param  {object} conf Button configuration\n\t * @private\n\t */\n\t_removeKey: function (conf) {\n\t\tif (conf.key) {\n\t\t\tvar character = $.isPlainObject(conf.key) ? conf.key.key : conf.key;\n\n\t\t\t// Remove only one character, as multiple buttons could have the\n\t\t\t// same listening key\n\t\t\tvar a = this.s.listenKeys.split('');\n\t\t\tvar idx = $.inArray(character, a);\n\t\t\ta.splice(idx, 1);\n\t\t\tthis.s.listenKeys = a.join('');\n\t\t}\n\t},\n\n\t/**\n\t * Resolve a button configuration\n\t * @param  {string|function|object} conf Button config to resolve\n\t * @return {object} Button configuration\n\t * @private\n\t */\n\t_resolveExtends: function (conf) {\n\t\tvar that = this;\n\t\tvar dt = this.s.dt;\n\t\tvar i, ien;\n\t\tvar toConfObject = function (base) {\n\t\t\tvar loop = 0;\n\n\t\t\t// Loop until we have resolved to a button configuration, or an\n\t\t\t// array of button configurations (which will be iterated\n\t\t\t// separately)\n\t\t\twhile (!$.isPlainObject(base) && !Array.isArray(base)) {\n\t\t\t\tif (base === undefined) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (typeof base === 'function') {\n\t\t\t\t\tbase = base.call(that, dt, conf);\n\n\t\t\t\t\tif (!base) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (typeof base === 'string') {\n\t\t\t\t\tif (!_dtButtons[base]) {\n\t\t\t\t\t\treturn { html: base };\n\t\t\t\t\t}\n\n\t\t\t\t\tbase = _dtButtons[base];\n\t\t\t\t}\n\n\t\t\t\tloop++;\n\t\t\t\tif (loop > 30) {\n\t\t\t\t\t// Protect against misconfiguration killing the browser\n\t\t\t\t\tthrow 'Buttons: Too many iterations';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn Array.isArray(base) ? base : $.extend({}, base);\n\t\t};\n\n\t\tconf = toConfObject(conf);\n\n\t\twhile (conf && conf.extend) {\n\t\t\t// Use `toConfObject` in case the button definition being extended\n\t\t\t// is itself a string or a function\n\t\t\tif (!_dtButtons[conf.extend]) {\n\t\t\t\tthrow 'Cannot extend unknown button type: ' + conf.extend;\n\t\t\t}\n\n\t\t\tvar objArray = toConfObject(_dtButtons[conf.extend]);\n\t\t\tif (Array.isArray(objArray)) {\n\t\t\t\treturn objArray;\n\t\t\t}\n\t\t\telse if (!objArray) {\n\t\t\t\t// This is a little brutal as it might be possible to have a\n\t\t\t\t// valid button without the extend, but if there is no extend\n\t\t\t\t// then the host button would be acting in an undefined state\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Stash the current class name\n\t\t\tvar originalClassName = objArray.className;\n\n\t\t\tif (conf.config !== undefined && objArray.config !== undefined) {\n\t\t\t\tconf.config = $.extend({}, objArray.config, conf.config);\n\t\t\t}\n\n\t\t\tconf = $.extend({}, objArray, conf);\n\n\t\t\t// The extend will have overwritten the original class name if the\n\t\t\t// `conf` object also assigned a class, but we want to concatenate\n\t\t\t// them so they are list that is combined from all extended buttons\n\t\t\tif (originalClassName && conf.className !== originalClassName) {\n\t\t\t\tconf.className = originalClassName + ' ' + conf.className;\n\t\t\t}\n\n\t\t\t// Although we want the `conf` object to overwrite almost all of\n\t\t\t// the properties of the object being extended, the `extend`\n\t\t\t// property should come from the object being extended\n\t\t\tconf.extend = objArray.extend;\n\t\t}\n\n\t\t// Buttons to be added to a collection  -gives the ability to define\n\t\t// if buttons should be added to the start or end of a collection\n\t\tvar postfixButtons = conf.postfixButtons;\n\t\tif (postfixButtons) {\n\t\t\tif (!conf.buttons) {\n\t\t\t\tconf.buttons = [];\n\t\t\t}\n\n\t\t\tfor (i = 0, ien = postfixButtons.length; i < ien; i++) {\n\t\t\t\tconf.buttons.push(postfixButtons[i]);\n\t\t\t}\n\t\t}\n\n\t\tvar prefixButtons = conf.prefixButtons;\n\t\tif (prefixButtons) {\n\t\t\tif (!conf.buttons) {\n\t\t\t\tconf.buttons = [];\n\t\t\t}\n\n\t\t\tfor (i = 0, ien = prefixButtons.length; i < ien; i++) {\n\t\t\t\tconf.buttons.splice(i, 0, prefixButtons[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn conf;\n\t},\n\n\t/**\n\t * Display (and replace if there is an existing one) a popover attached to a button\n\t * @param {string|node} content Content to show\n\t * @param {DataTable.Api} hostButton DT API instance of the button\n\t * @param {object} inOpts Options (see object below for all options)\n\t */\n\t_popover: function (content, hostButton, inOpts) {\n\t\tvar dt = hostButton;\n\t\tvar c = this.c;\n\t\tvar closed = false;\n\t\tvar options = $.extend(\n\t\t\t{\n\t\t\t\talign: 'button-left', // button-right, dt-container, split-left, split-right\n\t\t\t\tautoClose: false,\n\t\t\t\tbackground: true,\n\t\t\t\tbackgroundClassName: 'dt-button-background',\n\t\t\t\tcloseButton: true,\n\t\t\t\tcontainerClassName: c.dom.collection.container.className,\n\t\t\t\tcontentClassName: c.dom.collection.container.content.className,\n\t\t\t\tcollectionLayout: '',\n\t\t\t\tcollectionTitle: '',\n\t\t\t\tdropup: false,\n\t\t\t\tfade: 400,\n\t\t\t\tpopoverTitle: '',\n\t\t\t\trightAlignClassName: 'dt-button-right',\n\t\t\t\ttag: c.dom.collection.container.tag\n\t\t\t},\n\t\t\tinOpts\n\t\t);\n\n\t\tvar containerSelector =\n\t\t\toptions.tag + '.' + options.containerClassName.replace(/ /g, '.');\n\t\tvar hostButtonNode = hostButton.node();\n\t\tvar hostNode = options.collectionLayout.includes('fixed') ? $('body') : hostButton.node();\n\n\t\tvar close = function () {\n\t\t\tclosed = true;\n\n\t\t\t_fadeOut($(containerSelector), options.fade, function () {\n\t\t\t\t$(this).detach();\n\t\t\t});\n\n\t\t\t$(\n\t\t\t\tdt\n\t\t\t\t\t.buttons('[aria-haspopup=\"dialog\"][aria-expanded=\"true\"]')\n\t\t\t\t\t.nodes()\n\t\t\t).attr('aria-expanded', 'false');\n\n\t\t\t$('div.dt-button-background').off('click.dtb-collection');\n\t\t\tButtons.background(\n\t\t\t\tfalse,\n\t\t\t\toptions.backgroundClassName,\n\t\t\t\toptions.fade,\n\t\t\t\thostNode\n\t\t\t);\n\n\t\t\t$(window).off('resize.resize.dtb-collection');\n\t\t\t$('body').off('.dtb-collection');\n\t\t\tdt.off('buttons-action.b-internal');\n\t\t\tdt.off('destroy');\n\n\t\t\t$('body').trigger('buttons-popover-hide.dt');\n\t\t};\n\n\t\tif (content === false) {\n\t\t\tclose();\n\t\t\treturn;\n\t\t}\n\n\t\tvar existingExpanded = $(\n\t\t\tdt.buttons('[aria-haspopup=\"dialog\"][aria-expanded=\"true\"]').nodes()\n\t\t);\n\t\tif (existingExpanded.length) {\n\t\t\t// Reuse the current position if the button that was triggered is inside an existing collection\n\t\t\tif (hostNode.closest(containerSelector).length) {\n\t\t\t\thostNode = existingExpanded.eq(0);\n\t\t\t}\n\n\t\t\tclose();\n\t\t}\n\n\t\t// Sort buttons if defined\n\t\tif (options.sort) {\n\t\t\tvar elements = $('button', content)\n\t\t\t\t.map(function (idx, el) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttext: $(el).text(),\n\t\t\t\t\t\tel: el\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t\t.toArray();\n\n\t\t\telements.sort(function (a, b) {\n\t\t\t\treturn a.text.localeCompare(b.text);\n\t\t\t});\n\n\t\t\t$(content).append(elements.map(function (v) {\n\t\t\t\treturn v.el;\n\t\t\t}));\n\t\t}\n\n\t\t// Try to be smart about the layout\n\t\tvar cnt = $('.dt-button', content).length;\n\t\tvar mod = '';\n\n\t\tif (cnt === 3) {\n\t\t\tmod = 'dtb-b3';\n\t\t}\n\t\telse if (cnt === 2) {\n\t\t\tmod = 'dtb-b2';\n\t\t}\n\t\telse if (cnt === 1) {\n\t\t\tmod = 'dtb-b1';\n\t\t}\n\n\t\tvar display = $('<' + options.tag + '/>')\n\t\t\t.addClass(options.containerClassName)\n\t\t\t.addClass(options.collectionLayout)\n\t\t\t.addClass(options.splitAlignClass)\n\t\t\t.addClass(mod)\n\t\t\t.css('display', 'none')\n\t\t\t.attr({\n\t\t\t\t'aria-modal': true,\n\t\t\t\trole: 'dialog'\n\t\t\t});\n\n\t\tcontent = $(content)\n\t\t\t.addClass(options.contentClassName)\n\t\t\t.attr('role', 'menu')\n\t\t\t.appendTo(display);\n\n\t\thostButtonNode.attr('aria-expanded', 'true');\n\n\t\tif (hostNode.parents('body')[0] !== document.body) {\n\t\t\thostNode = $(document.body).children('div, section, p').last();\n\t\t}\n\n\t\tif (options.popoverTitle) {\n\t\t\tdisplay.prepend(\n\t\t\t\t'<div class=\"dt-button-collection-title\">' +\n\t\t\t\t\toptions.popoverTitle +\n\t\t\t\t\t'</div>'\n\t\t\t);\n\t\t}\n\t\telse if (options.collectionTitle) {\n\t\t\tdisplay.prepend(\n\t\t\t\t'<div class=\"dt-button-collection-title\">' +\n\t\t\t\t\toptions.collectionTitle +\n\t\t\t\t\t'</div>'\n\t\t\t);\n\t\t}\n\n\t\tif (options.closeButton) {\n\t\t\tdisplay\n\t\t\t\t.prepend('<div class=\"dtb-popover-close\">&times;</div>')\n\t\t\t\t.addClass('dtb-collection-closeable');\n\t\t}\n\n\t\t_fadeIn(display.insertAfter(hostNode), options.fade);\n\n\t\tvar tableContainer = $(hostButton.table().container());\n\t\tvar position = display.css('position');\n\n\t\tif (options.span === 'container' || options.align === 'dt-container') {\n\t\t\thostNode = hostNode.parent();\n\t\t\tdisplay.css('width', tableContainer.width());\n\t\t}\n\n\t\t// Align the popover relative to the DataTables container\n\t\t// Useful for wide popovers such as SearchPanes\n\t\tif (position === 'absolute') {\n\t\t\t// Align relative to the host button\n\t\t\tvar offsetParent = $(hostNode[0].offsetParent);\n\t\t\tvar buttonPosition = hostNode.position();\n\t\t\tvar buttonOffset = hostNode.offset();\n\t\t\tvar tableSizes = offsetParent.offset();\n\t\t\tvar containerPosition = offsetParent.position();\n\t\t\tvar computed = window.getComputedStyle(offsetParent[0]);\n\n\t\t\ttableSizes.height = offsetParent.outerHeight();\n\t\t\ttableSizes.width =\n\t\t\t\toffsetParent.width() + parseFloat(computed.paddingLeft);\n\t\t\ttableSizes.right = tableSizes.left + tableSizes.width;\n\t\t\ttableSizes.bottom = tableSizes.top + tableSizes.height;\n\n\t\t\t// Set the initial position so we can read height / width\n\t\t\tvar top = buttonPosition.top + hostNode.outerHeight();\n\t\t\tvar left = buttonPosition.left;\n\n\t\t\tdisplay.css({\n\t\t\t\ttop: top,\n\t\t\t\tleft: left\n\t\t\t});\n\n\t\t\t// Get the popover position\n\t\t\tcomputed = window.getComputedStyle(display[0]);\n\t\t\tvar popoverSizes = display.offset();\n\n\t\t\tpopoverSizes.height = display.outerHeight();\n\t\t\tpopoverSizes.width = display.outerWidth();\n\t\t\tpopoverSizes.right = popoverSizes.left + popoverSizes.width;\n\t\t\tpopoverSizes.bottom = popoverSizes.top + popoverSizes.height;\n\t\t\tpopoverSizes.marginTop = parseFloat(computed.marginTop);\n\t\t\tpopoverSizes.marginBottom = parseFloat(computed.marginBottom);\n\n\t\t\t// First position per the class requirements - pop up and right align\n\t\t\tif (options.dropup) {\n\t\t\t\ttop =\n\t\t\t\t\tbuttonPosition.top -\n\t\t\t\t\tpopoverSizes.height -\n\t\t\t\t\tpopoverSizes.marginTop -\n\t\t\t\t\tpopoverSizes.marginBottom;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\toptions.align === 'button-right' ||\n\t\t\t\tdisplay.hasClass(options.rightAlignClassName)\n\t\t\t) {\n\t\t\t\tleft =\n\t\t\t\t\tbuttonPosition.left -\n\t\t\t\t\tpopoverSizes.width +\n\t\t\t\t\thostNode.outerWidth();\n\t\t\t}\n\n\t\t\t// Container alignment - make sure it doesn't overflow the table container\n\t\t\tif (\n\t\t\t\toptions.align === 'dt-container' ||\n\t\t\t\toptions.align === 'container'\n\t\t\t) {\n\t\t\t\tif (left < buttonPosition.left) {\n\t\t\t\t\tleft = -buttonPosition.left;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Window adjustment\n\t\t\tif (\n\t\t\t\tcontainerPosition.left + left + popoverSizes.width >\n\t\t\t\t$(window).width()\n\t\t\t) {\n\t\t\t\t// Overflowing the document to the right\n\t\t\t\tleft =\n\t\t\t\t\t$(window).width() -\n\t\t\t\t\tpopoverSizes.width -\n\t\t\t\t\tcontainerPosition.left;\n\t\t\t}\n\n\t\t\tif (buttonOffset.left + left < 0) {\n\t\t\t\t// Off to the left of the document\n\t\t\t\tleft = -buttonOffset.left;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tcontainerPosition.top + top + popoverSizes.height >\n\t\t\t\t$(window).height() + $(window).scrollTop()\n\t\t\t) {\n\t\t\t\t// Pop up if otherwise we'd need the user to scroll down\n\t\t\t\ttop =\n\t\t\t\t\tbuttonPosition.top -\n\t\t\t\t\tpopoverSizes.height -\n\t\t\t\t\tpopoverSizes.marginTop -\n\t\t\t\t\tpopoverSizes.marginBottom;\n\t\t\t}\n\n\t\t\tif (offsetParent.offset().top + top < $(window).scrollTop()) {\n\t\t\t\t// Correction for when the top is beyond the top of the page\n\t\t\t\ttop = buttonPosition.top + hostNode.outerHeight();\n\t\t\t}\n\n\t\t\t// Calculations all done - now set it\n\t\t\tdisplay.css({\n\t\t\t\ttop: top,\n\t\t\t\tleft: left\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\t// Fix position - centre on screen\n\t\t\tvar place = function () {\n\t\t\t\tvar half = $(window).height() / 2;\n\n\t\t\t\tvar top = display.height() / 2;\n\t\t\t\tif (top > half) {\n\t\t\t\t\ttop = half;\n\t\t\t\t}\n\n\t\t\t\tdisplay.css('marginTop', top * -1);\n\t\t\t};\n\n\t\t\tplace();\n\n\t\t\t$(window).on('resize.dtb-collection', function () {\n\t\t\t\tplace();\n\t\t\t});\n\t\t}\n\n\t\tif (options.background) {\n\t\t\tButtons.background(\n\t\t\t\ttrue,\n\t\t\t\toptions.backgroundClassName,\n\t\t\t\toptions.fade,\n\t\t\t\toptions.backgroundHost || hostNode\n\t\t\t);\n\t\t}\n\n\t\t// This is bonkers, but if we don't have a click listener on the\n\t\t// background element, iOS Safari will ignore the body click\n\t\t// listener below. An empty function here is all that is\n\t\t// required to make it work...\n\t\t$('div.dt-button-background').on(\n\t\t\t'click.dtb-collection',\n\t\t\tfunction () {}\n\t\t);\n\n\t\tif (options.autoClose) {\n\t\t\tsetTimeout(function () {\n\t\t\t\tdt.on('buttons-action.b-internal', function (e, btn, dt, node) {\n\t\t\t\t\tif (node[0] === hostNode[0]) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tclose();\n\t\t\t\t});\n\t\t\t}, 0);\n\t\t}\n\n\t\t$(display).trigger('buttons-popover.dt');\n\n\t\tdt.on('destroy', close);\n\n\t\tsetTimeout(function () {\n\t\t\tclosed = false;\n\t\t\t$('body')\n\t\t\t\t.on('click.dtb-collection', function (e) {\n\t\t\t\t\tif (closed) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// andSelf is deprecated in jQ1.8, but we want 1.7 compat\n\t\t\t\t\tvar back = $.fn.addBack ? 'addBack' : 'andSelf';\n\t\t\t\t\tvar parent = $(e.target).parent()[0];\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t(!$(e.target).parents()[back]().filter(content)\n\t\t\t\t\t\t\t.length &&\n\t\t\t\t\t\t\t!$(parent).hasClass('dt-buttons')) ||\n\t\t\t\t\t\t$(e.target).hasClass('dt-button-background')\n\t\t\t\t\t) {\n\t\t\t\t\t\tclose();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on('keyup.dtb-collection', function (e) {\n\t\t\t\t\tif (e.keyCode === 27) {\n\t\t\t\t\t\tclose();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on('keydown.dtb-collection', function (e) {\n\t\t\t\t\t// Focus trap for tab key\n\t\t\t\t\tvar elements = $('a, button', content);\n\t\t\t\t\tvar active = document.activeElement;\n\n\t\t\t\t\tif (e.keyCode !== 9) {\n\t\t\t\t\t\t// tab\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (elements.index(active) === -1) {\n\t\t\t\t\t\t// If current focus is not inside the popover\n\t\t\t\t\t\telements.first().focus();\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t\telse if (e.shiftKey) {\n\t\t\t\t\t\t// Reverse tabbing order when shift key is pressed\n\t\t\t\t\t\tif (active === elements[0]) {\n\t\t\t\t\t\t\telements.last().focus();\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (active === elements.last()[0]) {\n\t\t\t\t\t\t\telements.first().focus();\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}, 0);\n\t}\n});\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n * Statics\n */\n\n/**\n * Show / hide a background layer behind a collection\n * @param  {boolean} Flag to indicate if the background should be shown or\n *   hidden\n * @param  {string} Class to assign to the background\n * @static\n */\nButtons.background = function (show, className, fade, insertPoint) {\n\tif (fade === undefined) {\n\t\tfade = 400;\n\t}\n\tif (!insertPoint) {\n\t\tinsertPoint = document.body;\n\t}\n\n\tif (show) {\n\t\t_fadeIn(\n\t\t\t$('<div/>')\n\t\t\t\t.addClass(className)\n\t\t\t\t.css('display', 'none')\n\t\t\t\t.insertAfter(insertPoint),\n\t\t\tfade\n\t\t);\n\t}\n\telse {\n\t\t_fadeOut($('div.' + className), fade, function () {\n\t\t\t$(this).removeClass(className).remove();\n\t\t});\n\t}\n};\n\n/**\n * Instance selector - select Buttons instances based on an instance selector\n * value from the buttons assigned to a DataTable. This is only useful if\n * multiple instances are attached to a DataTable.\n * @param  {string|int|array} Instance selector - see `instance-selector`\n *   documentation on the DataTables site\n * @param  {array} Button instance array that was attached to the DataTables\n *   settings object\n * @return {array} Buttons instances\n * @static\n */\nButtons.instanceSelector = function (group, buttons) {\n\tif (group === undefined || group === null) {\n\t\treturn $.map(buttons, function (v) {\n\t\t\treturn v.inst;\n\t\t});\n\t}\n\n\tvar ret = [];\n\tvar names = $.map(buttons, function (v) {\n\t\treturn v.name;\n\t});\n\n\t// Flatten the group selector into an array of single options\n\tvar process = function (input) {\n\t\tif (Array.isArray(input)) {\n\t\t\tfor (var i = 0, ien = input.length; i < ien; i++) {\n\t\t\t\tprocess(input[i]);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (typeof input === 'string') {\n\t\t\tif (input.indexOf(',') !== -1) {\n\t\t\t\t// String selector, list of names\n\t\t\t\tprocess(input.split(','));\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// String selector individual name\n\t\t\t\tvar idx = $.inArray(input.trim(), names);\n\n\t\t\t\tif (idx !== -1) {\n\t\t\t\t\tret.push(buttons[idx].inst);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (typeof input === 'number') {\n\t\t\t// Index selector\n\t\t\tret.push(buttons[input].inst);\n\t\t}\n\t\telse if (typeof input === 'object' && input.nodeName) {\n\t\t\t// Element selector\n\t\t\tfor (var j = 0; j < buttons.length; j++) {\n\t\t\t\tif (buttons[j].inst.dom.container[0] === input) {\n\t\t\t\t\tret.push(buttons[j].inst);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (typeof input === 'object') {\n\t\t\t// Actual instance selector\n\t\t\tret.push(input);\n\t\t}\n\t};\n\n\tprocess(group);\n\n\treturn ret;\n};\n\n/**\n * Button selector - select one or more buttons from a selector input so some\n * operation can be performed on them.\n * @param  {array} Button instances array that the selector should operate on\n * @param  {string|int|node|jQuery|array} Button selector - see\n *   `button-selector` documentation on the DataTables site\n * @return {array} Array of objects containing `inst` and `idx` properties of\n *   the selected buttons so you know which instance each button belongs to.\n * @static\n */\nButtons.buttonSelector = function (insts, selector) {\n\tvar ret = [];\n\tvar nodeBuilder = function (a, buttons, baseIdx) {\n\t\tvar button;\n\t\tvar idx;\n\n\t\tfor (var i = 0, ien = buttons.length; i < ien; i++) {\n\t\t\tbutton = buttons[i];\n\n\t\t\tif (button) {\n\t\t\t\tidx = baseIdx !== undefined ? baseIdx + i : i + '';\n\n\t\t\t\ta.push({\n\t\t\t\t\tnode: button.node,\n\t\t\t\t\tname: button.conf.name,\n\t\t\t\t\tidx: idx\n\t\t\t\t});\n\n\t\t\t\tif (button.buttons) {\n\t\t\t\t\tnodeBuilder(a, button.buttons, idx + '-');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tvar run = function (selector, inst) {\n\t\tvar i, ien;\n\t\tvar buttons = [];\n\t\tnodeBuilder(buttons, inst.s.buttons);\n\n\t\tvar nodes = $.map(buttons, function (v) {\n\t\t\treturn v.node;\n\t\t});\n\n\t\tif (Array.isArray(selector) || selector instanceof $) {\n\t\t\tfor (i = 0, ien = selector.length; i < ien; i++) {\n\t\t\t\trun(selector[i], inst);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (selector === null || selector === undefined || selector === '*') {\n\t\t\t// Select all\n\t\t\tfor (i = 0, ien = buttons.length; i < ien; i++) {\n\t\t\t\tret.push({\n\t\t\t\t\tinst: inst,\n\t\t\t\t\tnode: buttons[i].node\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\telse if (typeof selector === 'number') {\n\t\t\t// Main button index selector\n\t\t\tif (inst.s.buttons[selector]) {\n\t\t\t\tret.push({\n\t\t\t\t\tinst: inst,\n\t\t\t\t\tnode: inst.s.buttons[selector].node\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\telse if (typeof selector === 'string') {\n\t\t\tif (selector.indexOf(',') !== -1) {\n\t\t\t\t// Split\n\t\t\t\tvar a = selector.split(',');\n\n\t\t\t\tfor (i = 0, ien = a.length; i < ien; i++) {\n\t\t\t\t\trun(a[i].trim(), inst);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (selector.match(/^\\d+(\\-\\d+)*$/)) {\n\t\t\t\t// Sub-button index selector\n\t\t\t\tvar indexes = $.map(buttons, function (v) {\n\t\t\t\t\treturn v.idx;\n\t\t\t\t});\n\n\t\t\t\tret.push({\n\t\t\t\t\tinst: inst,\n\t\t\t\t\tnode: buttons[$.inArray(selector, indexes)].node\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (selector.indexOf(':name') !== -1) {\n\t\t\t\t// Button name selector\n\t\t\t\tvar name = selector.replace(':name', '');\n\n\t\t\t\tfor (i = 0, ien = buttons.length; i < ien; i++) {\n\t\t\t\t\tif (buttons[i].name === name) {\n\t\t\t\t\t\tret.push({\n\t\t\t\t\t\t\tinst: inst,\n\t\t\t\t\t\t\tnode: buttons[i].node\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// jQuery selector on the nodes\n\t\t\t\t$(nodes)\n\t\t\t\t\t.filter(selector)\n\t\t\t\t\t.each(function () {\n\t\t\t\t\t\tret.push({\n\t\t\t\t\t\t\tinst: inst,\n\t\t\t\t\t\t\tnode: this\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\telse if (typeof selector === 'object' && selector.nodeName) {\n\t\t\t// Node selector\n\t\t\tvar idx = $.inArray(selector, nodes);\n\n\t\t\tif (idx !== -1) {\n\t\t\t\tret.push({\n\t\t\t\t\tinst: inst,\n\t\t\t\t\tnode: nodes[idx]\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tfor (var i = 0, ien = insts.length; i < ien; i++) {\n\t\tvar inst = insts[i];\n\n\t\trun(selector, inst);\n\t}\n\n\treturn ret;\n};\n\n/**\n * Default function used for formatting output data.\n * @param {*} str Data to strip\n */\nButtons.stripData = function (str, config) {\n\t// If the input is an HTML element, we can use the HTML from it (HTML might be stripped below).\n\tif (str !== null && typeof str === 'object' && str.nodeName && str.nodeType) {\n\t\tstr = str.innerHTML;\n\t}\n\n\tif (typeof str !== 'string') {\n\t\treturn str;\n\t}\n\n\t// Always remove script tags\n\tstr = Buttons.stripHtmlScript(str);\n\n\t// Always remove comments\n\tstr = Buttons.stripHtmlComments(str);\n\n\tif (!config || config.stripHtml) {\n\t\tstr = DataTable.util.stripHtml(str);\n\t}\n\n\tif (!config || config.trim) {\n\t\tstr = str.trim();\n\t}\n\n\tif (!config || config.stripNewlines) {\n\t\tstr = str.replace(/\\n/g, ' ');\n\t}\n\n\tif (!config || config.decodeEntities) {\n\t\tif (_entityDecoder) {\n\t\t\tstr = _entityDecoder(str);\n\t\t}\n\t\telse {\n\t\t\t_exportTextarea.innerHTML = str;\n\t\t\tstr = _exportTextarea.value;\n\t\t}\n\t}\n\n\t// Prevent Excel from running a formula\n\tif (!config || config.escapeExcelFormula) {\n\t\tif (str.match(/^[=@\\t\\r]/)) {\n\t\t\tstr = \"'\" + str;\n\t\t}\n\t}\n\n\treturn str;\n};\n\n/**\n * Provide a custom entity decoding function - e.g. a regex one, which can be\n * much faster than the built in DOM option, but also larger code size.\n * @param {function} fn\n */\nButtons.entityDecoder = function (fn) {\n\t_entityDecoder = fn;\n};\n\n/**\n * Common function for stripping HTML comments\n *\n * @param {*} input \n * @returns \n */\nButtons.stripHtmlComments = function (input) {\n\tvar previous;  \n\t\n\tdo {  \n\t\tprevious = input;\n\t\tinput = input.replace(/(<!--.*?--!?>)|(<!--[\\S\\s]+?--!?>)|(<!--[\\S\\s]*?$)/g, '');\n\t} while (input !== previous);  \n\n\treturn input;  \n};\n\n/**\n * Common function for stripping HTML script tags\n *\n * @param {*} input \n * @returns \n */\nButtons.stripHtmlScript = function (input) {\n\tvar previous;  \n\t\n\tdo {  \n\t\tprevious = input;\n\t\tinput = input.replace(/<script\\b[^<]*(?:(?!<\\/script[^>]*>)<[^<]*)*<\\/script[^>]*>/gi, '');\n\t} while (input !== previous);  \n\n\treturn input;  \n};\n\n/**\n * Buttons defaults. For full documentation, please refer to the docs/option\n * directory or the DataTables site.\n * @type {Object}\n * @static\n */\nButtons.defaults = {\n\tbuttons: ['copy', 'excel', 'csv', 'pdf', 'print'],\n\tname: 'main',\n\ttabIndex: 0,\n\tdom: {\n\t\tcontainer: {\n\t\t\ttag: 'div',\n\t\t\tclassName: 'dt-buttons'\n\t\t},\n\t\tcollection: {\n\t\t\tcontainer: {\n\t\t\t\t// The element used for the dropdown\n\t\t\t\tclassName: 'dt-button-collection',\n\t\t\t\tcontent: {\n\t\t\t\t\tclassName: '',\n\t\t\t\t\ttag: 'div'\n\t\t\t\t},\n\t\t\t\ttag: 'div'\n\t\t\t}\n\t\t\t// optionally\n\t\t\t// , button: IButton - buttons inside the collection container\n\t\t\t// , split: ISplit - splits inside the collection container\n\t\t},\n\t\tbutton: {\n\t\t\ttag: 'button',\n\t\t\tclassName: 'dt-button',\n\t\t\tactive: 'dt-button-active', // class name\n\t\t\tdisabled: 'disabled', // class name\n\t\t\tspacer: {\n\t\t\t\tclassName: 'dt-button-spacer',\n\t\t\t\ttag: 'span'\n\t\t\t},\n\t\t\tliner: {\n\t\t\t\ttag: 'span',\n\t\t\t\tclassName: ''\n\t\t\t},\n\t\t\tdropClass: '',\n\t\t\tdropHtml: '<span class=\"dt-button-down-arrow\">&#x25BC;</span>'\n\t\t},\n\t\tsplit: {\n\t\t\taction: {\n\t\t\t\t// action button\n\t\t\t\tclassName: 'dt-button-split-drop-button dt-button',\n\t\t\t\ttag: 'button'\n\t\t\t},\n\t\t\tdropdown: {\n\t\t\t\t// button to trigger the dropdown\n\t\t\t\talign: 'split-right',\n\t\t\t\tclassName: 'dt-button-split-drop',\n\t\t\t\tsplitAlignClass: 'dt-button-split-left',\n\t\t\t\ttag: 'button'\n\t\t\t},\n\t\t\twrapper: {\n\t\t\t\t// wrap around both\n\t\t\t\tclassName: 'dt-button-split',\n\t\t\t\ttag: 'div'\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Version information\n * @type {string}\n * @static\n */\nButtons.version = '3.2.5';\n\n$.extend(_dtButtons, {\n\tcollection: {\n\t\ttext: function (dt) {\n\t\t\treturn dt.i18n('buttons.collection', 'Collection');\n\t\t},\n\t\tclassName: 'buttons-collection',\n\t\tcloseButton: false,\n\t\tdropIcon: true,\n\t\tinit: function (dt, button) {\n\t\t\tbutton.attr('aria-expanded', false);\n\t\t},\n\t\taction: function (e, dt, button, config) {\n\t\t\tif (config._collection.parents('body').length) {\n\t\t\t\tthis.popover(false, config);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.popover(config._collection, config);\n\t\t\t}\n\n\t\t\t// When activated using a key - auto focus on the\n\t\t\t// first item in the popover\n\t\t\tif (e.type === 'keypress') {\n\t\t\t\t$('a, button', config._collection).eq(0).focus();\n\t\t\t}\n\t\t},\n\t\tattr: {\n\t\t\t'aria-haspopup': 'dialog'\n\t\t}\n\t\t// Also the popover options, defined in Buttons.popover\n\t},\n\tsplit: {\n\t\ttext: function (dt) {\n\t\t\treturn dt.i18n('buttons.split', 'Split');\n\t\t},\n\t\tclassName: 'buttons-split',\n\t\tcloseButton: false,\n\t\tinit: function (dt, button) {\n\t\t\treturn button.attr('aria-expanded', false);\n\t\t},\n\t\taction: function (e, dt, button, config) {\n\t\t\tthis.popover(config._collection, config);\n\t\t},\n\t\tattr: {\n\t\t\t'aria-haspopup': 'dialog'\n\t\t}\n\t\t// Also the popover options, defined in Buttons.popover\n\t},\n\tcopy: function () {\n\t\tif (_dtButtons.copyHtml5) {\n\t\t\treturn 'copyHtml5';\n\t\t}\n\t},\n\tcsv: function (dt, conf) {\n\t\tif (_dtButtons.csvHtml5 && _dtButtons.csvHtml5.available(dt, conf)) {\n\t\t\treturn 'csvHtml5';\n\t\t}\n\t},\n\texcel: function (dt, conf) {\n\t\tif (\n\t\t\t_dtButtons.excelHtml5 &&\n\t\t\t_dtButtons.excelHtml5.available(dt, conf)\n\t\t) {\n\t\t\treturn 'excelHtml5';\n\t\t}\n\t},\n\tpdf: function (dt, conf) {\n\t\tif (_dtButtons.pdfHtml5 && _dtButtons.pdfHtml5.available(dt, conf)) {\n\t\t\treturn 'pdfHtml5';\n\t\t}\n\t},\n\tpageLength: function (dt) {\n\t\tvar lengthMenu = dt.settings()[0].aLengthMenu;\n\t\tvar vals = [];\n\t\tvar lang = [];\n\t\tvar text = function (dt) {\n\t\t\treturn dt.i18n(\n\t\t\t\t'buttons.pageLength',\n\t\t\t\t{\n\t\t\t\t\t'-1': 'Show all rows',\n\t\t\t\t\t_: 'Show %d rows'\n\t\t\t\t},\n\t\t\t\tdt.page.len()\n\t\t\t);\n\t\t};\n\n\t\t// Support for DataTables 1.x 2D array\n\t\tif (Array.isArray(lengthMenu[0])) {\n\t\t\tvals = lengthMenu[0];\n\t\t\tlang = lengthMenu[1];\n\t\t}\n\t\telse {\n\t\t\tfor (var i = 0; i < lengthMenu.length; i++) {\n\t\t\t\tvar option = lengthMenu[i];\n\n\t\t\t\t// Support for DataTables 2 object in the array\n\t\t\t\tif ($.isPlainObject(option)) {\n\t\t\t\t\tvals.push(option.value);\n\t\t\t\t\tlang.push(option.label);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvals.push(option);\n\t\t\t\t\tlang.push(option);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\textend: 'collection',\n\t\t\ttext: text,\n\t\t\tclassName: 'buttons-page-length',\n\t\t\tautoClose: true,\n\t\t\tbuttons: $.map(vals, function (val, i) {\n\t\t\t\treturn {\n\t\t\t\t\ttext: lang[i],\n\t\t\t\t\tclassName: 'button-page-length',\n\t\t\t\t\taction: function (e, dt) {\n\t\t\t\t\t\tdt.page.len(val).draw();\n\t\t\t\t\t},\n\t\t\t\t\tinit: function (dt, node, conf) {\n\t\t\t\t\t\tvar that = this;\n\t\t\t\t\t\tvar fn = function () {\n\t\t\t\t\t\t\tthat.active(dt.page.len() === val);\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tdt.on('length.dt' + conf.namespace, fn);\n\t\t\t\t\t\tfn();\n\t\t\t\t\t},\n\t\t\t\t\tdestroy: function (dt, node, conf) {\n\t\t\t\t\t\tdt.off('length.dt' + conf.namespace);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}),\n\t\t\tinit: function (dt, node, conf) {\n\t\t\t\tvar that = this;\n\t\t\t\tdt.on('length.dt' + conf.namespace, function () {\n\t\t\t\t\tthat.text(conf.text);\n\t\t\t\t});\n\t\t\t},\n\t\t\tdestroy: function (dt, node, conf) {\n\t\t\t\tdt.off('length.dt' + conf.namespace);\n\t\t\t}\n\t\t};\n\t},\n\tspacer: {\n\t\tstyle: 'empty',\n\t\tspacer: true,\n\t\ttext: function (dt) {\n\t\t\treturn dt.i18n('buttons.spacer', '');\n\t\t}\n\t}\n});\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n * DataTables API\n *\n * For complete documentation, please refer to the docs/api directory or the\n * DataTables site\n */\n\n// Buttons group and individual button selector\nDataTable.Api.register('buttons()', function (group, selector) {\n\t// Argument shifting\n\tif (selector === undefined) {\n\t\tselector = group;\n\t\tgroup = undefined;\n\t}\n\n\tthis.selector.buttonGroup = group;\n\n\tvar res = this.iterator(\n\t\ttrue,\n\t\t'table',\n\t\tfunction (ctx) {\n\t\t\tif (ctx._buttons) {\n\t\t\t\treturn Buttons.buttonSelector(\n\t\t\t\t\tButtons.instanceSelector(group, ctx._buttons),\n\t\t\t\t\tselector\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\ttrue\n\t);\n\n\tres._groupSelector = group;\n\treturn res;\n});\n\n// Individual button selector\nDataTable.Api.register('button()', function (group, selector) {\n\t// just run buttons() and truncate\n\tvar buttons = this.buttons(group, selector);\n\n\tif (buttons.length > 1) {\n\t\tbuttons.splice(1, buttons.length);\n\t}\n\n\treturn buttons;\n});\n\n// Active buttons\nDataTable.Api.registerPlural(\n\t'buttons().active()',\n\t'button().active()',\n\tfunction (flag) {\n\t\tif (flag === undefined) {\n\t\t\treturn this.map(function (set) {\n\t\t\t\treturn set.inst.active(set.node);\n\t\t\t});\n\t\t}\n\n\t\treturn this.each(function (set) {\n\t\t\tset.inst.active(set.node, flag);\n\t\t});\n\t}\n);\n\n// Get / set button action\nDataTable.Api.registerPlural(\n\t'buttons().action()',\n\t'button().action()',\n\tfunction (action) {\n\t\tif (action === undefined) {\n\t\t\treturn this.map(function (set) {\n\t\t\t\treturn set.inst.action(set.node);\n\t\t\t});\n\t\t}\n\n\t\treturn this.each(function (set) {\n\t\t\tset.inst.action(set.node, action);\n\t\t});\n\t}\n);\n\n// Collection control\nDataTable.Api.registerPlural(\n\t'buttons().collectionRebuild()',\n\t'button().collectionRebuild()',\n\tfunction (buttons) {\n\t\treturn this.each(function (set) {\n\t\t\tfor (var i = 0; i < buttons.length; i++) {\n\t\t\t\tif (typeof buttons[i] === 'object') {\n\t\t\t\t\tbuttons[i].parentConf = set;\n\t\t\t\t}\n\t\t\t}\n\t\t\tset.inst.collectionRebuild(set.node, buttons);\n\t\t});\n\t}\n);\n\n// Enable / disable buttons\nDataTable.Api.register(\n\t['buttons().enable()', 'button().enable()'],\n\tfunction (flag) {\n\t\treturn this.each(function (set) {\n\t\t\tset.inst.enable(set.node, flag);\n\t\t});\n\t}\n);\n\n// Disable buttons\nDataTable.Api.register(\n\t['buttons().disable()', 'button().disable()'],\n\tfunction () {\n\t\treturn this.each(function (set) {\n\t\t\tset.inst.disable(set.node);\n\t\t});\n\t}\n);\n\n// Button index\nDataTable.Api.register('button().index()', function () {\n\tvar idx = null;\n\n\tthis.each(function (set) {\n\t\tvar res = set.inst.index(set.node);\n\n\t\tif (res !== null) {\n\t\t\tidx = res;\n\t\t}\n\t});\n\n\treturn idx;\n});\n\n// Get button nodes\nDataTable.Api.registerPlural(\n\t'buttons().nodes()',\n\t'button().node()',\n\tfunction () {\n\t\tvar jq = $();\n\n\t\t// jQuery will automatically reduce duplicates to a single entry\n\t\t$(\n\t\t\tthis.each(function (set) {\n\t\t\t\tjq = jq.add(set.inst.node(set.node));\n\t\t\t})\n\t\t);\n\n\t\treturn jq;\n\t}\n);\n\n// Get / set button processing state\nDataTable.Api.registerPlural(\n\t'buttons().processing()',\n\t'button().processing()',\n\tfunction (flag) {\n\t\tif (flag === undefined) {\n\t\t\treturn this.map(function (set) {\n\t\t\t\treturn set.inst.processing(set.node);\n\t\t\t});\n\t\t}\n\n\t\treturn this.each(function (set) {\n\t\t\tset.inst.processing(set.node, flag);\n\t\t});\n\t}\n);\n\n// Get / set button text (i.e. the button labels)\nDataTable.Api.registerPlural(\n\t'buttons().text()',\n\t'button().text()',\n\tfunction (label) {\n\t\tif (label === undefined) {\n\t\t\treturn this.map(function (set) {\n\t\t\t\treturn set.inst.text(set.node);\n\t\t\t});\n\t\t}\n\n\t\treturn this.each(function (set) {\n\t\t\tset.inst.text(set.node, label);\n\t\t});\n\t}\n);\n\n// Trigger a button's action\nDataTable.Api.registerPlural(\n\t'buttons().trigger()',\n\t'button().trigger()',\n\tfunction () {\n\t\treturn this.each(function (set) {\n\t\t\tset.inst.node(set.node).trigger('click');\n\t\t});\n\t}\n);\n\n// Button resolver to the popover\nDataTable.Api.register('button().popover()', function (content, options) {\n\treturn this.map(function (set) {\n\t\treturn set.inst._popover(content, this.button(this[0].node), options);\n\t});\n});\n\n// Get the container elements\nDataTable.Api.register('buttons().containers()', function () {\n\tvar jq = $();\n\tvar groupSelector = this._groupSelector;\n\n\t// We need to use the group selector directly, since if there are no buttons\n\t// the result set will be empty\n\tthis.iterator(true, 'table', function (ctx) {\n\t\tif (ctx._buttons) {\n\t\t\tvar insts = Buttons.instanceSelector(groupSelector, ctx._buttons);\n\n\t\t\tfor (var i = 0, ien = insts.length; i < ien; i++) {\n\t\t\t\tjq = jq.add(insts[i].container());\n\t\t\t}\n\t\t}\n\t});\n\n\treturn jq;\n});\n\nDataTable.Api.register('buttons().container()', function () {\n\t// API level of nesting is `buttons()` so we can zip into the containers method\n\treturn this.containers().eq(0);\n});\n\n// Add a new button\nDataTable.Api.register('button().add()', function (idx, conf, draw) {\n\tvar ctx = this.context;\n\tvar node;\n\n\t// Don't use `this` as it could be empty - select the instances directly\n\tif (ctx.length) {\n\t\tvar inst = Buttons.instanceSelector(\n\t\t\tthis._groupSelector,\n\t\t\tctx[0]._buttons\n\t\t);\n\n\t\tif (inst.length) {\n\t\t\tnode = inst[0].add(conf, idx, draw);\n\t\t}\n\t}\n\n\treturn node\n\t\t? this.button(this._groupSelector, node)\n\t\t: this;\n});\n\n// Destroy the button sets selected\nDataTable.Api.register('buttons().destroy()', function () {\n\tthis.pluck('inst')\n\t\t.unique()\n\t\t.each(function (inst) {\n\t\t\tinst.destroy();\n\t\t});\n\n\treturn this;\n});\n\n// Remove a button\nDataTable.Api.registerPlural(\n\t'buttons().remove()',\n\t'buttons().remove()',\n\tfunction () {\n\t\tthis.each(function (set) {\n\t\t\tset.inst.remove(set.node);\n\t\t});\n\n\t\treturn this;\n\t}\n);\n\n// Information box that can be used by buttons\nvar _infoTimer;\nDataTable.Api.register('buttons.info()', function (title, message, time) {\n\tvar that = this;\n\n\tif (title === false) {\n\t\tthis.off('destroy.btn-info');\n\t\t_fadeOut($('#datatables_buttons_info'), 400, function () {\n\t\t\t$(this).remove();\n\t\t});\n\t\tclearTimeout(_infoTimer);\n\t\t_infoTimer = null;\n\n\t\treturn this;\n\t}\n\n\tif (_infoTimer) {\n\t\tclearTimeout(_infoTimer);\n\t}\n\n\tif ($('#datatables_buttons_info').length) {\n\t\t$('#datatables_buttons_info').remove();\n\t}\n\n\ttitle = title ? '<h2>' + title + '</h2>' : '';\n\n\t_fadeIn(\n\t\t$('<div id=\"datatables_buttons_info\" class=\"dt-button-info\"/>')\n\t\t\t.html(title)\n\t\t\t.append(\n\t\t\t\t$('<div/>')[typeof message === 'string' ? 'html' : 'append'](\n\t\t\t\t\tmessage\n\t\t\t\t)\n\t\t\t)\n\t\t\t.css('display', 'none')\n\t\t\t.appendTo('body')\n\t);\n\n\tif (time !== undefined && time !== 0) {\n\t\t_infoTimer = setTimeout(function () {\n\t\t\tthat.buttons.info(false);\n\t\t}, time);\n\t}\n\n\tthis.on('destroy.btn-info', function () {\n\t\tthat.buttons.info(false);\n\t});\n\n\treturn this;\n});\n\n// Get data from the table for export - this is common to a number of plug-in\n// buttons so it is included in the Buttons core library\nDataTable.Api.register('buttons.exportData()', function (options) {\n\tif (this.context.length) {\n\t\treturn _exportData(new DataTable.Api(this.context[0]), options);\n\t}\n});\n\n// Get information about the export that is common to many of the export data\n// types (DRY)\nDataTable.Api.register('buttons.exportInfo()', function (conf) {\n\tif (!conf) {\n\t\tconf = {};\n\t}\n\n\treturn {\n\t\tfilename: _filename(conf, this),\n\t\ttitle: _title(conf, this),\n\t\tmessageTop: _message(this, conf, conf.message || conf.messageTop, 'top'),\n\t\tmessageBottom: _message(this, conf, conf.messageBottom, 'bottom')\n\t};\n});\n\n/**\n * Get the file name for an exported file.\n *\n * @param {object} config Button configuration\n * @param {object} dt DataTable instance\n */\nvar _filename = function (config, dt) {\n\t// Backwards compatibility\n\tvar filename =\n\t\tconfig.filename === '*' &&\n\t\tconfig.title !== '*' &&\n\t\tconfig.title !== undefined &&\n\t\tconfig.title !== null &&\n\t\tconfig.title !== ''\n\t\t\t? config.title\n\t\t\t: config.filename;\n\n\tif (typeof filename === 'function') {\n\t\tfilename = filename(config, dt);\n\t}\n\n\tif (filename === undefined || filename === null) {\n\t\treturn null;\n\t}\n\n\tif (filename.indexOf('*') !== -1) {\n\t\tfilename = filename.replace(/\\*/g, $('head > title').text()).trim();\n\t}\n\n\t// Strip characters which the OS will object to\n\tfilename = filename.replace(/[^a-zA-Z0-9_\\u00A1-\\uFFFF\\.,\\-_ !\\(\\)]/g, '');\n\n\tvar extension = _stringOrFunction(config.extension, config, dt);\n\tif (!extension) {\n\t\textension = '';\n\t}\n\n\treturn filename + extension;\n};\n\n/**\n * Simply utility method to allow parameters to be given as a function\n *\n * @param {undefined|string|function} option Option\n * @return {null|string} Resolved value\n */\nvar _stringOrFunction = function (option, config, dt) {\n\tif (option === null || option === undefined) {\n\t\treturn null;\n\t}\n\telse if (typeof option === 'function') {\n\t\treturn option(config, dt);\n\t}\n\treturn option;\n};\n\n/**\n * Get the title for an exported file.\n *\n * @param {object} config\tButton configuration\n */\nvar _title = function (config, dt) {\n\tvar title = _stringOrFunction(config.title, config, dt);\n\n\treturn title === null\n\t\t? null\n\t\t: title.indexOf('*') !== -1\n\t\t? title.replace(/\\*/g, $('head > title').text() || 'Exported data')\n\t\t: title;\n};\n\nvar _message = function (dt, config, option, position) {\n\tvar message = _stringOrFunction(option, config, dt);\n\tif (message === null) {\n\t\treturn null;\n\t}\n\n\tvar caption = $('caption', dt.table().container()).eq(0);\n\tif (message === '*') {\n\t\tvar side = caption.css('caption-side');\n\t\tif (side !== position) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn caption.length ? caption.text() : '';\n\t}\n\n\treturn message;\n};\n\nvar _exportTextarea = $('<textarea/>')[0];\nvar _exportData = function (dt, inOpts) {\n\tvar config = $.extend(\n\t\ttrue,\n\t\t{},\n\t\t{\n\t\t\trows: null,\n\t\t\tcolumns: '',\n\t\t\tmodifier: {\n\t\t\t\tsearch: 'applied',\n\t\t\t\torder: 'applied'\n\t\t\t},\n\t\t\torthogonal: 'display',\n\t\t\tstripHtml: true,\n\t\t\tstripNewlines: true,\n\t\t\tdecodeEntities: true,\n\t\t\tescapeExcelFormula: false,\n\t\t\ttrim: true,\n\t\t\tformat: {\n\t\t\t\theader: function (d) {\n\t\t\t\t\treturn Buttons.stripData(d, config);\n\t\t\t\t},\n\t\t\t\tfooter: function (d) {\n\t\t\t\t\treturn Buttons.stripData(d, config);\n\t\t\t\t},\n\t\t\t\tbody: function (d) {\n\t\t\t\t\treturn Buttons.stripData(d, config);\n\t\t\t\t}\n\t\t\t},\n\t\t\tcustomizeData: null,\n\t\t\tcustomizeZip: null\n\t\t},\n\t\tinOpts\n\t);\n\n\tvar header = dt\n\t\t.columns(config.columns)\n\t\t.indexes()\n\t\t.map(function (idx) {\n\t\t\tvar col = dt.column(idx);\n\t\t\treturn config.format.header(col.title(), idx, col.header());\n\t\t})\n\t\t.toArray();\n\n\tvar footer = dt.table().footer()\n\t\t? dt\n\t\t\t\t.columns(config.columns)\n\t\t\t\t.indexes()\n\t\t\t\t.map(function (idx) {\n\t\t\t\t\tvar el = dt.column(idx).footer();\n\t\t\t\t\tvar val = '';\n\n\t\t\t\t\tif (el) {\n\t\t\t\t\t\tvar inner = $('.dt-column-title', el);\n\n\t\t\t\t\t\tval = inner.length\n\t\t\t\t\t\t\t? inner.html()\n\t\t\t\t\t\t\t: $(el).html();\n\t\t\t\t\t}\n\n\t\t\t\t\treturn config.format.footer(val, idx, el);\n\t\t\t\t})\n\t\t\t\t.toArray()\n\t\t: null;\n\n\t// If Select is available on this table, and any rows are selected, limit the export\n\t// to the selected rows. If no rows are selected, all rows will be exported. Specify\n\t// a `selected` modifier to control directly.\n\tvar modifier = $.extend({}, config.modifier);\n\tif (\n\t\tdt.select &&\n\t\ttypeof dt.select.info === 'function' &&\n\t\tmodifier.selected === undefined\n\t) {\n\t\tif (\n\t\t\tdt.rows(config.rows, $.extend({ selected: true }, modifier)).any()\n\t\t) {\n\t\t\t$.extend(modifier, { selected: true });\n\t\t}\n\t}\n\n\tvar rowIndexes = dt.rows(config.rows, modifier).indexes().toArray();\n\tvar selectedCells = dt.cells(rowIndexes, config.columns, {\n\t\torder: modifier.order\n\t});\n\tvar cells = selectedCells.render(config.orthogonal).toArray();\n\tvar cellNodes = selectedCells.nodes().toArray();\n\tvar cellIndexes = selectedCells.indexes().toArray();\n\n\tvar columns = dt.columns(config.columns).count();\n\tvar rows = columns > 0 ? cells.length / columns : 0;\n\tvar body = [];\n\tvar cellCounter = 0;\n\n\tfor (var i = 0, ien = rows; i < ien; i++) {\n\t\tvar row = [columns];\n\n\t\tfor (var j = 0; j < columns; j++) {\n\t\t\trow[j] = config.format.body(\n\t\t\t\tcells[cellCounter],\n\t\t\t\tcellIndexes[cellCounter].row,\n\t\t\t\tcellIndexes[cellCounter].column,\n\t\t\t\tcellNodes[cellCounter]\n\t\t\t);\n\t\t\tcellCounter++;\n\t\t}\n\n\t\tbody[i] = row;\n\t}\n\n\tvar data = {\n\t\theader: header,\n\t\theaderStructure: _headerFormatter(\n\t\t\tconfig.format.header,\n\t\t\tdt.table().header.structure(config.columns)\n\t\t),\n\t\tfooter: footer,\n\t\tfooterStructure: _headerFormatter(\n\t\t\tconfig.format.footer,\n\t\t\tdt.table().footer.structure(config.columns)\n\t\t),\n\t\tbody: body\n\t};\n\n\tif (config.customizeData) {\n\t\tconfig.customizeData(data);\n\t}\n\n\treturn data;\n};\n\nfunction _headerFormatter(formatter, struct) {\n\tfor (var i=0 ; i<struct.length ; i++) {\n\t\tfor (var j=0 ; j<struct[i].length ; j++) {\n\t\t\tvar item = struct[i][j];\n\n\t\t\tif (item) {\n\t\t\t\titem.title = formatter(\n\t\t\t\t\titem.title,\n\t\t\t\t\tj,\n\t\t\t\t\titem.cell\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn struct;\n}\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n * DataTables interface\n */\n\n// Attach to DataTables objects for global access\n$.fn.dataTable.Buttons = Buttons;\n$.fn.DataTable.Buttons = Buttons;\n\n// DataTables creation - check if the buttons have been defined for this table,\n// they will have been if the `B` option was used in `dom`, otherwise we should\n// create the buttons instance here so they can be inserted into the document\n// using the API. Listen for `init` for compatibility with pre 1.10.10, but to\n// be removed in future.\n$(document).on('init.dt plugin-init.dt', function (e, settings) {\n\tif (e.namespace !== 'dt') {\n\t\treturn;\n\t}\n\n\tvar opts = settings.oInit.buttons || DataTable.defaults.buttons;\n\n\tif (opts && !settings._buttons) {\n\t\tnew Buttons(settings, opts).container();\n\t}\n});\n\nfunction _init(settings, options) {\n\tvar api = new DataTable.Api(settings);\n\tvar opts = options\n\t\t? options\n\t\t: api.init().buttons || DataTable.defaults.buttons;\n\n\treturn new Buttons(api, opts).container();\n}\n\n// DataTables 1 `dom` feature option\nDataTable.ext.feature.push({\n\tfnInit: _init,\n\tcFeature: 'B'\n});\n\n// DataTables 2 layout feature\nif (DataTable.feature) {\n\tDataTable.feature.register('buttons', _init);\n}\n\n\nexport default DataTable;\n","/*! Bootstrap integration for DataTables' Buttons\n * Â© SpryMedia Ltd - datatables.net/license\n */\n\nimport jQuery from 'jquery';\nimport DataTable from 'datatables.net-bs5';\nimport Buttons from 'datatables.net-buttons';\n\n// Allow reassignment of the $ variable\nlet $ = jQuery;\n\n\n$.extend(true, DataTable.Buttons.defaults, {\n\tdom: {\n\t\tcontainer: {\n\t\t\tclassName: 'dt-buttons btn-group flex-wrap'\n\t\t},\n\t\tbutton: {\n\t\t\tclassName: 'btn btn-secondary',\n\t\t\tactive: 'active',\n\t\t\tdropHtml: '',\n\t\t\tdropClass: 'dropdown-toggle'\n\t\t},\n\t\tcollection: {\n\t\t\tcontainer: {\n\t\t\t\ttag: 'div',\n\t\t\t\tclassName: 'dt-button-collection',\n\t\t\t\tcontent: {\n\t\t\t\t\ttag: 'ul',\n\t\t\t\t\tclassName: 'dropdown-menu show'\n\t\t\t\t}\n\t\t\t},\n\t\t\tcloseButton: false,\n\t\t\tbutton: {\n\t\t\t\ttag: 'li',\n\t\t\t\tclassName: 'dt-button',\n\t\t\t\tactive: 'dt-button-active-a',\n\t\t\t\tdisabled: 'disabled',\n\t\t\t\tliner: {\n\t\t\t\t\ttag: 'a',\n\t\t\t\t\tclassName: 'dropdown-item'\n\t\t\t\t},\n\t\t\t\tspacer: {\n\t\t\t\t\tclassName: 'divider',\n\t\t\t\t\ttag: 'li'\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tsplit: {\n\t\t\taction: {\n\t\t\t\ttag: 'a',\n\t\t\t\tclassName: 'btn btn-secondary dt-button-split-drop-button',\n\t\t\t\tcloseButton: false\n\t\t\t},\n\t\t\tdropdown: {\n\t\t\t\ttag: 'button',\n\t\t\t\tclassName:\n\t\t\t\t\t'btn btn-secondary dt-button-split-drop dropdown-toggle-split',\n\t\t\t\tcloseButton: false,\n\t\t\t\talign: 'split-left',\n\t\t\t\tsplitAlignClass: 'dt-button-split-left'\n\t\t\t},\n\t\t\twrapper: {\n\t\t\t\ttag: 'div',\n\t\t\t\tclassName: 'dt-button-split btn-group',\n\t\t\t\tcloseButton: false\n\t\t\t}\n\t\t}\n\t},\n\tbuttonCreated: function (config, button) {\n\t\treturn config.buttons ? $('<div class=\"btn-group\"/>').append(button) : button;\n\t}\n});\n\nDataTable.ext.buttons.collection.rightAlignClassName = 'dropdown-menu-right';\n\n\nexport default DataTable;\n","/*! FixedHeader 4.0.3\n * Â© SpryMedia Ltd - datatables.net/license\n */\n\nimport jQuery from 'jquery';\nimport DataTable from 'datatables.net';\n\n// Allow reassignment of the $ variable\nlet $ = jQuery;\n\n\n/**\n * @summary     FixedHeader\n * @description Fix a table's header or footer, so it is always visible while\n *              scrolling\n * @version     4.0.3\n * @author      SpryMedia Ltd\n * @contact     datatables.net\n *\n * This source file is free software, available under the following license:\n *   MIT license - http://datatables.net/license/mit\n *\n * This source file is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n * or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.\n *\n * For details please refer to: http://www.datatables.net\n */\n\nvar _instCounter = 0;\n\nvar FixedHeader = function (dt, config) {\n\tif (!DataTable.versionCheck('2')) {\n\t\tthrow 'Warning: FixedHeader requires DataTables 2 or newer';\n\t}\n\n\t// Sanity check - you just know it will happen\n\tif (!(this instanceof FixedHeader)) {\n\t\tthrow \"FixedHeader must be initialised with the 'new' keyword.\";\n\t}\n\n\t// Allow a boolean true for defaults\n\tif (config === true) {\n\t\tconfig = {};\n\t}\n\n\tdt = new DataTable.Api(dt);\n\n\tthis.c = $.extend(true, {}, FixedHeader.defaults, config);\n\n\tthis.s = {\n\t\tdt: dt,\n\t\tposition: {\n\t\t\ttheadTop: 0,\n\t\t\ttbodyTop: 0,\n\t\t\ttfootTop: 0,\n\t\t\ttfootBottom: 0,\n\t\t\twidth: 0,\n\t\t\tleft: 0,\n\t\t\ttfootHeight: 0,\n\t\t\ttheadHeight: 0,\n\t\t\twindowHeight: $(window).height(),\n\t\t\tvisible: true\n\t\t},\n\t\theaderMode: null,\n\t\tfooterMode: null,\n\t\tautoWidth: dt.settings()[0].oFeatures.bAutoWidth,\n\t\tnamespace: '.dtfc' + _instCounter++,\n\t\tscrollLeft: {\n\t\t\theader: -1,\n\t\t\tfooter: -1\n\t\t},\n\t\tenable: true,\n\t\tautoDisable: false\n\t};\n\n\tthis.dom = {\n\t\tfloatingHeader: null,\n\t\tthead: $(dt.table().header()),\n\t\ttbody: $(dt.table().body()),\n\t\ttfoot: $(dt.table().footer()),\n\t\theader: {\n\t\t\thost: null,\n\t\t\tscrollAdjust: null,\n\t\t\tfloating: null,\n\t\t\tfloatingParent: $(\n\t\t\t\t'<div class=\"dtfh-floatingparent\">' + // location\n\t\t\t\t\t'<div class=\"dtfh-floating-limiter\">' + // hidden overflow / scrolling\n\t\t\t\t\t\t'<div></div>' + // adjustment for scrollbar (padding)\n\t\t\t\t\t'</div>' + \n\t\t\t\t'</div>'),\n\t\t\tlimiter: null,\n\t\t\tplaceholder: null\n\t\t},\n\t\tfooter: {\n\t\t\thost: null,\n\t\t\tscrollAdjust: null,\n\t\t\tfloating: null,\n\t\t\tfloatingParent: $(\n\t\t\t\t'<div class=\"dtfh-floatingparent\">' +\n\t\t\t\t\t'<div class=\"dtfh-floating-limiter\">' +\n\t\t\t\t\t\t'<div></div>' +\n\t\t\t\t\t'</div>' + \n\t\t\t\t'</div>'),\n\t\t\tlimiter: null,\n\t\t\tplaceholder: null\n\t\t}\n\t};\n\n\tvar dom = this.dom;\n\n\tdom.header.host = dom.thead.parent();\n\tdom.header.limiter = dom.header.floatingParent.children();\n\tdom.header.scrollAdjust = dom.header.limiter.children();\n\n\tdom.footer.host = dom.tfoot.parent();\n\tdom.footer.limiter = dom.footer.floatingParent.children();\n\tdom.footer.scrollAdjust = dom.footer.limiter.children();\n\n\tvar dtSettings = dt.settings()[0];\n\tif (dtSettings._fixedHeader) {\n\t\tthrow (\n\t\t\t'FixedHeader already initialised on table ' + dtSettings.nTable.id\n\t\t);\n\t}\n\n\tdtSettings._fixedHeader = this;\n\n\tthis._constructor();\n};\n\n/*\n * Variable: FixedHeader\n * Purpose:  Prototype for FixedHeader\n * Scope:    global\n */\n$.extend(FixedHeader.prototype, {\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t * API methods\n\t */\n\n\t/**\n\t * Kill off FH and any events\n\t */\n\tdestroy: function () {\n\t\tvar dom = this.dom;\n\n\t\tthis.s.dt.off('.dtfc');\n\t\t$(window).off(this.s.namespace);\n\n\t\t// Remove clones of FC blockers\n\t\tif (dom.header.rightBlocker) {\n\t\t\tdom.header.rightBlocker.remove();\n\t\t}\n\t\tif (dom.header.leftBlocker) {\n\t\t\tdom.header.leftBlocker.remove();\n\t\t}\n\t\tif (dom.footer.rightBlocker) {\n\t\t\tdom.footer.rightBlocker.remove();\n\t\t}\n\t\tif (dom.footer.leftBlocker) {\n\t\t\tdom.footer.leftBlocker.remove();\n\t\t}\n\n\t\tif (this.c.header) {\n\t\t\tthis._modeChange('in-place', 'header', true);\n\t\t}\n\n\t\tif (this.c.footer && dom.tfoot.length) {\n\t\t\tthis._modeChange('in-place', 'footer', true);\n\t\t}\n\t},\n\n\t/**\n\t * Enable / disable the fixed elements\n\t *\n\t * @param  {boolean} enable `true` to enable, `false` to disable\n\t */\n\tenable: function (enable, update, type) {\n\t\tthis.s.enable = enable;\n\n\t\tthis.s.enableType = type;\n\n\t\tif (update || update === undefined) {\n\t\t\tthis._positions();\n\t\t\tthis._scroll(true);\n\t\t}\n\t},\n\n\t/**\n\t * Get enabled status\n\t */\n\tenabled: function () {\n\t\treturn this.s.enable;\n\t},\n\n\t/**\n\t * Set header offset\n\t *\n\t * @param  {int} new value for headerOffset\n\t */\n\theaderOffset: function (offset) {\n\t\tif (offset !== undefined) {\n\t\t\tthis.c.headerOffset = offset;\n\t\t\tthis.update();\n\t\t}\n\n\t\treturn this.c.headerOffset;\n\t},\n\n\t/**\n\t * Set footer offset\n\t *\n\t * @param  {int} new value for footerOffset\n\t */\n\tfooterOffset: function (offset) {\n\t\tif (offset !== undefined) {\n\t\t\tthis.c.footerOffset = offset;\n\t\t\tthis.update();\n\t\t}\n\n\t\treturn this.c.footerOffset;\n\t},\n\n\t/**\n\t * Recalculate the position of the fixed elements and force them into place\n\t */\n\tupdate: function (force) {\n\t\tvar table = this.s.dt.table().node();\n\n\t\t// Update should only do something if enabled by the dev.\n\t\tif (!this.s.enable && !this.s.autoDisable) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ($(table).is(':visible')) {\n\t\t\tthis.s.autoDisable = false;\n\t\t\tthis.enable(true, false);\n\t\t}\n\t\telse {\n\t\t\tthis.s.autoDisable = true;\n\t\t\tthis.enable(false, false);\n\t\t}\n\n\t\t// Don't update if header is not in the document atm (due to\n\t\t// async events)\n\t\tif ($(table).children('thead').length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._positions();\n\t\tthis._scroll(force !== undefined ? force : true);\n\t\tthis._widths(this.dom.header);\n\t\tthis._widths(this.dom.footer);\n\t},\n\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t * Constructor\n\t */\n\n\t/**\n\t * FixedHeader constructor - adding the required event listeners and\n\t * simple initialisation\n\t *\n\t * @private\n\t */\n\t_constructor: function () {\n\t\tvar that = this;\n\t\tvar dt = this.s.dt;\n\n\t\t$(window)\n\t\t\t.on('scroll' + this.s.namespace, function () {\n\t\t\t\tthat._scroll();\n\t\t\t})\n\t\t\t.on(\n\t\t\t\t'resize' + this.s.namespace,\n\t\t\t\tDataTable.util.throttle(function () {\n\t\t\t\t\tthat.s.position.windowHeight = $(window).height();\n\t\t\t\t\tthat.update();\n\t\t\t\t}, 50)\n\t\t\t);\n\n\t\tvar autoHeader = $('.fh-fixedHeader');\n\t\tif (!this.c.headerOffset && autoHeader.length) {\n\t\t\tthis.c.headerOffset = autoHeader.outerHeight();\n\t\t}\n\n\t\tvar autoFooter = $('.fh-fixedFooter');\n\t\tif (!this.c.footerOffset && autoFooter.length) {\n\t\t\tthis.c.footerOffset = autoFooter.outerHeight();\n\t\t}\n\n\t\tdt.on(\n\t\t\t'column-reorder.dt.dtfc column-visibility.dt.dtfc column-sizing.dt.dtfc responsive-display.dt.dtfc',\n\t\t\tfunction (e, ctx) {\n\t\t\t\tthat.update();\n\t\t\t}\n\t\t).on('draw.dt.dtfc', function (e, ctx) {\n\t\t\t// For updates from our own table, don't reclone, but for all others, do\n\t\t\tthat.update(ctx === dt.settings()[0] ? false : true);\n\t\t});\n\n\t\tdt.on('destroy.dtfc', function () {\n\t\t\tthat.destroy();\n\t\t});\n\n\t\tthis._positions();\n\t\tthis._scroll();\n\t},\n\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t * Private methods\n\t */\n\n\t/**\n\t * Clone a fixed item to act as a place holder for the original element\n\t * which is moved into a clone of the table element, and moved around the\n\t * document to give the fixed effect.\n\t *\n\t * @param  {string}  item  'header' or 'footer'\n\t * @param  {boolean} force Force the clone to happen, or allow automatic\n\t *   decision (reuse existing if available)\n\t * @private\n\t */\n\t_clone: function (item, force) {\n\t\tvar that = this;\n\t\tvar dt = this.s.dt;\n\t\tvar itemDom = this.dom[item];\n\t\tvar itemElement = item === 'header' ? this.dom.thead : this.dom.tfoot;\n\n\t\t// If footer and scrolling is enabled then we don't clone\n\t\t// Instead the table's height is decreased accordingly - see `_scroll()`\n\t\tif (item === 'footer' && this._scrollEnabled()) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!force && itemDom.floating) {\n\t\t\t// existing floating element - reuse it\n\t\t\titemDom.floating.removeClass(\n\t\t\t\t'fixedHeader-floating fixedHeader-locked'\n\t\t\t);\n\t\t}\n\t\telse {\n\t\t\tif (itemDom.floating) {\n\t\t\t\tif (itemDom.placeholder !== null) {\n\t\t\t\t\titemDom.placeholder.remove();\n\t\t\t\t}\n\n\t\t\t\titemDom.floating.remove();\n\t\t\t}\n\n\t\t\tvar tableNode = $(dt.table().node());\n\t\t\tvar scrollBody = $(tableNode.parent());\n\t\t\tvar scrollEnabled = this._scrollEnabled();\n\n\t\t\titemDom.floating = $(dt.table().node().cloneNode(false))\n\t\t\t\t.attr('aria-hidden', 'true')\n\t\t\t\t.css({\n\t\t\t\t\ttop: 0,\n\t\t\t\t\tleft: 0\n\t\t\t\t})\n\t\t\t\t.removeAttr('id');\n\n\t\t\titemDom.floatingParent\n\t\t\t\t.css({\n\t\t\t\t\twidth: scrollBody[0].offsetWidth,\n\t\t\t\t\tposition: 'fixed',\n\t\t\t\t\tleft: scrollEnabled\n\t\t\t\t\t\t? tableNode.offset().left + scrollBody.scrollLeft()\n\t\t\t\t\t\t: 0\n\t\t\t\t})\n\t\t\t\t.css(\n\t\t\t\t\titem === 'header'\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\ttop: this.c.headerOffset,\n\t\t\t\t\t\t\t\tbottom: ''\n\t\t\t\t\t\t}\n\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\ttop: '',\n\t\t\t\t\t\t\t\tbottom: this.c.footerOffset\n\t\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\t.addClass(\n\t\t\t\t\titem === 'footer'\n\t\t\t\t\t\t? 'dtfh-floatingparent-foot'\n\t\t\t\t\t\t: 'dtfh-floatingparent-head'\n\t\t\t\t)\n\t\t\t\t.appendTo('body')\n\t\t\t\t.children()\n\t\t\t\t.eq(0);\n\n\t\t\titemDom.limiter\n\t\t\t\t.css({\n\t\t\t\t\twidth: '100%',\n\t\t\t\t\toverflow: 'hidden',\n\t\t\t\t\theight: 'fit-content'\n\t\t\t});\n\n\t\t\titemDom.scrollAdjust\n\t\t\t\t.append(itemDom.floating);\n\n\t\t\tthis._stickyPosition(itemDom.floating, '-');\n\n\t\t\tvar scrollLeftUpdate = function () {\n\t\t\t\tvar scrollLeft = scrollBody.scrollLeft();\n\t\t\t\tthat.s.scrollLeft = { footer: scrollLeft, header: scrollLeft };\n\t\t\t\titemDom.limiter.scrollLeft(that.s.scrollLeft.header);\n\t\t\t};\n\n\t\t\tscrollLeftUpdate();\n\t\t\tscrollBody.off('scroll.dtfh').on('scroll.dtfh', scrollLeftUpdate);\n\n\t\t\t// Need padding on the header's container to allow for a scrollbar,\n\t\t\t// just like how DataTables handles it\n\t\t\titemDom.scrollAdjust.css({\n\t\t\t\twidth: 'fit-content',\n\t\t\t\tpaddingRight: that.s.dt.settings()[0].oBrowser.barWidth\n\t\t\t});\n\n\t\t\t// Blocker to hide the table behind the scrollbar - this needs to use\n\t\t\t// fixed positioning in the container since we don't have an outer wrapper\n\t\t\tlet blocker = $(\n\t\t\t\titem === 'footer'\n\t\t\t\t\t? 'div.dtfc-bottom-blocker'\n\t\t\t\t\t: 'div.dtfc-top-blocker',\n\t\t\t\tdt.table().container()\n\t\t\t);\n\n\t\t\tif (blocker.length) {\n\t\t\t\tblocker\n\t\t\t\t\t.clone()\n\t\t\t\t\t.appendTo(itemDom.floatingParent)\n\t\t\t\t\t.css({\n\t\t\t\t\t\tposition: 'fixed',\n\t\t\t\t\t\tright: blocker.width()\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Insert a fake thead/tfoot into the DataTable to stop it jumping around\n\t\t\titemDom.placeholder = itemElement.clone(false);\n\t\t\titemDom.placeholder.find('*[id]').removeAttr('id');\n\n\t\t\t// Move the thead / tfoot elements around - original into the floating\n\t\t\t// element and clone into the original table\n\t\t\titemDom.host.prepend(itemDom.placeholder);\n\t\t\titemDom.floating.append(itemElement);\n\n\t\t\tthis._widths(itemDom);\n\t\t}\n\t},\n\n\t/**\n\t * This method sets the sticky position of the header elements to match fixed columns\n\t * @param {JQuery<HTMLElement>} el\n\t * @param {string} sign\n\t */\n\t_stickyPosition: function (el, sign) {\n\t\tif (this._scrollEnabled()) {\n\t\t\tvar that = this;\n\t\t\tvar rtl = $(that.s.dt.table().node()).css('direction') === 'rtl';\n\n\t\t\tel.find('th').each(function () {\n\t\t\t\t// Find out if fixed header has previously set this column\n\t\t\t\tif ($(this).css('position') === 'sticky') {\n\t\t\t\t\tvar right = $(this).css('right');\n\t\t\t\t\tvar left = $(this).css('left');\n\t\t\t\t\tvar potential;\n\n\t\t\t\t\tif (right !== 'auto' && !rtl) {\n\t\t\t\t\t\tpotential = +right.replace(/px/g, '')\n\n\t\t\t\t\t\t$(this).css('right', potential > 0 ? potential : 0);\n\t\t\t\t\t}\n\t\t\t\t\telse if (left !== 'auto' && rtl) {\n\t\t\t\t\t\tpotential = +left.replace(/px/g, '');\n\n\t\t\t\t\t\t$(this).css('left', potential > 0 ? potential : 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\t/**\n\t * Reposition the floating elements to take account of horizontal page\n\t * scroll\n\t *\n\t * @param  {string} item       The `header` or `footer`\n\t * @param  {int}    scrollLeft Document scrollLeft\n\t * @private\n\t */\n\t_horizontal: function (item, scrollLeft) {\n\t\tvar itemDom = this.dom[item];\n\t\tvar lastScrollLeft = this.s.scrollLeft;\n\n\t\tif (itemDom.floating && lastScrollLeft[item] !== scrollLeft) {\n\t\t\t// If scrolling is enabled we need to match the floating header to the body\n\t\t\tif (this._scrollEnabled()) {\n\t\t\t\tvar newScrollLeft = $(\n\t\t\t\t\t$(this.s.dt.table().node()).parent()\n\t\t\t\t).scrollLeft();\n\t\t\t\titemDom.floating.scrollLeft(newScrollLeft);\n\t\t\t\titemDom.floatingParent.scrollLeft(newScrollLeft);\n\t\t\t}\n\n\t\t\tlastScrollLeft[item] = scrollLeft;\n\t\t}\n\t},\n\n\t/**\n\t * Change from one display mode to another. Each fixed item can be in one\n\t * of:\n\t *\n\t * * `in-place` - In the main DataTable\n\t * * `in` - Floating over the DataTable\n\t * * `below` - (Header only) Fixed to the bottom of the table body\n\t * * `above` - (Footer only) Fixed to the top of the table body\n\t *\n\t * @param  {string}  mode        Mode that the item should be shown in\n\t * @param  {string}  item        'header' or 'footer'\n\t * @param  {boolean} forceChange Force a redraw of the mode, even if already\n\t *     in that mode.\n\t * @private\n\t */\n\t_modeChange: function (mode, item, forceChange) {\n\t\tvar dt = this.s.dt;\n\t\tvar itemDom = this.dom[item];\n\t\tvar position = this.s.position;\n\n\t\t// Just determine if scroll is enabled once\n\t\tvar scrollEnabled = this._scrollEnabled();\n\n\t\t// If footer and scrolling is enabled then we don't clone\n\t\t// Instead the table's height is decreased accordingly - see `_scroll()`\n\t\tif (item === 'footer' && scrollEnabled) {\n\t\t\treturn;\n\t\t}\n\n\t\t// It isn't trivial to add a !important css attribute...\n\t\tvar importantWidth = function (w) {\n\t\t\titemDom.floating[0].style.setProperty('width', w + 'px', 'important');\n\n\t\t\t// If not scrolling also have to update the floatingParent\n\t\t\tif (!scrollEnabled) {\n\t\t\t\titemDom.floatingParent[0].style.setProperty('width', w + 'px', 'important');\n\t\t\t}\n\t\t};\n\n\t\t// Record focus. Browser's will cause input elements to loose focus if\n\t\t// they are inserted else where in the doc\n\t\tvar tablePart = this.dom[item === 'footer' ? 'tfoot' : 'thead'];\n\t\tvar focus = $.contains(tablePart[0], document.activeElement)\n\t\t\t? document.activeElement\n\t\t\t: null;\n\t\tvar scrollBody = $($(this.s.dt.table().node()).parent());\n\n\t\tif (mode === 'in-place') {\n\t\t\t// Insert the header back into the table's real header\n\t\t\tif (itemDom.placeholder) {\n\t\t\t\titemDom.placeholder.remove();\n\t\t\t\titemDom.placeholder = null;\n\t\t\t}\n\n\t\t\tif (!$.contains(itemDom.host[0], tablePart[0])) {\n\t\t\t\tif (item === 'header') {\n\t\t\t\t\titemDom.host.prepend(tablePart);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\titemDom.host.append(tablePart);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (itemDom.floating) {\n\t\t\t\titemDom.floating.remove();\n\t\t\t\titemDom.floating = null;\n\t\t\t\tthis._stickyPosition(itemDom.host, '+');\n\t\t\t}\n\n\t\t\tif (itemDom.floatingParent) {\n\t\t\t\titemDom.floatingParent.find('div.dtfc-top-blocker').remove();\n\t\t\t\titemDom.floatingParent.remove();\n\t\t\t}\n\n\t\t\t$($(itemDom.host.parent()).parent()).scrollLeft(\n\t\t\t\tscrollBody.scrollLeft()\n\t\t\t);\n\t\t}\n\t\telse if (mode === 'in') {\n\t\t\t// Remove the header from the real table and insert into a fixed\n\t\t\t// positioned floating table clone\n\t\t\tthis._clone(item, forceChange);\n\n\t\t\t// Get useful position values\n\t\t\tvar scrollOffset = scrollBody.offset();\n\t\t\tvar windowTop = $(document).scrollTop();\n\t\t\tvar windowHeight = $(window).height();\n\t\t\tvar windowBottom = windowTop + windowHeight;\n\t\t\tvar bodyTop = scrollEnabled ? scrollOffset.top : position.tbodyTop;\n\t\t\tvar bodyBottom = scrollEnabled\n\t\t\t\t? scrollOffset.top + scrollBody.outerHeight()\n\t\t\t\t: position.tfootTop;\n\n\t\t\t// Calculate the amount that the footer or header needs to be shuffled\n\t\t\tvar shuffle;\n\n\t\t\tif (item === 'footer') {\n\t\t\t\tshuffle =\n\t\t\t\t\tbodyTop > windowBottom\n\t\t\t\t\t\t? position.tfootHeight // Yes - push the footer below\n\t\t\t\t\t\t: bodyTop + position.tfootHeight - windowBottom; // No\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Otherwise must be a header so get the difference from the bottom of the\n\t\t\t\t//  desired floating header and the bottom of the table body\n\t\t\t\tshuffle =\n\t\t\t\t\twindowTop +\n\t\t\t\t\tthis.c.headerOffset +\n\t\t\t\t\tposition.theadHeight -\n\t\t\t\t\tbodyBottom;\n\t\t\t}\n\n\t\t\t// Set the top or bottom based off of the offset and the shuffle value\n\t\t\tvar prop = item === 'header' ? 'top' : 'bottom';\n\t\t\tvar val = this.c[item + 'Offset'] - (shuffle > 0 ? shuffle : 0);\n\n\t\t\titemDom.floating.addClass('fixedHeader-floating');\n\t\t\titemDom.floatingParent\n\t\t\t\t.css(prop, val)\n\t\t\t\t.css({\n\t\t\t\t\tleft: position.left,\n\t\t\t\t\t'z-index': 3\n\t\t\t\t});\n\n\t\t\timportantWidth(position.width);\n\n\t\t\tif (item === 'footer') {\n\t\t\t\titemDom.floating.css('top', '');\n\t\t\t}\n\t\t}\n\t\telse if (mode === 'below') {\n\t\t\t// only used for the header\n\t\t\t// Fix the position of the floating header at base of the table body\n\t\t\tthis._clone(item, forceChange);\n\n\t\t\titemDom.floating.addClass('fixedHeader-locked');\n\t\t\titemDom.floatingParent.css({\n\t\t\t\tposition: 'absolute',\n\t\t\t\ttop: position.tfootTop - position.theadHeight,\n\t\t\t\tleft: position.left + 'px'\n\t\t\t});\n\n\t\t\timportantWidth(position.width);\n\t\t}\n\t\telse if (mode === 'above') {\n\t\t\t// only used for the footer\n\t\t\t// Fix the position of the floating footer at top of the table body\n\t\t\tthis._clone(item, forceChange);\n\n\t\t\titemDom.floating.addClass('fixedHeader-locked');\n\t\t\titemDom.floatingParent.css({\n\t\t\t\tposition: 'absolute',\n\t\t\t\ttop: position.tbodyTop,\n\t\t\t\tleft: position.left + 'px'\n\t\t\t});\n\n\t\t\timportantWidth(position.width);\n\t\t}\n\n\t\t// Restore focus if it was lost\n\t\tif (focus && focus !== document.activeElement) {\n\t\t\tsetTimeout(function () {\n\t\t\t\tfocus.focus();\n\t\t\t}, 10);\n\t\t}\n\n\t\tthis.s.scrollLeft.header = -1;\n\t\tthis.s.scrollLeft.footer = -1;\n\t\tthis.s[item + 'Mode'] = mode;\n\n\t\tdt.trigger('fixedheader-mode', [mode, item]);\n\t},\n\n\t/**\n\t * Cache the positional information that is required for the mode\n\t * calculations that FixedHeader performs.\n\t *\n\t * @private\n\t */\n\t_positions: function () {\n\t\tvar dt = this.s.dt;\n\t\tvar table = dt.table();\n\t\tvar position = this.s.position;\n\t\tvar dom = this.dom;\n\t\tvar tableNode = $(table.node());\n\t\tvar scrollEnabled = this._scrollEnabled();\n\n\t\t// Need to use the header and footer that are in the main table,\n\t\t// regardless of if they are clones, since they hold the positions we\n\t\t// want to measure from\n\t\tvar thead = $(dt.table().header());\n\t\tvar tfoot = $(dt.table().footer());\n\t\tvar tbody = dom.tbody;\n\t\tvar scrollBody = tableNode.parent();\n\n\t\tposition.visible = tableNode.is(':visible');\n\t\tposition.width = tableNode.outerWidth();\n\t\tposition.left = tableNode.offset().left;\n\t\tposition.theadTop = thead.offset().top;\n\t\tposition.tbodyTop = scrollEnabled\n\t\t\t? scrollBody.offset().top\n\t\t\t: tbody.offset().top;\n\t\tposition.tbodyHeight = scrollEnabled\n\t\t\t? scrollBody.outerHeight()\n\t\t\t: tbody.outerHeight();\n\t\tposition.theadHeight = thead.outerHeight();\n\t\tposition.theadBottom = position.theadTop + position.theadHeight;\n\t\tposition.tfootTop = position.tbodyTop + position.tbodyHeight; //tfoot.offset().top;\n\n\t\tif (tfoot.length) {\n\t\t\tposition.tfootBottom = position.tfootTop + tfoot.outerHeight();\n\t\t\tposition.tfootHeight = tfoot.outerHeight();\n\t\t}\n\t\telse {\n\t\t\tposition.tfootBottom = position.tfootTop;\n\t\t\tposition.tfootHeight = 0;\n\t\t}\n\t},\n\n\t/**\n\t * Mode calculation - determine what mode the fixed items should be placed\n\t * into.\n\t *\n\t * @param  {boolean} forceChange Force a redraw of the mode, even if already\n\t *     in that mode.\n\t * @private\n\t */\n\t_scroll: function (forceChange) {\n\t\tif (this.s.dt.settings()[0].bDestroying) {\n\t\t\treturn;\n\t\t}\n\n\t\t// ScrollBody details\n\t\tvar scrollEnabled = this._scrollEnabled();\n\t\tvar scrollBody = $(this.s.dt.table().node()).parent();\n\t\tvar scrollOffset = scrollBody.offset();\n\t\tvar scrollHeight = scrollBody.outerHeight();\n\n\t\t// Window details\n\t\tvar windowLeft = $(document).scrollLeft();\n\t\tvar windowTop = $(document).scrollTop();\n\t\tvar windowHeight = $(window).height();\n\t\tvar windowBottom = windowHeight + windowTop;\n\n\t\tvar position = this.s.position;\n\t\tvar headerMode, footerMode;\n\n\t\t// Body Details\n\t\tvar bodyTop = scrollEnabled ? scrollOffset.top : position.tbodyTop;\n\t\tvar bodyLeft = scrollEnabled ? scrollOffset.left : position.left;\n\t\tvar bodyBottom = scrollEnabled\n\t\t\t? scrollOffset.top + scrollHeight\n\t\t\t: position.tfootTop;\n\t\tvar bodyWidth = scrollEnabled\n\t\t\t? scrollBody.outerWidth()\n\t\t\t: position.tbodyWidth;\n\n\t\tif (this.c.header) {\n\t\t\tif (!this.s.enable) {\n\t\t\t\theaderMode = 'in-place';\n\t\t\t}\n\t\t\t// The header is in it's normal place if the body top is lower than\n\t\t\t//  the scroll of the window plus the headerOffset and the height of the header\n\t\t\telse if (\n\t\t\t\t!position.visible ||\n\t\t\t\twindowTop + this.c.headerOffset + position.theadHeight <=\n\t\t\t\t\tbodyTop\n\t\t\t) {\n\t\t\t\theaderMode = 'in-place';\n\t\t\t}\n\t\t\t// The header should be floated if\n\t\t\telse if (\n\t\t\t\t// The scrolling plus the header offset plus the height of the header is lower than the top of the body\n\t\t\t\twindowTop + this.c.headerOffset + position.theadHeight >\n\t\t\t\t\tbodyTop &&\n\t\t\t\t// And the scrolling at the top plus the header offset is above the bottom of the body\n\t\t\t\twindowTop + this.c.headerOffset + position.theadHeight <\n\t\t\t\t\tbodyBottom\n\t\t\t) {\n\t\t\t\theaderMode = 'in';\n\n\t\t\t\t// Further to the above, If the scrolling plus the header offset plus the header height is lower\n\t\t\t\t// than the bottom of the table a shuffle is required so have to force the calculation\n\t\t\t\tif (\n\t\t\t\t\twindowTop + this.c.headerOffset + position.theadHeight >\n\t\t\t\t\t\tbodyBottom ||\n\t\t\t\t\tthis.dom.header.floatingParent === undefined\n\t\t\t\t) {\n\t\t\t\t\tforceChange = true;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvar child = this.dom.header.floatingParent\n\t\t\t\t\t\t.css({\n\t\t\t\t\t\t\ttop: this.c.headerOffset,\n\t\t\t\t\t\t\tposition: 'fixed'\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.children()\n\t\t\t\t\t\t.eq(0);\n\n\t\t\t\t\tif (child.find(this.dom.header.floating).length === 0) {\n\t\t\t\t\t\tchild.append(this.dom.header.floating);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Anything else and the view is below the table\n\t\t\telse {\n\t\t\t\theaderMode = 'below';\n\t\t\t}\n\n\t\t\tif (forceChange || headerMode !== this.s.headerMode) {\n\t\t\t\tthis._modeChange(headerMode, 'header', forceChange);\n\t\t\t}\n\n\t\t\tthis._horizontal('header', windowLeft);\n\t\t}\n\n\t\tvar header = {\n\t\t\toffset: { top: 0, left: 0 },\n\t\t\theight: 0\n\t\t};\n\t\tvar footer = {\n\t\t\toffset: { top: 0, left: 0 },\n\t\t\theight: 0\n\t\t};\n\n\t\tif (\n\t\t\tthis.c.footer &&\n\t\t\tthis.dom.tfoot.length &&\n\t\t\tthis.dom.tfoot.find('th, td').length\n\t\t) {\n\t\t\tif (!this.s.enable) {\n\t\t\t\tfooterMode = 'in-place';\n\t\t\t}\n\t\t\telse if (\n\t\t\t\t!position.visible ||\n\t\t\t\tposition.tfootBottom + this.c.footerOffset <= windowBottom\n\t\t\t) {\n\t\t\t\tfooterMode = 'in-place';\n\t\t\t}\n\t\t\telse if (\n\t\t\t\tbodyBottom + position.tfootHeight + this.c.footerOffset >\n\t\t\t\t\twindowBottom &&\n\t\t\t\tbodyTop + this.c.footerOffset < windowBottom\n\t\t\t) {\n\t\t\t\tfooterMode = 'in';\n\t\t\t\tforceChange = true;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfooterMode = 'above';\n\t\t\t}\n\n\t\t\tif (forceChange || footerMode !== this.s.footerMode) {\n\t\t\t\tthis._modeChange(footerMode, 'footer', forceChange);\n\t\t\t}\n\n\t\t\tthis._horizontal('footer', windowLeft);\n\n\t\t\tvar getOffsetHeight = function (el) {\n\t\t\t\treturn {\n\t\t\t\t\toffset: el.offset(),\n\t\t\t\t\theight: el.outerHeight()\n\t\t\t\t};\n\t\t\t};\n\n\t\t\theader = this.dom.header.floating\n\t\t\t\t? getOffsetHeight(this.dom.header.floating)\n\t\t\t\t: getOffsetHeight(this.dom.thead);\n\t\t\tfooter = this.dom.footer.floating\n\t\t\t\t? getOffsetHeight(this.dom.footer.floating)\n\t\t\t\t: getOffsetHeight(this.dom.tfoot);\n\n\t\t\t// If scrolling is enabled and the footer is off the screen\n\t\t\tif (scrollEnabled && footer.offset.top > windowTop) {\n\t\t\t\t// && footer.offset.top >= windowBottom) {\n\t\t\t\t// Calculate the gap between the top of the scrollBody and the top of the window\n\t\t\t\tvar overlap = windowTop - scrollOffset.top;\n\t\t\t\t// The new height is the bottom of the window\n\t\t\t\tvar newHeight =\n\t\t\t\t\twindowBottom +\n\t\t\t\t\t// If the gap between the top of the scrollbody and the window is more than\n\t\t\t\t\t//  the height of the header then the top of the table is still visible so add that gap\n\t\t\t\t\t// Doing this has effectively calculated the height from the top of the table to the bottom of the current page\n\t\t\t\t\t(overlap > -header.height ? overlap : 0) -\n\t\t\t\t\t// Take from that\n\t\t\t\t\t// The top of the header plus\n\t\t\t\t\t(header.offset.top +\n\t\t\t\t\t\t// The header height if the standard header is present\n\t\t\t\t\t\t(overlap < -header.height ? header.height : 0) +\n\t\t\t\t\t\t// And the height of the footer\n\t\t\t\t\t\tfooter.height);\n\n\t\t\t\t// Don't want a negative height\n\t\t\t\tif (newHeight < 0) {\n\t\t\t\t\tnewHeight = 0;\n\t\t\t\t}\n\n\t\t\t\t// At the end of the above calculation the space between the header (top of the page if floating)\n\t\t\t\t// and the point just above the footer should be the new value for the height of the table.\n\t\t\t\tscrollBody.outerHeight(newHeight);\n\n\t\t\t\t// Need some rounding here as sometimes very small decimal places are encountered\n\t\t\t\t// If the actual height is bigger or equal to the height we just applied then the footer is \"Floating\"\n\t\t\t\tif (\n\t\t\t\t\tMath.round(scrollBody.outerHeight()) >=\n\t\t\t\t\tMath.round(newHeight)\n\t\t\t\t) {\n\t\t\t\t\t$(this.dom.tfoot.parent()).addClass('fixedHeader-floating');\n\t\t\t\t}\n\t\t\t\t// Otherwise max-width has kicked in so it is not floating\n\t\t\t\telse {\n\t\t\t\t\t$(this.dom.tfoot.parent()).removeClass(\n\t\t\t\t\t\t'fixedHeader-floating'\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.dom.header.floating) {\n\t\t\tthis.dom.header.floatingParent.css('left', bodyLeft - windowLeft);\n\t\t}\n\t\tif (this.dom.footer.floating) {\n\t\t\tthis.dom.footer.floatingParent.css('left', bodyLeft - windowLeft);\n\t\t}\n\n\t\t// If fixed columns is being used on this table then the blockers need to be copied across\n\t\t// Cloning these is cleaner than creating as our own as it will keep consistency with fixedColumns automatically\n\t\t// ASSUMING that the class remains the same\n\t\tif (this.s.dt.settings()[0]._fixedColumns !== undefined) {\n\t\t\tvar adjustBlocker = function (side, end, el) {\n\t\t\t\tif (el === undefined) {\n\t\t\t\t\tvar blocker = $(\n\t\t\t\t\t\t'div.dtfc-' + side + '-' + end + '-blocker'\n\t\t\t\t\t);\n\n\t\t\t\t\tel =\n\t\t\t\t\t\tblocker.length === 0\n\t\t\t\t\t\t\t? null\n\t\t\t\t\t\t\t: blocker.clone().css('z-index', 1);\n\t\t\t\t}\n\n\t\t\t\tif (el !== null) {\n\t\t\t\t\tif (headerMode === 'in' || headerMode === 'below') {\n\t\t\t\t\t\tel.appendTo('body').css({\n\t\t\t\t\t\t\ttop:\n\t\t\t\t\t\t\t\tend === 'top'\n\t\t\t\t\t\t\t\t\t? header.offset.top\n\t\t\t\t\t\t\t\t\t: footer.offset.top,\n\t\t\t\t\t\t\tleft:\n\t\t\t\t\t\t\t\tside === 'right'\n\t\t\t\t\t\t\t\t\t? bodyLeft + bodyWidth - el.width()\n\t\t\t\t\t\t\t\t\t: bodyLeft\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tel.detach();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn el;\n\t\t\t};\n\n\t\t\t// Adjust all blockers\n\t\t\tthis.dom.header.rightBlocker = adjustBlocker(\n\t\t\t\t'right',\n\t\t\t\t'top',\n\t\t\t\tthis.dom.header.rightBlocker\n\t\t\t);\n\t\t\tthis.dom.header.leftBlocker = adjustBlocker(\n\t\t\t\t'left',\n\t\t\t\t'top',\n\t\t\t\tthis.dom.header.leftBlocker\n\t\t\t);\n\t\t\tthis.dom.footer.rightBlocker = adjustBlocker(\n\t\t\t\t'right',\n\t\t\t\t'bottom',\n\t\t\t\tthis.dom.footer.rightBlocker\n\t\t\t);\n\t\t\tthis.dom.footer.leftBlocker = adjustBlocker(\n\t\t\t\t'left',\n\t\t\t\t'bottom',\n\t\t\t\tthis.dom.footer.leftBlocker\n\t\t\t);\n\t\t}\n\t},\n\n\t/**\n\t * Function to check if scrolling is enabled on the table or not\n\t * @returns Boolean value indicating if scrolling on the table is enabled or not\n\t */\n\t_scrollEnabled: function () {\n\t\tvar oScroll = this.s.dt.settings()[0].oScroll;\n\t\tif (oScroll.sY !== '' || oScroll.sX !== '') {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\t/**\n\t * Realign columns by using the colgroup tag and\n\t * checking column widths\n\t */\n\t_widths: function (itemDom) {\n\t\tif (! itemDom || ! itemDom.placeholder) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Match the table overall width\n\t\tvar tableNode = $(this.s.dt.table().node());\n\t\tvar scrollBody = $(tableNode.parent());\n\n\t\titemDom.floatingParent.css('width', scrollBody[0].offsetWidth);\n\t\titemDom.floating.css('width', tableNode[0].offsetWidth);\n\n\t\t// Strip out the old colgroup\n\t\t$('colgroup', itemDom.floating).remove();\n\n\t\t// Copy the `colgroup` element to define the number of columns - needed\n\t\t// for complex header cases where a column might not have a unique\n\t\t// header\n\t\tvar cols = itemDom.placeholder\n\t\t\t.parent()\n\t\t\t.find('colgroup')\n\t\t\t.clone()\n\t\t\t.appendTo(itemDom.floating)\n\t\t\t.find('col');\n\n\t\t// However, the widths defined in the colgroup from the DataTable might\n\t\t// not exactly reflect the actual widths of the columns (content can\n\t\t// force it to stretch). So we need to copy the actual widths into the\n\t\t// colgroup / col's used for the floating header.\n\t\tvar widths = this.s.dt.columns(':visible').widths();\n\n\t\tfor (var i=0 ; i<widths.length ; i++) {\n\t\t\tcols.eq(i).css('width', widths[i]);\n\t\t}\n\t}\n});\n\n/**\n * Version\n * @type {String}\n * @static\n */\nFixedHeader.version = '4.0.3';\n\n/**\n * Defaults\n * @type {Object}\n * @static\n */\nFixedHeader.defaults = {\n\theader: true,\n\tfooter: false,\n\theaderOffset: 0,\n\tfooterOffset: 0\n};\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n * DataTables interfaces\n */\n\n// Attach for constructor access\n$.fn.dataTable.FixedHeader = FixedHeader;\n$.fn.DataTable.FixedHeader = FixedHeader;\n\n// DataTables creation - check if the FixedHeader option has been defined on the\n// table and if so, initialise\n$(document).on('init.dt.dtfh', function (e, settings, json) {\n\tif (e.namespace !== 'dt') {\n\t\treturn;\n\t}\n\n\tvar init = settings.oInit.fixedHeader;\n\tvar defaults = DataTable.defaults.fixedHeader;\n\n\tif ((init || defaults) && !settings._fixedHeader) {\n\t\tvar opts = $.extend({}, defaults, init);\n\n\t\tif (init !== false) {\n\t\t\tnew FixedHeader(settings, opts);\n\t\t}\n\t}\n});\n\n// DataTables API methods\nDataTable.Api.register('fixedHeader()', function () { });\n\nDataTable.Api.register('fixedHeader.adjust()', function () {\n\treturn this.iterator('table', function (ctx) {\n\t\tvar fh = ctx._fixedHeader;\n\n\t\tif (fh) {\n\t\t\tfh.update();\n\t\t}\n\t});\n});\n\nDataTable.Api.register('fixedHeader.enable()', function (flag) {\n\treturn this.iterator('table', function (ctx) {\n\t\tvar fh = ctx._fixedHeader;\n\n\t\tflag = flag !== undefined ? flag : true;\n\t\tif (fh && flag !== fh.enabled()) {\n\t\t\tfh.enable(flag);\n\t\t}\n\t});\n});\n\nDataTable.Api.register('fixedHeader.enabled()', function () {\n\tif (this.context.length) {\n\t\tvar fh = this.context[0]._fixedHeader;\n\n\t\tif (fh) {\n\t\t\treturn fh.enabled();\n\t\t}\n\t}\n\n\treturn false;\n});\n\nDataTable.Api.register('fixedHeader.disable()', function () {\n\treturn this.iterator('table', function (ctx) {\n\t\tvar fh = ctx._fixedHeader;\n\n\t\tif (fh && fh.enabled()) {\n\t\t\tfh.enable(false);\n\t\t}\n\t});\n});\n\n$.each(['header', 'footer'], function (i, el) {\n\tDataTable.Api.register('fixedHeader.' + el + 'Offset()', function (offset) {\n\t\tvar ctx = this.context;\n\n\t\tif (offset === undefined) {\n\t\t\treturn ctx.length && ctx[0]._fixedHeader\n\t\t\t\t? ctx[0]._fixedHeader[el + 'Offset']()\n\t\t\t\t: undefined;\n\t\t}\n\n\t\treturn this.iterator('table', function (ctx) {\n\t\t\tvar fh = ctx._fixedHeader;\n\n\t\t\tif (fh) {\n\t\t\t\tfh[el + 'Offset'](offset);\n\t\t\t}\n\t\t});\n\t});\n});\n\n\nexport default DataTable;\n","/*! KeyTable 2.12.1\n * Â© SpryMedia Ltd - datatables.net/license\n */\n\nimport jQuery from 'jquery';\nimport DataTable from 'datatables.net';\n\n// Allow reassignment of the $ variable\nlet $ = jQuery;\n\n\n/**\n * @summary     KeyTable\n * @description Spreadsheet like keyboard navigation for DataTables\n * @version     2.12.1\n * @file        dataTables.keyTable.js\n * @author      SpryMedia Ltd\n * @contact     datatables.net\n * @copyright   Copyright SpryMedia Ltd.\n *\n * This source file is free software, available under the following license:\n *   MIT license - http://datatables.net/license/mit\n *\n * This source file is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n * or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.\n *\n * For details please refer to: http://www.datatables.net\n */\n\nvar namespaceCounter = 0;\nvar editorNamespaceCounter = 0;\n\nvar KeyTable = function (dt, opts) {\n\t// Sanity check that we are using DataTables 1.10 or newer\n\tif (!DataTable.versionCheck || !DataTable.versionCheck('1.10.8')) {\n\t\tthrow 'KeyTable requires DataTables 1.10.8 or newer';\n\t}\n\n\t// User and defaults configuration object\n\tthis.c = $.extend(true, {}, DataTable.defaults.keyTable, KeyTable.defaults, opts);\n\n\t// Internal settings\n\tthis.s = {\n\t\t/** @type {DataTable.Api} DataTables' API instance */\n\t\tdt: new DataTable.Api(dt),\n\n\t\t/** Indicate when the DataTable is redrawing - take no action on key presses */\n\t\tdtDrawing: false,\n\n\t\tenable: true,\n\n\t\t/** @type {bool} Flag for if a draw is triggered by focus */\n\t\tfocusDraw: false,\n\n\t\t/** @type {bool} Flag to indicate when waiting for a draw to happen.\n\t\t *   Will ignore key presses at this point\n\t\t */\n\t\twaitingForDraw: false,\n\n\t\t/** @type {object} Information about the last cell that was focused */\n\t\tlastFocus: null,\n\n\t\t/** @type {string} Unique namespace per instance */\n\t\tnamespace: '.keyTable-' + namespaceCounter++,\n\n\t\t/** @type {Node} Input element for tabbing into the table */\n\t\ttabInput: null\n\t};\n\n\t// DOM items\n\tthis.dom = {};\n\n\t// Check if row reorder has already been initialised on this table\n\tvar settings = this.s.dt.settings()[0];\n\tvar exisiting = settings.keytable;\n\tif (exisiting) {\n\t\treturn exisiting;\n\t}\n\n\tsettings.keytable = this;\n\tthis._constructor();\n};\n\n$.extend(KeyTable.prototype, {\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t * API methods for DataTables API interface\n\t */\n\n\t/**\n\t * Blur the table's cell focus\n\t */\n\tblur: function () {\n\t\tthis._blur();\n\t},\n\n\t/**\n\t * Enable cell focus for the table\n\t *\n\t * @param  {string} state Can be `true`, `false` or `-string navigation-only`\n\t */\n\tenable: function (state) {\n\t\tthis.s.enable = state;\n\t},\n\n\t/**\n\t * Get enable status\n\t */\n\tenabled: function () {\n\t\treturn this.s.enable;\n\t},\n\n\t/**\n\t * Focus on a cell\n\t * @param  {integer} row    Row index\n\t * @param  {integer} column Column index\n\t */\n\tfocus: function (row, column) {\n\t\tthis._focus(this.s.dt.cell(row, column));\n\t},\n\n\t/**\n\t * Is the cell focused\n\t * @param  {object} cell Cell index to check\n\t * @returns {boolean} true if focused, false otherwise\n\t */\n\tfocused: function (cell) {\n\t\tvar lastFocus = this.s.lastFocus;\n\n\t\tif (!lastFocus) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar lastIdx = this.s.lastFocus.cell.index();\n\t\treturn cell.row === lastIdx.row && cell.column === lastIdx.column;\n\t},\n\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t * Constructor\n\t */\n\n\t/**\n\t * Initialise the KeyTable instance\n\t *\n\t * @private\n\t */\n\t_constructor: function () {\n\t\tthis._tabInput();\n\n\t\tvar that = this;\n\t\tvar dt = this.s.dt;\n\t\tvar table = $(dt.table().node());\n\t\tvar namespace = this.s.namespace;\n\t\tvar editorBlock = false;\n\n\t\t// Need to be able to calculate the cell positions relative to the table\n\t\tif (table.css('position') === 'static') {\n\t\t\ttable.css('position', 'relative');\n\t\t}\n\n\t\t// Click to focus\n\t\t$(dt.table().body()).on('click' + namespace, 'th, td', function (e) {\n\t\t\tif (that.s.enable === false) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar cell = dt.cell(this);\n\n\t\t\tif (!cell.any()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthat._focus(cell, null, false, e);\n\t\t});\n\n\t\t// Key events\n\t\t$(document).on('keydown' + namespace, function (e) {\n\t\t\tif (!editorBlock && !that.s.dtDrawing) {\n\t\t\t\tthat._key(e);\n\t\t\t}\n\t\t\telse {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t});\n\n\t\t// Click blur\n\t\tif (this.c.blurable) {\n\t\t\t$(document).on('mousedown' + namespace, function (e) {\n\t\t\t\t// Click on the search input will blur focus\n\t\t\t\tif ($(e.target).parents('.dataTables_filter, .dt-search').length) {\n\t\t\t\t\tthat._blur();\n\t\t\t\t}\n\n\t\t\t\t// If the click was inside the DataTables container, don't blur\n\t\t\t\tif ($(e.target).parents().filter(dt.table().container()).length) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Don't blur in Editor form\n\t\t\t\tif ($(e.target).parents('div.DTE').length) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Or an Editor date input\n\t\t\t\tif (\n\t\t\t\t\t$(e.target).parents('div.editor-datetime').length ||\n\t\t\t\t\t$(e.target).parents('div.dt-datetime').length\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//If the click was inside the fixed columns container, don't blur\n\t\t\t\tif ($(e.target).parents().filter('.DTFC_Cloned').length) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthat._blur();\n\t\t\t});\n\t\t}\n\n\t\tif (this.c.editor) {\n\t\t\tvar editor = this.c.editor;\n\n\t\t\t// Need to disable KeyTable when the main editor is shown\n\t\t\teditor.on('open.keyTableMain', function (e, mode, action) {\n\t\t\t\tif (mode !== 'inline' && that.s.enable) {\n\t\t\t\t\tthat.enable(false);\n\n\t\t\t\t\teditor.one('close' + namespace, function () {\n\t\t\t\t\t\tthat.enable(true);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (this.c.editOnFocus) {\n\t\t\t\tdt.on(\n\t\t\t\t\t'key-focus' + namespace + ' key-refocus' + namespace,\n\t\t\t\t\tfunction (e, dt, cell, orig) {\n\t\t\t\t\t\tthat._editor(null, orig, true);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Activate Editor when a key is pressed (will be ignored, if\n\t\t\t// already active).\n\t\t\tdt.on('key' + namespace, function (e, dt, key, cell, orig) {\n\t\t\t\tthat._editor(key, orig, false);\n\t\t\t});\n\n\t\t\t// Active editing on double click - it will already have focus from\n\t\t\t// the click event handler above\n\t\t\t$(dt.table().body()).on('dblclick' + namespace, 'th, td', function (e) {\n\t\t\t\tif (that.s.enable === false) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar cell = dt.cell(this);\n\n\t\t\t\tif (!cell.any()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (that.s.lastFocus && this !== that.s.lastFocus.cell.node()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthat._editor(null, e, true);\n\t\t\t});\n\n\t\t\t// While Editor is busy processing, we don't want to process any key events\n\t\t\teditor\n\t\t\t\t.on('preSubmit', function () {\n\t\t\t\t\teditorBlock = true;\n\t\t\t\t})\n\t\t\t\t.on('preSubmitCancelled', function () {\n\t\t\t\t\teditorBlock = false;\n\t\t\t\t})\n\t\t\t\t.on('submitComplete', function () {\n\t\t\t\t\teditorBlock = false;\n\t\t\t\t});\n\t\t}\n\n\t\t// Stave saving\n\t\t// if ( dt.settings()[0].oFeatures.bStateSave ) {\n\t\tdt.on('stateSaveParams' + namespace, function (e, s, d) {\n\t\t\td.keyTable = that.s.lastFocus ? that.s.lastFocus.cell.index() : null;\n\t\t});\n\t\t// }\n\n\t\tdt.on('column-visibility' + namespace, function (e) {\n\t\t\tthat._tabInput();\n\t\t});\n\n\t\tdt.on('column-reorder' + namespace, function (e, s, d) {\n\t\t\t// Need to update the last focus cell's index\n\t\t\tvar lastFocus = that.s.lastFocus;\n\n\t\t\tif (lastFocus && lastFocus.cell) {\n\t\t\t\tvar curr = lastFocus.relative.column;\n\n\t\t\t\t// Manipulate the API instance to correct the column index\n\t\t\t\tlastFocus.cell[0][0].column = d.mapping.indexOf(curr);\n\t\t\t\tlastFocus.relative.column = d.mapping.indexOf(curr);\n\t\t\t}\n\t\t});\n\n\t\t// When the table is about to do a draw we need to block key\n\t\t// handling. This is only important for async draws - i.e.\n\t\t// server-side processing.\n\t\tdt.on('preDraw' + namespace + ' scroller-will-draw' + namespace, function (e) {\n\t\t\tthat.s.dtDrawing = true;\n\t\t});\n\n\t\t// Redraw - retain focus on the current cell\n\t\tdt.on('draw' + namespace, function (e) {\n\t\t\tthat.s.dtDrawing = false;\n\n\t\t\tthat._tabInput();\n\n\t\t\tif (that.s.focusDraw) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar lastFocus = that.s.lastFocus;\n\n\t\t\tif (lastFocus) {\n\t\t\t\tvar relative = that.s.lastFocus.relative;\n\t\t\t\tvar info = dt.page.info();\n\t\t\t\tvar row = relative.row;\n\n\t\t\t\tif (info.recordsDisplay === 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// If the refocus is outside the current draw zone -\n\t\t\t\t// don't attempt to refocus onto it\n\t\t\t\tif (row < info.start || row > info.start + info.length) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Reverse if needed\n\t\t\t\tif (row >= info.recordsDisplay) {\n\t\t\t\t\trow = info.recordsDisplay - 1;\n\t\t\t\t}\n\n\t\t\t\tthat._focus(row, relative.column, true, e);\n\t\t\t}\n\t\t});\n\n\t\t// Clipboard support\n\t\tif (this.c.clipboard) {\n\t\t\tthis._clipboard();\n\t\t}\n\n\t\tdt.on('destroy' + namespace, function () {\n\t\t\tthat._blur(true);\n\n\t\t\t// Event tidy up\n\t\t\tdt.off(namespace);\n\n\t\t\t$(dt.table().body())\n\t\t\t\t.off('click' + namespace, 'th, td')\n\t\t\t\t.off('dblclick' + namespace, 'th, td');\n\n\t\t\t$(document)\n\t\t\t\t.off('mousedown' + namespace)\n\t\t\t\t.off('keydown' + namespace)\n\t\t\t\t.off('copy' + namespace)\n\t\t\t\t.off('paste' + namespace);\n\t\t});\n\n\t\t// Initial focus comes from state or options\n\t\tvar state = dt.state.loaded();\n\n\t\tif (state && state.keyTable) {\n\t\t\t// Wait until init is done\n\t\t\tdt.one('init', function () {\n\t\t\t\tvar cell = dt.cell(state.keyTable);\n\n\t\t\t\t// Ensure that the saved cell still exists\n\t\t\t\tif (cell.any()) {\n\t\t\t\t\tcell.focus();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse if (this.c.focus) {\n\t\t\tdt.cell(this.c.focus).focus();\n\t\t}\n\t},\n\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t * Private methods\n\t */\n\n\t/**\n\t * Blur the control\n\t *\n\t * @param {boolean} [noEvents=false] Don't trigger updates / events (for destroying)\n\t * @private\n\t */\n\t_blur: function (noEvents) {\n\t\tif (!this.s.enable || !this.s.lastFocus) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar cell = this.s.lastFocus.cell;\n\n\t\t$(cell.node()).removeClass(this.c.className);\n\t\tthis.s.lastFocus = null;\n\n\t\tif (!noEvents) {\n\t\t\tthis._updateFixedColumns(cell.index().column);\n\n\t\t\tthis._emitEvent('key-blur', [this.s.dt, cell]);\n\t\t}\n\t},\n\n\t/**\n\t * Clipboard interaction handlers\n\t *\n\t * @private\n\t */\n\t_clipboard: function () {\n\t\tvar dt = this.s.dt;\n\t\tvar that = this;\n\t\tvar namespace = this.s.namespace;\n\t\tvar opts = this.c.clipboard;\n\n\t\t// IE8 doesn't support getting selected text\n\t\tif (!window.getSelection) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (opts === true || opts.copy) {\n\t\t\t$(document).on('copy' + namespace, function (ejq) {\n\t\t\t\tvar e = ejq.originalEvent;\n\t\t\t\tvar selection = window.getSelection().toString();\n\t\t\t\tvar focused = that.s.lastFocus;\n\n\t\t\t\t// Only copy cell text to clipboard if there is no other selection\n\t\t\t\t// and there is a focused cell\n\t\t\t\tif (!selection && focused) {\n\t\t\t\t\te.clipboardData.setData(\n\t\t\t\t\t\t'text/plain',\n\t\t\t\t\t\tfocused.cell.render(that.c.clipboardOrthogonal)\n\t\t\t\t\t);\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (opts === true || opts.paste) {\n\t\t\t$(document).on('paste' + namespace, function (ejq) {\n\t\t\t\tvar e = ejq.originalEvent;\n\t\t\t\tvar focused = that.s.lastFocus;\n\t\t\t\tvar activeEl = document.activeElement;\n\t\t\t\tvar editor = that.c.editor;\n\t\t\t\tvar pastedText;\n\n\t\t\t\tif (focused && (!activeEl || activeEl.nodeName.toLowerCase() === 'body')) {\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tif (window.clipboardData && window.clipboardData.getData) {\n\t\t\t\t\t\t// IE\n\t\t\t\t\t\tpastedText = window.clipboardData.getData('Text');\n\t\t\t\t\t}\n\t\t\t\t\telse if (e.clipboardData && e.clipboardData.getData) {\n\t\t\t\t\t\t// Everything else\n\t\t\t\t\t\tpastedText = e.clipboardData.getData('text/plain');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (editor) {\n\t\t\t\t\t\t// Got Editor - need to activate inline editing,\n\t\t\t\t\t\t// set the value and submit\n\t\t\t\t\t\tvar options = that._inlineOptions(focused.cell.index());\n\n\t\t\t\t\t\teditor\n\t\t\t\t\t\t\t.inline(options.cell, options.field, options.options)\n\t\t\t\t\t\t\t.set(editor.displayed()[0], pastedText)\n\t\t\t\t\t\t\t.submit();\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// No editor, so just dump the data in\n\t\t\t\t\t\tfocused.cell.data(pastedText);\n\t\t\t\t\t\tdt.draw(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\t/**\n\t * Get an array of the column indexes that KeyTable can operate on. This\n\t * is a merge of the user supplied columns and the visible columns.\n\t *\n\t * @private\n\t */\n\t_columns: function () {\n\t\tvar dt = this.s.dt;\n\t\tvar user = dt.columns(this.c.columns).indexes();\n\t\tvar out = [];\n\n\t\tdt.columns(':visible').every(function (i) {\n\t\t\tif (user.indexOf(i) !== -1) {\n\t\t\t\tout.push(i);\n\t\t\t}\n\t\t});\n\n\t\treturn out;\n\t},\n\n\t/**\n\t * Perform excel like navigation for Editor by triggering an edit on key\n\t * press\n\t *\n\t * @param  {integer} key Key code for the pressed key\n\t * @param  {object} orig Original event\n\t * @private\n\t */\n\t_editor: function (key, orig, hardEdit) {\n\t\t// If nothing focused, we can't take any action\n\t\tif (!this.s.lastFocus) {\n\t\t\treturn;\n\t\t}\n\n\t\t// DataTables draw event\n\t\tif (orig && orig.type === 'draw') {\n\t\t\treturn;\n\t\t}\n\n\t\tvar that = this;\n\t\tvar dt = this.s.dt;\n\t\tvar editor = this.c.editor;\n\t\tvar editCell = this.s.lastFocus.cell;\n\t\tvar namespace = this.s.namespace + 'e' + editorNamespaceCounter++;\n\n\t\t// Do nothing if there is already an inline edit in this cell\n\t\tif ($('div.DTE', editCell.node()).length) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Don't activate Editor on control key presses\n\t\tif (\n\t\t\tkey !== null &&\n\t\t\t((key >= 0x00 && key <= 0x09) ||\n\t\t\t\tkey === 0x0b ||\n\t\t\t\tkey === 0x0c ||\n\t\t\t\t(key >= 0x0e && key <= 0x1f) ||\n\t\t\t\t(key >= 0x70 && key <= 0x7b) ||\n\t\t\t\t(key >= 0x7f && key <= 0x9f))\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (orig) {\n\t\t\torig.stopPropagation();\n\n\t\t\t// Return key should do nothing - for textareas it would empty the\n\t\t\t// contents\n\t\t\tif (key === 13) {\n\t\t\t\torig.preventDefault();\n\t\t\t}\n\t\t}\n\n\t\tvar editInline = function () {\n\t\t\tvar options = that._inlineOptions(editCell.index());\n\n\t\t\teditor\n\t\t\t\t.one('open' + namespace, function () {\n\t\t\t\t\t// Remove cancel open\n\t\t\t\t\teditor.off('cancelOpen' + namespace);\n\n\t\t\t\t\t// Excel style - select all text\n\t\t\t\t\tif (!hardEdit) {\n\t\t\t\t\t\t$(\n\t\t\t\t\t\t\t'div.DTE_Field_InputControl input, div.DTE_Field_InputControl textarea'\n\t\t\t\t\t\t).select();\n\t\t\t\t\t}\n\n\t\t\t\t\t// Reduce the keys the Keys listens for\n\t\t\t\t\tdt.keys.enable(hardEdit ? 'tab-only' : 'navigation-only');\n\n\t\t\t\t\t// On blur of the navigation submit\n\t\t\t\t\tdt.on('key-blur.editor', function (e, dt, cell) {\n\t\t\t\t\t\t// When Editor has its own blur enabled - do nothing here\n\t\t\t\t\t\tif (editor.s.editOpts.onBlur === 'submit') {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (editor.displayed() && cell.node() === editCell.node()) {\n\t\t\t\t\t\t\teditor.submit();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t// Highlight the cell a different colour on full edit\n\t\t\t\t\tif (hardEdit) {\n\t\t\t\t\t\t$(dt.table().container()).addClass('dtk-focus-alt');\n\t\t\t\t\t}\n\n\t\t\t\t\t// If the dev cancels the submit, we need to return focus\n\t\t\t\t\teditor.on('preSubmitCancelled' + namespace, function () {\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\tthat._focus(editCell, null, false);\n\t\t\t\t\t\t}, 50);\n\t\t\t\t\t});\n\n\t\t\t\t\teditor.on('submitUnsuccessful' + namespace, function () {\n\t\t\t\t\t\tthat._focus(editCell, null, false);\n\t\t\t\t\t});\n\n\t\t\t\t\t// Restore full key navigation on close\n\t\t\t\t\teditor.one('close' + namespace, function () {\n\t\t\t\t\t\tdt.keys.enable(true);\n\t\t\t\t\t\tdt.off('key-blur.editor');\n\t\t\t\t\t\teditor.off(namespace);\n\t\t\t\t\t\t$(dt.table().container()).removeClass('dtk-focus-alt');\n\n\t\t\t\t\t\tif (that.s.returnSubmit) {\n\t\t\t\t\t\t\tthat.s.returnSubmit = false;\n\t\t\t\t\t\t\tthat._emitEvent('key-return-submit', [dt, editCell]);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.one('cancelOpen' + namespace, function () {\n\t\t\t\t\t// `preOpen` can cancel the display of the form, so it\n\t\t\t\t\t// might be that the open event handler isn't needed\n\t\t\t\t\teditor.off(namespace);\n\t\t\t\t})\n\t\t\t\t.inline(options.cell, options.field, options.options);\n\t\t};\n\n\t\t// Editor 1.7 listens for `return` on keyup, so if return is the trigger\n\t\t// key, we need to wait for `keyup` otherwise Editor would just submit\n\t\t// the content triggered by this keypress.\n\t\tif (key === 13) {\n\t\t\thardEdit = true;\n\n\t\t\t$(document).one('keyup', function () {\n\t\t\t\t// immediately removed\n\t\t\t\teditInline();\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\teditInline();\n\t\t}\n\t},\n\n\t_inlineOptions: function (cellIdx) {\n\t\tif (this.c.editorOptions) {\n\t\t\treturn this.c.editorOptions(cellIdx);\n\t\t}\n\n\t\treturn {\n\t\t\tcell: cellIdx,\n\t\t\tfield: undefined,\n\t\t\toptions: undefined\n\t\t};\n\t},\n\n\t/**\n\t * Emit an event on the DataTable for listeners\n\t *\n\t * @param  {string} name Event name\n\t * @param  {array} args Event arguments\n\t * @private\n\t */\n\t_emitEvent: function (name, args) {\n\t\treturn this.s.dt.iterator('table', function (ctx, i) {\n\t\t\treturn $(ctx.nTable).triggerHandler(name, args);\n\t\t});\n\t},\n\n\t/**\n\t * Focus on a particular cell, shifting the table's paging if required\n\t *\n\t * @param  {DataTables.Api|integer} row Can be given as an API instance that\n\t *   contains the cell to focus or as an integer. As the latter it is the\n\t *   visible row index (from the whole data set) - NOT the data index\n\t * @param  {integer} [column] Not required if a cell is given as the first\n\t *   parameter. Otherwise this is the column data index for the cell to\n\t *   focus on\n\t * @param {boolean} [shift=true] Should the viewport be moved to show cell\n\t * @private\n\t */\n\t_focus: function (row, column, shift, originalEvent) {\n\t\tvar that = this;\n\t\tvar dt = this.s.dt;\n\t\tvar pageInfo = dt.page.info();\n\t\tvar lastFocus = this.s.lastFocus;\n\n\t\tif (!originalEvent) {\n\t\t\toriginalEvent = null;\n\t\t}\n\n\t\tif (!this.s.enable) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (typeof row !== 'number') {\n\t\t\t// Its an API instance - check that there is actually a row\n\t\t\tif (!row.any()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Convert the cell to a row and column\n\t\t\tvar index = row.index();\n\t\t\tcolumn = index.column;\n\t\t\trow = dt.rows({ filter: 'applied', order: 'applied' }).indexes().indexOf(index.row);\n\n\t\t\t// Don't focus rows that were filtered out.\n\t\t\tif (row < 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For server-side processing normalise the row by adding the start\n\t\t\t// point, since `rows().indexes()` includes only rows that are\n\t\t\t// available at the client-side\n\t\t\tif (pageInfo.serverSide) {\n\t\t\t\trow += pageInfo.start;\n\t\t\t}\n\t\t}\n\n\t\t// Is the row on the current page? If not, we need to redraw to show the\n\t\t// page\n\t\tif (\n\t\t\tpageInfo.length !== -1 &&\n\t\t\t(row < pageInfo.start || row >= pageInfo.start + pageInfo.length)\n\t\t) {\n\t\t\tthis.s.focusDraw = true;\n\t\t\tthis.s.waitingForDraw = true;\n\n\t\t\tdt.one('draw', function () {\n\t\t\t\tthat.s.focusDraw = false;\n\t\t\t\tthat.s.waitingForDraw = false;\n\t\t\t\tthat._focus(row, column, undefined, originalEvent);\n\t\t\t})\n\t\t\t\t.page(Math.floor(row / pageInfo.length))\n\t\t\t\t.draw(false);\n\n\t\t\treturn;\n\t\t}\n\n\t\t// In the available columns?\n\t\tif ($.inArray(column, this._columns()) === -1) {\n\t\t\treturn;\n\t\t}\n\n\t\t// De-normalise the server-side processing row, so we select the row\n\t\t// in its displayed position\n\t\tif (pageInfo.serverSide) {\n\t\t\trow -= pageInfo.start;\n\t\t}\n\n\t\t// Get the cell from the current position - ignoring any cells which might\n\t\t// not have been rendered (therefore can't use `:eq()` selector).\n\t\tvar cells = dt.cells(null, column, { search: 'applied', order: 'applied' }).flatten();\n\t\tvar cell = dt.cell(cells[row]);\n\n\t\t// Prefocus check - this event allows a focus action to be disallowed.\n\t\tvar preFocus = this._emitEvent('key-prefocus', [this.s.dt, cell, originalEvent || null]);\n\t\tif (preFocus.indexOf(false) !== -1) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (lastFocus) {\n\t\t\t// Don't trigger a refocus on the same cell\n\t\t\tif (lastFocus.node === cell.node()) {\n\t\t\t\tthis._emitEvent('key-refocus', [this.s.dt, cell, originalEvent || null]);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Otherwise blur the old focus\n\t\t\tthis._blur();\n\t\t}\n\n\t\t// Clear focus from other tables\n\t\tthis._removeOtherFocus();\n\n\t\tvar node = $(cell.node());\n\t\tnode.addClass(this.c.className);\n\n\t\tthis._updateFixedColumns(column);\n\n\t\t// Shift viewpoint and page to make cell visible\n\t\tif (shift === undefined || shift === true) {\n\t\t\tthis._scroll($(window), $(document.body), node, 'offset');\n\n\t\t\tvar bodyParent = dt.table().body().parentNode;\n\t\t\tif (bodyParent !== dt.table().header().parentNode) {\n\t\t\t\tvar parent = $(bodyParent.parentNode);\n\n\t\t\t\tthis._scroll(parent, parent, node, 'position');\n\t\t\t}\n\t\t}\n\n\t\t// Event and finish\n\t\tvar info = dt.page.info();\n\n\t\tthis.s.lastFocus = {\n\t\t\tcell: cell,\n\t\t\tnode: cell.node(),\n\t\t\trelative: {\n\t\t\t\trow: info.start + dt.rows({ page: 'current' }).indexes().indexOf(cell.index().row),\n\t\t\t\tcolumn: cell.index().column\n\t\t\t}\n\t\t};\n\n\t\tthis._emitEvent('key-focus', [this.s.dt, cell, originalEvent || null]);\n\t\tdt.state.save();\n\t},\n\n\t/**\n\t * Handle key press\n\t *\n\t * @param  {object} e Event\n\t * @private\n\t */\n\t_key: function (e) {\n\t\t// If we are waiting for a draw to happen from another key event, then\n\t\t// do nothing for this new key press.\n\t\tif (this.s.waitingForDraw) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\t// Ignore key presses in an Editor inline create row - it is not navigatable\n\t\t// by KeyTable\n\t\tif ($(e.target).closest('.dte-inlineAdd').length) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar enable = this.s.enable;\n\t\tthis.s.returnSubmit =\n\t\t\t(enable === 'navigation-only' || enable === 'tab-only') && e.keyCode === 13\n\t\t\t\t? true\n\t\t\t\t: false;\n\n\t\tvar navEnable = enable === true || enable === 'navigation-only';\n\t\tif (!enable) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ((e.keyCode === 0 || e.ctrlKey || e.metaKey || e.altKey) && !(e.ctrlKey && e.altKey)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If not focused, then there is no key action to take\n\t\tvar lastFocus = this.s.lastFocus;\n\t\tif (!lastFocus) {\n\t\t\treturn;\n\t\t}\n\n\t\t// And the last focus still exists!\n\t\tif (!this.s.dt.cell(lastFocus.node).any()) {\n\t\t\tthis.s.lastFocus = null;\n\t\t\treturn;\n\t\t}\n\n\t\tvar that = this;\n\t\tvar dt = this.s.dt;\n\t\tvar scrolling = this.s.dt.settings()[0].oScroll.sY ? true : false;\n\n\t\t// If we are not listening for this key, do nothing\n\t\tif (this.c.keys && $.inArray(e.keyCode, this.c.keys) === -1) {\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (e.keyCode) {\n\t\t\tcase 9: // tab\n\t\t\t\t// `enable` can be tab-only\n\t\t\t\te.preventDefault();\n\n\t\t\t\tthis._keyAction(function () {\n\t\t\t\t\tthat._shift(e, e.shiftKey ? 'left' : 'right', true);\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase 27: // esc\n\t\t\t\t// If there is an inline edit in the cell, let it blur first,\n\t\t\t\t// a second escape will then blur keytable\n\t\t\t\tif ($(lastFocus.node).find('div.DTE').length) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (this.c.blurable && enable === true) {\n\t\t\t\t\tthis._blur();\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 33: // page up (previous page)\n\t\t\tcase 34: // page down (next page)\n\t\t\t\tif (navEnable && !scrolling) {\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tthis._keyAction(function () {\n\t\t\t\t\t\tdt.page(e.keyCode === 33 ? 'previous' : 'next').draw(false);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 35: // end (end of current page)\n\t\t\tcase 36: // home (start of current page)\n\t\t\t\tif (navEnable) {\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tthis._keyAction(function () {\n\t\t\t\t\t\tvar indexes = dt.cells({ page: 'current' }).indexes();\n\t\t\t\t\t\tvar colIndexes = that._columns();\n\n\t\t\t\t\t\tthat._focus(\n\t\t\t\t\t\t\tdt.cell(indexes[e.keyCode === 35 ? indexes.length - 1 : colIndexes[0]]),\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\te\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 37: // left arrow\n\t\t\t\tif (navEnable) {\n\t\t\t\t\tthis._keyAction(function () {\n\t\t\t\t\t\tthat._shift(e, 'left');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 38: // up arrow\n\t\t\t\tif (navEnable) {\n\t\t\t\t\tthis._keyAction(function () {\n\t\t\t\t\t\tthat._shift(e, 'up');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 39: // right arrow\n\t\t\t\tif (navEnable) {\n\t\t\t\t\tthis._keyAction(function () {\n\t\t\t\t\t\tthat._shift(e, 'right');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 40: // down arrow\n\t\t\t\tif (navEnable) {\n\t\t\t\t\tthis._keyAction(function () {\n\t\t\t\t\t\tthat._shift(e, 'down');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 113: // F2 - Excel like hard edit\n\t\t\t\tif (this.c.editor) {\n\t\t\t\t\tthis._editor(null, e, true);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t// else fallthrough\n\n\t\t\tdefault:\n\t\t\t\t// Everything else - pass through only when fully enabled\n\t\t\t\tif (enable === true) {\n\t\t\t\t\tthis._emitEvent('key', [dt, e.keyCode, this.s.lastFocus.cell, e]);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t},\n\n\t/**\n\t * Whether we perform a key shift action immediately or not depends\n\t * upon if Editor is being used. If it is, then we wait until it\n\t * completes its action\n\t * @param {*} action Function to trigger when ready\n\t */\n\t_keyAction: function (action) {\n\t\tvar editor = this.c.editor;\n\n\t\tif (editor && editor.mode() && editor.display()) {\n\t\t\teditor.submit(action);\n\t\t}\n\t\telse {\n\t\t\taction();\n\t\t}\n\t},\n\n\t/**\n\t * Remove focus from all tables other than this one\n\t */\n\t_removeOtherFocus: function () {\n\t\tvar thisTable = this.s.dt.table().node();\n\n\t\t$.fn.dataTable.tables({ api: true }).iterator('table', function (settings) {\n\t\t\tif (this.table().node() !== thisTable) {\n\t\t\t\tthis.cell.blur();\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Scroll a container to make a cell visible in it. This can be used for\n\t * both DataTables scrolling and native window scrolling.\n\t *\n\t * @param  {jQuery} container Scrolling container\n\t * @param  {jQuery} scroller  Item being scrolled\n\t * @param  {jQuery} cell      Cell in the scroller\n\t * @param  {string} posOff    `position` or `offset` - which to use for the\n\t *   calculation. `offset` for the document, otherwise `position`\n\t * @private\n\t */\n\t_scroll: function (container, scroller, cell, posOff) {\n\t\tvar offset = cell[posOff]();\n\t\tvar height = cell.outerHeight();\n\t\tvar width = cell.outerWidth();\n\n\t\tvar scrollTop = scroller.scrollTop();\n\t\tvar scrollLeft = scroller.scrollLeft();\n\t\tvar containerHeight = container.height();\n\t\tvar containerWidth = container.width();\n\n\t\t// If Scroller is being used, the table can be `position: absolute` and that\n\t\t// needs to be taken account of in the offset. If no Scroller, this will be 0\n\t\tif (posOff === 'position') {\n\t\t\toffset.top += parseInt(cell.closest('table').css('top'), 10);\n\t\t}\n\n\t\t// Top correction (partially in view)\n\t\tif (offset.top < scrollTop && offset.top + height > scrollTop - 5) {\n\t\t\tscroller.scrollTop(offset.top);\n\t\t}\n\n\t\t// Left correction\n\t\tif (offset.left < scrollLeft) {\n\t\t\tscroller.scrollLeft(offset.left);\n\t\t}\n\n\t\t// Bottom correction plus in view correction. Note that the magic 5 is to allow\n\t\t// for the edge just passing the bottom of the view\n\t\tif (\n\t\t\toffset.top + height > scrollTop + containerHeight &&\n\t\t\toffset.top < scrollTop + containerHeight + 5 &&\n\t\t\theight < containerHeight\n\t\t) {\n\t\t\tscroller.scrollTop(offset.top + height - containerHeight);\n\t\t}\n\n\t\t// Right correction\n\t\tif (offset.left + width > scrollLeft + containerWidth && width < containerWidth) {\n\t\t\tscroller.scrollLeft(offset.left + width - containerWidth);\n\t\t}\n\t},\n\n\t/**\n\t * Calculate a single offset movement in the table - up, down, left and\n\t * right and then perform the focus if possible\n\t *\n\t * @param  {object}  e           Event object\n\t * @param  {string}  direction   Movement direction\n\t * @param  {boolean} keyBlurable `true` if the key press can result in the\n\t *   table being blurred. This is so arrow keys won't blur the table, but\n\t *   tab will.\n\t * @private\n\t */\n\t_shift: function (e, direction, keyBlurable) {\n\t\tvar dt = this.s.dt;\n\t\tvar pageInfo = dt.page.info();\n\t\tvar rows = pageInfo.recordsDisplay;\n\t\tvar columns = this._columns();\n\t\tvar last = this.s.lastFocus;\n\t\tif (!last) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar currentCell = last.cell;\n\t\tif (!currentCell) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar currRow = dt\n\t\t\t.rows({ filter: 'applied', order: 'applied' })\n\t\t\t.indexes()\n\t\t\t.indexOf(currentCell.index().row);\n\n\t\t// When server-side processing, `rows().indexes()` only gives the rows\n\t\t// that are available at the client-side, so we need to normalise the\n\t\t// row's current position by the display start point\n\t\tif (pageInfo.serverSide) {\n\t\t\tcurrRow += pageInfo.start;\n\t\t}\n\n\t\tvar currCol = dt.columns(columns).indexes().indexOf(currentCell.index().column);\n\n\t\tvar row = currRow,\n\t\t\tcolumn = columns[currCol]; // row is the display, column is an index\n\n\t\t// If the direction is rtl then the logic needs to be inverted from this point forwards\n\t\tif ($(dt.table().node()).css('direction') === 'rtl') {\n\t\t\tif (direction === 'right') {\n\t\t\t\tdirection = 'left';\n\t\t\t}\n\t\t\telse if (direction === 'left') {\n\t\t\t\tdirection = 'right';\n\t\t\t}\n\t\t}\n\n\t\tif (direction === 'right') {\n\t\t\tif (currCol >= columns.length - 1) {\n\t\t\t\trow++;\n\t\t\t\tcolumn = columns[0];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcolumn = columns[currCol + 1];\n\t\t\t}\n\t\t}\n\t\telse if (direction === 'left') {\n\t\t\tif (currCol === 0) {\n\t\t\t\trow--;\n\t\t\t\tcolumn = columns[columns.length - 1];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcolumn = columns[currCol - 1];\n\t\t\t}\n\t\t}\n\t\telse if (direction === 'up') {\n\t\t\trow--;\n\t\t}\n\t\telse if (direction === 'down') {\n\t\t\trow++;\n\t\t}\n\n\t\tif (row >= 0 && row < rows && $.inArray(column, columns) !== -1) {\n\t\t\tif (e) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\n\t\t\tthis._focus(row, column, true, e);\n\t\t}\n\t\telse if (!keyBlurable || !this.c.blurable) {\n\t\t\t// No new focus, but if the table isn't blurable, then don't loose\n\t\t\t// focus\n\t\t\tif (e) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis._blur();\n\t\t}\n\t},\n\n\t/**\n\t * Create and insert a hidden input element that can receive focus on behalf\n\t * of the table\n\t *\n\t * @private\n\t */\n\t_tabInput: function () {\n\t\tvar that = this;\n\t\tvar dt = this.s.dt;\n\t\tvar tabIndex = this.c.tabIndex !== null ? this.c.tabIndex : dt.settings()[0].iTabIndex;\n\n\t\tif (tabIndex == -1) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Only create the input element once on first class\n\t\tif (!this.s.tabInput) {\n\t\t\tvar div = $('<div><input type=\"text\" tabindex=\"' + tabIndex + '\"/></div>').css({\n\t\t\t\tposition: 'absolute',\n\t\t\t\theight: 1,\n\t\t\t\twidth: 0,\n\t\t\t\toverflow: 'hidden'\n\t\t\t});\n\n\t\t\tdiv.children().on('focus', function (e) {\n\t\t\t\tvar cell = dt.cell(':eq(0)', that._columns(), { page: 'current' });\n\n\t\t\t\tif (cell.any()) {\n\t\t\t\t\tthat._focus(cell, null, true, e);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.s.tabInput = div;\n\t\t}\n\n\t\t// Insert the input element into the first cell in the table's body\n\t\tvar cell = this.s.dt\n\t\t\t.cell(':eq(0)', '0:visible', { page: 'current', order: 'current' })\n\t\t\t.node();\n\t\tif (cell) {\n\t\t\t$(cell).prepend(this.s.tabInput);\n\t\t}\n\t},\n\n\t/**\n\t * Update fixed columns if they are enabled and if the cell we are\n\t * focusing is inside a fixed column\n\t * @param  {integer} column Index of the column being changed\n\t * @private\n\t */\n\t_updateFixedColumns: function (column) {\n\t\tvar dt = this.s.dt;\n\t\tvar settings = dt.settings()[0];\n\n\t\tif (settings._oFixedColumns) {\n\t\t\tvar leftCols = settings._oFixedColumns.s.iLeftColumns;\n\t\t\tvar rightCols = settings.aoColumns.length - settings._oFixedColumns.s.iRightColumns;\n\n\t\t\tif (column < leftCols || column >= rightCols) {\n\t\t\t\tdt.fixedColumns().update();\n\t\t\t}\n\t\t}\n\t}\n});\n\n/**\n * KeyTable default settings for initialisation\n *\n * @namespace\n * @name KeyTable.defaults\n * @static\n */\nKeyTable.defaults = {\n\t/**\n\t * Can focus be removed from the table\n\t * @type {Boolean}\n\t */\n\tblurable: true,\n\n\t/**\n\t * Class to give to the focused cell\n\t * @type {String}\n\t */\n\tclassName: 'focus',\n\n\t/**\n\t * Enable or disable clipboard support\n\t * @type {Boolean}\n\t */\n\tclipboard: true,\n\n\t/**\n\t * Orthogonal data that should be copied to clipboard\n\t * @type {string}\n\t */\n\tclipboardOrthogonal: 'display',\n\n\t/**\n\t * Columns that can be focused. This is automatically merged with the\n\t * visible columns as only visible columns can gain focus.\n\t * @type {String}\n\t */\n\tcolumns: '', // all\n\n\t/**\n\t * Editor instance to automatically perform Excel like navigation\n\t * @type {Editor}\n\t */\n\teditor: null,\n\n\t/**\n\t * Trigger editing immediately on focus\n\t * @type {boolean}\n\t */\n\teditOnFocus: false,\n\n\t/**\n\t * Options to pass to Editor's inline method\n\t * @type {function}\n\t */\n\teditorOptions: null,\n\n\t/**\n\t * Select a cell to automatically select on start up. `null` for no\n\t * automatic selection\n\t * @type {cell-selector}\n\t */\n\tfocus: null,\n\n\t/**\n\t * Array of keys to listen for\n\t * @type {null|array}\n\t */\n\tkeys: null,\n\n\t/**\n\t * Tab index for where the table should sit in the document's tab flow\n\t * @type {integer|null}\n\t */\n\ttabIndex: null\n};\n\nKeyTable.version = '2.12.1';\n\n$.fn.dataTable.KeyTable = KeyTable;\n$.fn.DataTable.KeyTable = KeyTable;\n\nDataTable.Api.register('cell.blur()', function () {\n\treturn this.iterator('table', function (ctx) {\n\t\tif (ctx.keytable) {\n\t\t\tctx.keytable.blur();\n\t\t}\n\t});\n});\n\nDataTable.Api.register('cell().focus()', function () {\n\treturn this.iterator('cell', function (ctx, row, column) {\n\t\tif (ctx.keytable) {\n\t\t\tctx.keytable.focus(row, column);\n\t\t}\n\t});\n});\n\nDataTable.Api.register('keys.disable()', function () {\n\treturn this.iterator('table', function (ctx) {\n\t\tif (ctx.keytable) {\n\t\t\tctx.keytable.enable(false);\n\t\t}\n\t});\n});\n\nDataTable.Api.register('keys.enable()', function (opts) {\n\treturn this.iterator('table', function (ctx) {\n\t\tif (ctx.keytable) {\n\t\t\tctx.keytable.enable(opts === undefined ? true : opts);\n\t\t}\n\t});\n});\n\nDataTable.Api.register('keys.enabled()', function (opts) {\n\tvar ctx = this.context;\n\n\tif (ctx.length) {\n\t\treturn ctx[0].keytable ? ctx[0].keytable.enabled() : false;\n\t}\n\n\treturn false;\n});\n\nDataTable.Api.register('keys.move()', function (dir) {\n\treturn this.iterator('table', function (ctx) {\n\t\tif (ctx.keytable) {\n\t\t\tctx.keytable._shift(null, dir, false);\n\t\t}\n\t});\n});\n\n// Cell selector\nDataTable.ext.selector.cell.push(function (settings, opts, cells) {\n\tvar focused = opts.focused;\n\tvar kt = settings.keytable;\n\tvar out = [];\n\n\tif (!kt || focused === undefined) {\n\t\treturn cells;\n\t}\n\n\tfor (var i = 0, ien = cells.length; i < ien; i++) {\n\t\tif (\n\t\t\t(focused === true && kt.focused(cells[i])) ||\n\t\t\t(focused === false && !kt.focused(cells[i]))\n\t\t) {\n\t\t\tout.push(cells[i]);\n\t\t}\n\t}\n\n\treturn out;\n});\n\n// Attach a listener to the document which listens for DataTables initialisation\n// events so we can automatically initialise\n$(document).on('preInit.dt.dtk', function (e, settings, json) {\n\tif (e.namespace !== 'dt') {\n\t\treturn;\n\t}\n\n\tvar init = settings.oInit.keys;\n\tvar defaults = DataTable.defaults.keys;\n\n\tif (init || defaults) {\n\t\tvar opts = $.extend({}, defaults, init);\n\n\t\tif (init !== false) {\n\t\t\tnew KeyTable(settings, opts);\n\t\t}\n\t}\n});\n\n\nexport default DataTable;\n"],"names":["$","jQuery","Responsive","settings","opts","DataTable","versionCheck","this","s","childNodeStore","columns","current","dt","Api","responsive","details","type","c","extend","defaults","_constructor","prototype","that","oldWindowWidth","window","innerWidth","_responsive","on","util","throttle","width","_resize","e","tr","data","idx","inArray","each","i","column","index","css","addClass","off","table","body","cells","nodes","to$","removeClass","node","val","_setColumnVis","breakpoints","sort","a","b","_classLogic","_detailsInit","_timer","clearTimeout","setTimeout","_resizeAuto","_redrawChildren","d","curr","length","visible","indexOf","splice","rowIds","rows","every","child","isShown","push","id","one","_detailsDisplay","page","info","serverSide","_controlClass","ready","_colGroupAttach","colGroup","colEls","found","get","parentNode","insertBefore","append","_childNodes","row","col","name","children","cell","childNodes","iLen","_childNodesRestore","store","parentChildren","j","jen","appendChild","_columnsVisibility","breakpoint","order","map","columnIdx","priority","display","auto","minWidth","includeIn","requiredWidth","scrolling","oScroll","bar","sY","sX","iBarWidth","usedWidth","container","offsetWidth","control","empty","colIdx","showControl","never","eq","className","header","init","responsivePriority","dataPriority","getAttribute","match","add","operator","matched","size","_find","classNames","split","hasClass","k","ken","trim","brokenPoint","re","RegExp","columnsVis","firstVisible","filter","_tabIndexes","update","event","res","toggleClass","triggerHandler","renderer","call","_detailsObj","target","keyCode","click","selector","closest","toArray","targetIdx","trigger","rowIdx","columnApis","dtCol","aoColumns","sClass","columnIndex","fastData","orthogonal","hidden","rowIndex","title","iterator","forceRedraw","oldVis","slice","collapsedClass","changed","dtSettings","colEl","detach","adjust","_responsiveOnlyHidden","recordsDisplay","attr","visibleColumns","indexes","clonedTable","cloneNode","clonedHeader","appendTo","clonedFooter","footer","clonedBody","clone","style","structure","forEach","el","emptyRow","count","_responsiveMovesNodes","rowIdx2","find","removeAttr","inserted","height","overflow","clear","remove","v","showHide","_setHeaderVis","isEmptyObject","rowspan","span","search","colSpan","_colspan","colspan","ctx","removeData","iTabIndex","Infinity","childRow","render","rowNode","rendered","show","childRowImmediate","hasHidden","modal","options","closeCallback","close","document","stopPropagation","prepend","listHiddenNodes","fn","api","ul","klass","listHidden","join","tableAll","tableClass","dataTable","register","li","parent","context","registerPlural","version","json","namespace","nTable","oInit","isPlainObject","_display","_original","_modal","_bs","bootstrap","bs","Modal","localBs","dtBs","use","Error","getBs","contains","button","_instCounter","_buttonCounter","_dtButtons","ext","buttons","_entityDecoder","_fadeIn","duration","animate","stop","fadeIn","_fadeOut","fadeOut","_infoTimer","Buttons","config","Array","isArray","listenKeys","dom","tag","action","_nodeToButton","conf","active","flag","jqNode","inCollection","collection","draw","base","ien","_expandButton","_draw","collectionRebuild","newButtons","prefixButtons","unshift","apply","postfixButtons","newBtn","parentConf","disable","isSplit","disabled","prop","_checkSplitEnable","destroy","buttonInsts","inst","enable","nested","inner","processing","host","_nodeToHost","destroying","_removeKey","inserter","text","label","textNode","opt","html","_buttons","activeElement","character","String","fromCharCode","toLowerCase","_keypress","_addKey","key","attachTo","inSplit","attachPoint","lastButton","domCollection","_resolveExtends","built","_buildButton","dropIcon","dropClass","dropHtml","content","_collection","item","collectionLayout","dropup","fade","configDom","setLinerTab","spacer","nodeChild","available","run","done","async","clickBlurs","preventDefault","liner","lc","enabled","titleAttr","splitDiv","buttonContainer","buttonCreated","dropdownConf","wrapperConf","wrapper","dropButtonConfig","autoClose","align","dropdown","closeButton","splitAlignClass","splitAction","dropButton","splitBtn","_checkAnyEnabled","isCollection","ret","_buttonsHandled","shiftKey","altKey","ctrlKey","metaKey","recurse","toConfObject","loop","objArray","originalClassName","_popover","hostButton","inOpts","closed","background","backgroundClassName","containerClassName","contentClassName","collectionTitle","popoverTitle","rightAlignClassName","containerSelector","replace","hostButtonNode","hostNode","includes","existingExpanded","elements","localeCompare","cnt","mod","role","parents","last","insertAfter","tableContainer","position","offsetParent","buttonPosition","buttonOffset","offset","tableSizes","containerPosition","computed","getComputedStyle","outerHeight","parseFloat","paddingLeft","right","left","bottom","top","popoverSizes","outerWidth","marginTop","marginBottom","scrollTop","place","half","backgroundHost","btn","back","addBack","first","focus","insertPoint","instanceSelector","group","names","process","input","nodeName","buttonSelector","insts","nodeBuilder","baseIdx","stripData","str","nodeType","innerHTML","stripHtmlScript","stripHtmlComments","stripHtml","stripNewlines","decodeEntities","_exportTextarea","value","escapeExcelFormula","entityDecoder","previous","tabIndex","i18n","popover","copy","copyHtml5","csv","csvHtml5","excel","excelHtml5","pdf","pdfHtml5","pageLength","lengthMenu","aLengthMenu","vals","lang","option","_","len","buttonGroup","_groupSelector","set","jq","groupSelector","containers","pluck","unique","message","time","_exportData","filename","_filename","_title","messageTop","_message","messageBottom","extension","_stringOrFunction","caption","modifier","format","customizeData","customizeZip","select","selected","any","rowIndexes","selectedCells","cellNodes","cellIndexes","cellCounter","headerStructure","_headerFormatter","footerStructure","formatter","struct","_init","feature","fnInit","cFeature","FixedHeader","theadTop","tbodyTop","tfootTop","tfootBottom","tfootHeight","theadHeight","windowHeight","headerMode","footerMode","autoWidth","oFeatures","bAutoWidth","scrollLeft","autoDisable","floatingHeader","thead","tbody","tfoot","scrollAdjust","floating","floatingParent","limiter","placeholder","_fixedHeader","rightBlocker","leftBlocker","_modeChange","enableType","_positions","_scroll","headerOffset","footerOffset","force","is","_widths","autoHeader","autoFooter","_clone","itemDom","itemElement","_scrollEnabled","tableNode","scrollBody","scrollEnabled","_stickyPosition","scrollLeftUpdate","paddingRight","oBrowser","barWidth","blocker","sign","rtl","potential","_horizontal","lastScrollLeft","newScrollLeft","mode","forceChange","importantWidth","w","setProperty","tablePart","shuffle","scrollOffset","windowTop","windowBottom","bodyTop","bodyBottom","tbodyHeight","theadBottom","bDestroying","scrollHeight","windowLeft","bodyLeft","bodyWidth","tbodyWidth","getOffsetHeight","overlap","newHeight","Math","round","_fixedColumns","adjustBlocker","side","end","cols","widths","fixedHeader","fh","namespaceCounter","editorNamespaceCounter","KeyTable","keyTable","dtDrawing","focusDraw","waitingForDraw","lastFocus","tabInput","exisiting","keytable","blur","_blur","state","_focus","focused","lastIdx","_tabInput","editorBlock","_key","blurable","editor","editOnFocus","orig","_editor","relative","mapping","start","clipboard","_clipboard","loaded","noEvents","_updateFixedColumns","_emitEvent","getSelection","ejq","originalEvent","selection","toString","clipboardData","setData","clipboardOrthogonal","paste","pastedText","activeEl","getData","_inlineOptions","inline","field","displayed","submit","_columns","user","out","hardEdit","editCell","editInline","keys","editOpts","onBlur","returnSubmit","cellIdx","editorOptions","args","shift","pageInfo","floor","flatten","_removeOtherFocus","bodyParent","save","navEnable","_keyAction","_shift","colIndexes","thisTable","tables","scroller","posOff","containerHeight","containerWidth","parseInt","direction","keyBlurable","currentCell","currRow","currCol","div","_oFixedColumns","leftCols","iLeftColumns","rightCols","iRightColumns","fixedColumns","dir","kt"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5]}